(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,r){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.d(t,"a",function(){return y}),r.d(t,"b",function(){return m}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return n}),r.d(t,"e",function(){return f}),r.d(t,"f",function(){return l}),r.d(t,"g",function(){return i}),r.d(t,"h",function(){return h}),r.d(t,"i",function(){return o}),r.d(t,"j",function(){return p}),r.d(t,"k",function(){return s}),r.d(t,"l",function(){return u}),r.d(t,"m",function(){return d}),r.d(t,"n",function(){return _});var _="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t){return e(t={exports:{}},t.exports),t.exports}}).call(this,r(30))},10:function(e,t,r){"use strict";r.d(t,"a",function(){return A}),r.d(t,"b",function(){return a}),r.d(t,"c",function(){return m}),r.d(t,"d",function(){return s}),r.d(t,"e",function(){return y}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return i}),r.d(t,"h",function(){return g}),r.d(t,"i",function(){return A});var n=r(1),a=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},i="object"==typeof n.n&&n.n&&n.n.Object===Object&&n.n,o="object"==typeof self&&self&&self.Object===Object&&self,s=i||o||Function("return this")(),u=function(){return s.Date.now()},c=s.Symbol,l=Object.prototype,p=l.hasOwnProperty,f=l.toString,h=c?c.toStringTag:void 0,d=Object.prototype.toString,_=c?c.toStringTag:void 0,m=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":_&&_ in Object(e)?function(e){var t=p.call(e,h),r=e[h];try{e[h]=void 0;var n=!0}catch(e){}var a=f.call(e);return n&&(t?e[h]=r:delete e[h]),a}(e):function(e){return d.call(e)}(e)},y=function(e){return null!=e&&"object"==typeof e},g=function(e){return"symbol"==typeof e||y(e)&&"[object Symbol]"==m(e)},b=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,O=/^0o[0-7]+$/i,I=parseInt,E=function(e){if("number"==typeof e)return e;if(g(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(b,"");var r=S.test(e);return r||O.test(e)?I(e.slice(2),r?2:8):v.test(e)?NaN:+e},T=Math.max,w=Math.min,A=function(e,t,r){var n,i,o,s,c,l,p=0,f=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var r=n,a=i;return n=i=void 0,p=t,s=e.apply(a,r)}function m(e){var r=e-l;return void 0===l||r>=t||r<0||h&&e-p>=o}function y(){var e=u();if(m(e))return g(e);c=setTimeout(y,function(e){var r=t-(e-l);return h?w(r,o-(e-p)):r}(e))}function g(e){return c=void 0,d&&n?_(e):(n=i=void 0,s)}function b(){var e=u(),r=m(e);if(n=arguments,i=this,l=e,r){if(void 0===c)return function(e){return p=e,c=setTimeout(y,t),f?_(e):s}(l);if(h)return c=setTimeout(y,t),_(l)}return void 0===c&&(c=setTimeout(y,t)),s}return t=E(t)||0,a(r)&&(f=!!r.leading,o=(h="maxWait"in r)?T(E(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),b.cancel=function(){void 0!==c&&clearTimeout(c),p=0,n=l=i=c=void 0},b.flush=function(){return void 0===c?s:g(u())},b}},102:function(e,t,r){e.exports={selectionContainer:"search_selectionContainer__5miAf"}},138:function(e,t,r){e.exports={title:"home_title__3ok97",nav:"home_nav__3smZl"}},250:function(e,t,r){e.exports=r(486)},255:function(e,t,r){},256:function(e,t,r){},32:function(e,t,r){e.exports={searchContainer:"search_searchContainer__3P2qq",searchInput:"search_searchInput__1BgH8",searchErrorsContainer:"search_searchErrorsContainer__fk9vi",searchItemError:"search_searchItemError__ufY7H",optionListContainer:"search_optionListContainer__3xC3U",optionList:"search_optionList__3wYEj",optionlistItem:"search_optionlistItem__3Yr2D",optionlistItemLoading:"search_optionlistItemLoading__3wMt_ search_optionlistItem__3Yr2D",optionlistItemPlaceholder:"search_optionlistItemPlaceholder__1exp4",loadingContainer:"search_loadingContainer__2Q4Qn",spinner:"search_spinner__Y_1Cs",spin:"search_spin__1NWrg"}},342:function(e,t,r){},4:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"C",function(){return clearHighlightedClickedVessel}),__webpack_require__.d(__webpack_exports__,"bb",function(){return POLYGON_LAYERS_AREA}),__webpack_require__.d(__webpack_exports__,"cb",function(){return zoomIntoVesselCenter}),__webpack_require__.d(__webpack_exports__,"db",function(){return clearHighlightedVessels}),__webpack_require__.d(__webpack_exports__,"eb",function(){return MAX_SPRITES_PER_LAYER}),__webpack_require__.d(__webpack_exports__,"fb",function(){return VESSELS_BASE_RADIUS}),__webpack_require__.d(__webpack_exports__,"gb",function(){return BRUSH_RENDERING_STYLE}),__webpack_require__.d(__webpack_exports__,"hb",function(){return BRUSH_ZOOM_RENDERING_STYLE}),__webpack_require__.d(__webpack_exports__,"ib",function(){return uniq_1}),__webpack_require__.d(__webpack_exports__,"jb",function(){return vesselSatisfiesFilters}),__webpack_require__.d(__webpack_exports__,"kb",function(){return worldToPixels}),__webpack_require__.d(__webpack_exports__,"lb",function(){return TRACKS_DOTS_STYLE_ZOOM_THRESHOLD}),__webpack_require__.d(__webpack_exports__,"mb",function(){return VESSELS_HEATMAP_BLUR_FACTOR}),__webpack_require__.d(__webpack_exports__,"nb",function(){return VESSELS_HEATMAP_DIMMING_ALPHA}),__webpack_require__.d(__webpack_exports__,"ob",function(){return lngLatToWorld}),__webpack_require__.d(__webpack_exports__,"pb",function(){return VESSEL_CLICK_TOLERANCE_PX}),__webpack_require__.d(__webpack_exports__,"qb",function(){return ACTIVITY_HIGHLIGHT_HUE}),__webpack_require__.d(__webpack_exports__,"rb",function(){return VESSELS_RADIAL_GRADIENT_STYLE_ZOOM_THRESHOLD}),__webpack_require__.d(__webpack_exports__,"sb",function(){return MIN_FRAME_LENGTH_MS}),__webpack_require__.d(__webpack_exports__,"tb",function(){return mapConvert}),__webpack_require__.d(__webpack_exports__,"ub",function(){return queryHeatmapVessels}),__webpack_require__.d(__webpack_exports__,"vb",function(){return exportNativeViewport}),__webpack_require__.d(__webpack_exports__,"wb",function(){return TILES_URL_NEEDING_AUTHENTICATION}),__webpack_require__.d(__webpack_exports__,"xb",function(){return TRACKS_LAYER_IN_FRONT_OF_GROUP}),__webpack_require__.d(__webpack_exports__,"yb",function(){return setViewport}),__webpack_require__.d(__webpack_exports__,"zb",function(){return transitionEnd}),__webpack_require__.d(__webpack_exports__,"b",function(){return closePopup}),__webpack_require__.d(__webpack_exports__,"c",function(){return CUSTOM_LAYERS_SUBTYPES}),__webpack_require__.d(__webpack_exports__,"d",function(){return STATIC_LAYERS_CARTO_TILES_ENDPOINT}),__webpack_require__.d(__webpack_exports__,"e",function(){return GL_TRANSPARENT}),__webpack_require__.d(__webpack_exports__,"f",function(){return STATIC_LAYERS_CARTO_ENDPOINT}),__webpack_require__.d(__webpack_exports__,"g",function(){return startLoader}),__webpack_require__.d(__webpack_exports__,"h",function(){return getTilePromises}),__webpack_require__.d(__webpack_exports__,"i",function(){return getCleanVectorArrays}),__webpack_require__.d(__webpack_exports__,"j",function(){return groupData}),__webpack_require__.d(__webpack_exports__,"k",function(){return addTracksPointsRenderingData}),__webpack_require__.d(__webpack_exports__,"l",function(){return getTracksPlaybackData}),__webpack_require__.d(__webpack_exports__,"m",function(){return completeLoader}),__webpack_require__.d(__webpack_exports__,"n",function(){return targetMapVessel}),__webpack_require__.d(__webpack_exports__,"o",function(){return INIT_MODULE}),__webpack_require__.d(__webpack_exports__,"p",function(){return SET_TEMPORAL_EXTENT}),__webpack_require__.d(__webpack_exports__,"q",function(){return SET_HIGHLIGHT_TEMPORAL_EXTENT}),__webpack_require__.d(__webpack_exports__,"r",function(){return START_LOADER}),__webpack_require__.d(__webpack_exports__,"s",function(){return COMPLETE_LOADER}),__webpack_require__.d(__webpack_exports__,"t",function(){return INIT_HEATMAP_LAYERS}),__webpack_require__.d(__webpack_exports__,"u",function(){return UPDATE_HEATMAP_LAYER_TEMPORAL_EXTENTS_LOADED_INDICES}),__webpack_require__.d(__webpack_exports__,"v",function(){return ADD_HEATMAP_LAYER}),__webpack_require__.d(__webpack_exports__,"w",function(){return UPDATE_HEATMAP_LAYER_STYLE}),__webpack_require__.d(__webpack_exports__,"x",function(){return REMOVE_HEATMAP_LAYER}),__webpack_require__.d(__webpack_exports__,"y",function(){return ADD_REFERENCE_TILE}),__webpack_require__.d(__webpack_exports__,"z",function(){return UPDATE_HEATMAP_TILE}),__webpack_require__.d(__webpack_exports__,"A",function(){return RELEASE_HEATMAP_TILES}),__webpack_require__.d(__webpack_exports__,"B",function(){return UPDATE_LOADED_TILES}),__webpack_require__.d(__webpack_exports__,"a",function(){return HIGHLIGHT_VESSELS}),__webpack_require__.d(__webpack_exports__,"D",function(){return HIGHLIGHT_CLICKED_VESSEL}),__webpack_require__.d(__webpack_exports__,"E",function(){return CLEAR_HIGHLIGHT_CLICKED_VESSEL}),__webpack_require__.d(__webpack_exports__,"F",function(){return SET_CURRENTLY_VISIBLE_TILES}),__webpack_require__.d(__webpack_exports__,"G",function(){return SET_CURRENTLY_LOADED_TILES}),__webpack_require__.d(__webpack_exports__,"H",function(){return SET_CURRENTLY_SWAPPED_TILE_UIDS}),__webpack_require__.d(__webpack_exports__,"I",function(){return MARK_TILES_UIDS_AS_LOADED}),__webpack_require__.d(__webpack_exports__,"J",function(){return RELEASE_MARKED_TILES_UIDS}),__webpack_require__.d(__webpack_exports__,"K",function(){return SET_VIEWPORT}),__webpack_require__.d(__webpack_exports__,"L",function(){return UPDATE_VIEWPORT}),__webpack_require__.d(__webpack_exports__,"M",function(){return SET_ZOOM_INCREMENT}),__webpack_require__.d(__webpack_exports__,"N",function(){return TRANSITION_TYPE}),__webpack_require__.d(__webpack_exports__,"O",function(){return SET_MOUSE_LAT_LONG}),__webpack_require__.d(__webpack_exports__,"P",function(){return TRANSITION_END}),__webpack_require__.d(__webpack_exports__,"Q",function(){return SET_NATIVE_VIEWPORT}),__webpack_require__.d(__webpack_exports__,"R",function(){return MAX_ZOOM_LEVEL}),__webpack_require__.d(__webpack_exports__,"S",function(){return MIN_ZOOM_LEVEL}),__webpack_require__.d(__webpack_exports__,"T",function(){return store}),__webpack_require__.d(__webpack_exports__,"U",function(){return setTemporalExtent}),__webpack_require__.d(__webpack_exports__,"V",function(){return initModule}),__webpack_require__.d(__webpack_exports__,"W",function(){return setHighlightTemporalExtent}),__webpack_require__.d(__webpack_exports__,"X",function(){return updateHeatmapLayers}),__webpack_require__.d(__webpack_exports__,"Y",function(){return updateLayerLoadTemporalExtents}),__webpack_require__.d(__webpack_exports__,"Z",function(){return transitionToZoom}),__webpack_require__.d(__webpack_exports__,"ab",function(){return updateViewport});var _chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39),TIMELINE_STEP=864e5,MIN_FRAME_LENGTH_MS=TIMELINE_STEP,VESSELS_RADIAL_GRADIENT_STYLE_ZOOM_THRESHOLD=6,VESSELS_BASE_RADIUS=8,VESSELS_HEATMAP_BLUR_FACTOR=.15,ACTIVITY_HIGHLIGHT_HUE=312,VESSELS_HEATMAP_DIMMING_ALPHA=.5,TRACKS_DOTS_STYLE_ZOOM_THRESHOLD=2,MAX_SPRITES_PER_LAYER=2e5,VESSEL_CLICK_TOLERANCE_PX=10,CLUSTER_CLICK_ZOOM_INCREMENT=1,MIN_ZOOM_LEVEL=1,MAX_ZOOM_LEVEL=14,ACTIVITY_LAYERS_MAX_ZOOM_LEVEL_TILE_LOADING=10,TILES_LOAD_ZOOM_OFFSET=.5,STATIC_LAYERS_CARTO_ENDPOINT="https://carto.globalfishingwatch.org/user/admin/api/v1/map?config=$MAPCONFIG",STATIC_LAYERS_CARTO_TILES_ENDPOINT="https://carto.globalfishingwatch.org/user/admin/api/v1/map/$LAYERGROUPID/{z}/{x}/{y}.mvt",TRACKS_LAYER_IN_FRONT_OF_GROUP="static",TILES_URL_NEEDING_AUTHENTICATION="dot-world-fishing",INIT_MODULE="INIT_MODULE",SET_TEMPORAL_EXTENT="SET_TEMPORAL_EXTENT",SET_HIGHLIGHT_TEMPORAL_EXTENT="SET_HIGHLIGHT_TEMPORAL_EXTENT",START_LOADER="START_LOADER",COMPLETE_LOADER="COMPLETE_LOADER",initModule=function(e){return function(t){t({type:INIT_MODULE,payload:e})}},startLoader=function(e,t,r){var n=(new Date).getTime(),a=void 0!==r?"".concat(r,"_").concat(n):n;return e({type:START_LOADER,payload:a}),void 0!==t.map.module.onLoadStart&&t.map.module.onLoadStart(),r},completeLoader=function(e){return function(t,r){t({type:COMPLETE_LOADER,payload:e});var n=r();n.map.module.loaders.length||void 0===n.map.module.onLoadComplete||n.map.module.onLoadComplete()}},onViewportChange=function(){return function(e,t){var r=t(),n=r.map.module.onViewportChange;if(void 0!==n){var a=r.map.viewport;void 0!==a.bounds&&n({zoom:a.viewport.zoom,center:[a.viewport.latitude,a.viewport.longitude],bounds:a.bounds,canZoomIn:a.canZoomIn,canZoomOut:a.canZoomOut,mouseLatLong:a.mouseLatLong})}}},setTemporalExtent=function(e){return{type:SET_TEMPORAL_EXTENT,payload:e}},setHighlightTemporalExtent=function(e){return{type:SET_HIGHLIGHT_TEMPORAL_EXTENT,payload:e}},closePopup=function(){return function(e,t){var r=t();void 0!==r.map.module.onClosePopup&&r.map.module.onClosePopup()}},GL_TRANSPARENT="rgba(0,0,0,0)",TRANSITION_TYPE={ZOOM:"ZOOM"},ENCOUNTERS="Encounters",BRUSH_RENDERING_STYLE={NORMAL:0,BULLSEYE:2},BRUSH_ZOOM_RENDERING_STYLE={RADIAL_GRADIENT:0,CIRCLE:1},POLYGON_LAYERS_AREA="POLYGON_LAYERS_AREA",CUSTOM_LAYERS_SUBTYPES={geojson:"geojson",raster:"raster"},asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.b)(e))return!1;var t=Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.c)(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=(uid=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:""),uid;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.b)(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$1.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$2.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,Map=_getNative(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d,"Map"),_Map=Map;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd;function setCacheHas(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas;function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _MapCache;++t<r;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache;function baseFindIndex(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var _baseFindIndex=baseFindIndex;function baseIsNaN(e){return e!=e}var _baseIsNaN=baseIsNaN;function strictIndexOf(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf;function baseIndexOf(e,t,r){return t==t?_strictIndexOf(e,t,r):_baseFindIndex(e,_baseIsNaN,r)}var _baseIndexOf=baseIndexOf;function arrayIncludes(e,t){return!(null==e||!e.length)&&_baseIndexOf(e,t,0)>-1}var _arrayIncludes=arrayIncludes;function arrayIncludesWith(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith;function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var _arrayMap=arrayMap;function baseUnary(e){return function(t){return e(t)}}var _baseUnary=baseUnary;function cacheHas(e,t){return e.has(t)}var _cacheHas=cacheHas,LARGE_ARRAY_SIZE=200;function baseDifference(e,t,r,n){var a=-1,i=_arrayIncludes,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;r&&(t=_arrayMap(t,_baseUnary(r))),n?(i=_arrayIncludesWith,o=!1):t.length>=LARGE_ARRAY_SIZE&&(i=_cacheHas,o=!1,t=new _SetCache(t));e:for(;++a<s;){var l=e[a],p=null==r?l:r(l);if(l=n||0!==l?l:0,o&&p==p){for(var f=c;f--;)if(t[f]===p)continue e;u.push(l)}else i(t,p,n)||u.push(l)}return u}var _baseDifference=baseDifference;function arrayPush(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var _arrayPush=arrayPush,argsTag="[object Arguments]";function baseIsArguments(e){return Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(e)&&Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.c)(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(e)&&hasOwnProperty$3.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,isArray=Array.isArray,isArray_1=isArray,spreadableSymbol=_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.f?_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.f.isConcatSpreadable:void 0;function isFlattenable(e){return isArray_1(e)||isArguments_1(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}var _isFlattenable=isFlattenable;function baseFlatten(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=_isFlattenable),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?baseFlatten(s,t-1,r,n,a):_arrayPush(a,s):n||(a[a.length]=s)}return a}var _baseFlatten=baseFlatten;function identity(e){return e}var identity_1=identity;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply,nativeMax=Math.max;function overRest(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=nativeMax(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),_apply(e,this,s)}}var _overRest=overRest;function constant(e){return function(){return e}}var constant_1=constant,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty,baseSetToString=_defineProperty?function(e,t){return _defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,r=0;return function(){var n=nativeNow(),a=HOT_SPAN-(n-r);if(r=n,a>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}var _baseRest=baseRest,MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}var isLength_1=isLength;function isArrayLike(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike;function isArrayLikeObject(e){return Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(e)&&isArrayLike_1(e)}var isArrayLikeObject_1=isArrayLikeObject,difference=_baseRest(function(e,t){return isArrayLikeObject_1(e)?_baseDifference(e,_baseFlatten(t,1,isArrayLikeObject_1,!0)):[]}),difference_1=difference,Set=_getNative(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d,"Set"),_Set=Set;function noop(){}var noop_1=noop;function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var _setToArray=setToArray,INFINITY=1/0,createSet=_Set&&1/_setToArray(new _Set([,-0]))[1]==INFINITY?function(e){return new _Set(e)}:noop_1,_createSet=createSet,LARGE_ARRAY_SIZE$1=200;function baseUniq(e,t,r){var n=-1,a=_arrayIncludes,i=e.length,o=!0,s=[],u=s;if(r)o=!1,a=_arrayIncludesWith;else if(i>=LARGE_ARRAY_SIZE$1){var c=t?null:_createSet(e);if(c)return _setToArray(c);o=!1,a=_cacheHas,u=new _SetCache}else u=t?[]:s;e:for(;++n<i;){var l=e[n],p=t?t(l):l;if(l=r||0!==l?l:0,o&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue e;t&&u.push(p),s.push(l)}else a(u,p,r)||(u!==s&&u.push(p),s.push(l))}return s}var _baseUniq=baseUniq;function uniq(e){return e&&e.length?_baseUniq(e):[]}var uniq_1=uniq;function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,LARGE_ARRAY_SIZE$2=200;function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var n=r.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE$2-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(n)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack;function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _arraySome=arraySome,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,t,r,n,a,i){var o=r&COMPARE_PARTIAL_FLAG,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,p=!0,f=r&COMPARE_UNORDERED_FLAG?new _SetCache:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var h=e[l],d=t[l];if(n)var _=o?n(d,h,l,t,e,i):n(h,d,l,e,t,i);if(void 0!==_){if(_)continue;p=!1;break}if(f){if(!_arraySome(t,function(e,t){if(!_cacheHas(f,t)&&(h===e||a(h,e,r,n,i)))return f.push(t)})){p=!1;break}}else if(h!==d&&!a(h,d,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p}var _equalArrays=equalArrays,Uint8Array$1=_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d.Uint8Array,_Uint8Array=Uint8Array$1;function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}var _mapToArray=mapToArray,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.f?_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.f.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,t,r,n,a,i,o){switch(r){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag:return!(e.byteLength!=t.byteLength||!i(new _Uint8Array(e),new _Uint8Array(t)));case boolTag:case dateTag:case numberTag:return eq_1(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag:case stringTag:return e==t+"";case mapTag:var s=_mapToArray;case setTag:var u=n&COMPARE_PARTIAL_FLAG$1;if(s||(s=_setToArray),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;n|=COMPARE_UNORDERED_FLAG$1,o.set(e,t);var l=_equalArrays(s(e),s(t),n,a,i,o);return o.delete(e),l;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}var _equalByTag=equalByTag;function baseGetAllKeys(e,t,r){var n=t(e);return isArray_1(e)?n:_arrayPush(n,r(e))}var _baseGetAllKeys=baseGetAllKeys;function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var _arrayFilter=arrayFilter;function stubArray(){return[]}var stubArray_1=stubArray,objectProto$4=Object.prototype,propertyIsEnumerable$1=objectProto$4.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),_arrayFilter(nativeGetSymbols(e),function(t){return propertyIsEnumerable$1.call(e,t)}))}:stubArray_1,_getSymbols=getSymbols;function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var _baseTimes=baseTimes;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.a)(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r?_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d.Buffer:void 0,i=(a?a.isBuffer:void 0)||stubFalse_1;e.exports=i}),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(e)&&isLength_1(e.length)&&!!typedArrayTags[Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.c)(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$1]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray,_nodeUtil=Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.a)(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r&&_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.g.process,i=function(){try{return n&&n.require&&n.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),a=!r&&!n&&isBuffer_1(e),i=!r&&!n&&!a&&isTypedArray_1(e),o=r||n||a||i,s=o?_baseTimes(e.length,String):[],u=s.length;for(var c in e)!t&&!hasOwnProperty$4.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_isIndex(c,u))||s.push(c);return s}var _arrayLikeKeys=arrayLikeKeys,objectProto$6=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$6)}var _isPrototype=isPrototype;function overArg(e,t){return function(r){return e(t(r))}}var _overArg=overArg,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$5.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function keys(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}var keys_1=keys;function getAllKeys(e){return _baseGetAllKeys(e,keys_1,_getSymbols)}var _getAllKeys=getAllKeys,COMPARE_PARTIAL_FLAG$2=1,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function equalObjects(e,t,r,n,a,i){var o=r&COMPARE_PARTIAL_FLAG$2,s=_getAllKeys(e),u=s.length;if(u!=_getAllKeys(t).length&&!o)return!1;for(var c=u;c--;){var l=s[c];if(!(o?l in t:hasOwnProperty$6.call(t,l)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var f=!0;i.set(e,t),i.set(t,e);for(var h=o;++c<u;){var d=e[l=s[c]],_=t[l];if(n)var m=o?n(_,d,l,t,e,i):n(d,_,l,e,t,i);if(!(void 0===m?d===_||a(d,_,r,n,i):m)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var y=e.constructor,g=t.constructor;y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(f=!1)}return i.delete(e),i.delete(t),f}var _equalObjects=equalObjects,DataView$1=_getNative(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d,"DataView"),_DataView=DataView$1,Promise$1=_getNative(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d,"Promise"),_Promise=Promise$1,WeakMap=_getNative(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.d,"WeakMap"),_WeakMap=WeakMap,mapTag$2="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$2="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.c;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$2||_Map&&getTag(new _Map)!=mapTag$2||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$2||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),r=t==objectTag$1?e.constructor:void 0,n=r?_toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,COMPARE_PARTIAL_FLAG$3=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]",objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function baseIsEqualDeep(e,t,r,n,a,i){var o=isArray_1(e),s=isArray_1(t),u=o?arrayTag$1:_getTag(e),c=s?arrayTag$1:_getTag(t),l=(u=u==argsTag$2?objectTag$2:u)==objectTag$2,p=(c=c==argsTag$2?objectTag$2:c)==objectTag$2,f=u==c;if(f&&isBuffer_1(e)){if(!isBuffer_1(t))return!1;o=!0,l=!1}if(f&&!l)return i||(i=new _Stack),o||isTypedArray_1(e)?_equalArrays(e,t,r,n,a,i):_equalByTag(e,t,u,r,n,a,i);if(!(r&COMPARE_PARTIAL_FLAG$3)){var h=l&&hasOwnProperty$7.call(e,"__wrapped__"),d=p&&hasOwnProperty$7.call(t,"__wrapped__");if(h||d){var _=h?e.value():e,m=d?t.value():t;return i||(i=new _Stack),a(_,m,r,n,i)}}return!!f&&(i||(i=new _Stack),_equalObjects(e,t,r,n,a,i))}var _baseIsEqualDeep=baseIsEqualDeep;function baseIsEqual(e,t,r,n,a){return e===t||(null==e||null==t||!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(e)&&!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(t)?e!=e&&t!=t:_baseIsEqualDeep(e,t,r,n,baseIsEqual,a))}var _baseIsEqual=baseIsEqual,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,t,r,n){var a=r.length,i=a,o=!n;if(null==e)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){var u=(s=r[a])[0],c=e[u],l=s[1];if(o&&s[2]){if(void 0===c&&!(u in e))return!1}else{var p=new _Stack;if(n)var f=n(c,l,u,e,t,p);if(!(void 0===f?_baseIsEqual(l,c,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,n,p):f))return!1}}return!0}var _baseIsMatch=baseIsMatch;function isStrictComparable(e){return e==e&&!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.b)(e)}var _isStrictComparable=isStrictComparable;function getMatchData(e){for(var t=keys_1(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,_isStrictComparable(a)]}return t}var _getMatchData=getMatchData;function matchesStrictComparable(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}var _matchesStrictComparable=matchesStrictComparable;function baseMatches(e){var t=_getMatchData(e);return 1==t.length&&t[0][2]?_matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||_baseIsMatch(r,e,t)}}var _baseMatches=baseMatches,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.h)(e))||reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t)}var _isKey=isKey,FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function r(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(memoize.Cache||_MapCache),r}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,function(e,r,n,a){t.push(n?a.replace(reEscapeChar,"$1"):r||e)}),t}),_stringToPath=stringToPath,INFINITY$1=1/0,symbolProto$1=_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.f?_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.f.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.h)(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString;function toString(e){return null==e?"":_baseToString(e)}var toString_1=toString;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$2=1/0;function toKey(e){if("string"==typeof e||Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.h)(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$2?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get;function baseHasIn(e,t){return null!=e&&t in Object(e)}var _baseHasIn=baseHasIn;function hasPath(e,t,r){for(var n=-1,a=(t=_castPath(t,e)).length,i=!1;++n<a;){var o=_toKey(t[n]);if(!(i=null!=e&&r(e,o)))break;e=e[o]}return i||++n!=a?i:!!(a=null==e?0:e.length)&&isLength_1(a)&&_isIndex(o,a)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function hasIn(e,t){return null!=e&&_hasPath(e,t,_baseHasIn)}var hasIn_1=hasIn,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(e,t){return _isKey(e)&&_isStrictComparable(t)?_matchesStrictComparable(_toKey(e),t):function(r){var n=get_1(r,e);return void 0===n&&n===t?hasIn_1(r,e):_baseIsEqual(t,n,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}var _baseMatchesProperty=baseMatchesProperty;function baseProperty(e){return function(t){return null==t?void 0:t[e]}}var _baseProperty=baseProperty;function basePropertyDeep(e){return function(t){return _baseGet(t,e)}}var _basePropertyDeep=basePropertyDeep;function property(e){return _isKey(e)?_baseProperty(_toKey(e)):_basePropertyDeep(e)}var property_1=property;function baseIteratee(e){return"function"==typeof e?e:null==e?identity_1:"object"==typeof e?isArray_1(e)?_baseMatchesProperty(e[0],e[1]):_baseMatches(e):property_1(e)}var _baseIteratee=baseIteratee;function uniqBy(e,t){return e&&e.length?_baseUniq(e,_baseIteratee(t,2)):[]}var uniqBy_1=uniqBy;function baseIndexOfWith(e,t,r,n){for(var a=r-1,i=e.length;++a<i;)if(n(e[a],t))return a;return-1}var _baseIndexOfWith=baseIndexOfWith;function copyArray(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _copyArray=copyArray,arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function basePullAll(e,t,r,n){var a=n?_baseIndexOfWith:_baseIndexOf,i=-1,o=t.length,s=e;for(e===t&&(t=_copyArray(t)),r&&(s=_arrayMap(e,_baseUnary(r)));++i<o;)for(var u=0,c=t[i],l=r?r(c):c;(u=a(s,l,u,n))>-1;)s!==e&&splice$1.call(s,u,1),splice$1.call(e,u,1);return e}var _basePullAll=basePullAll;function pullAll(e,t){return e&&e.length&&t&&t.length?_basePullAll(e,t):e}var pullAll_1=pullAll,pull=_baseRest(pullAll_1),pull_1=pull;function baseSum(e,t){for(var r,n=-1,a=e.length;++n<a;){var i=t(e[n]);void 0!==i&&(r=void 0===r?i:r+i)}return r}var _baseSum=baseSum;function sumBy(e,t){return e&&e.length?_baseSum(e,_baseIteratee(t,2)):0}var sumBy_1=sumBy;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,degree=Math.PI/180;function create(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function scale(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function transformMat4(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o,e[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o,e[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o,e[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o,e}var forEach=(vec=create(),function(e,t,r,n,a,i){var o,s;for(t||(t=4),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,o=r;o<s;o+=t)vec[0]=e[o],vec[1]=e[o+1],vec[2]=e[o+2],vec[3]=e[o+3],a(vec,vec,i),e[o]=vec[0],e[o+1]=vec[1],e[o+2]=vec[2],e[o+3]=vec[3];return e}),vec;function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function transformVector(e,t){var r=transformMat4([],t,e);return scale(r,r,1/r[3]),r}function invert(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],p=t[9],f=t[10],h=t[11],d=t[12],_=t[13],m=t[14],y=t[15],g=r*s-n*o,b=r*u-a*o,v=r*c-i*o,S=n*u-a*s,O=n*c-i*s,I=a*c-i*u,E=l*_-p*d,T=l*m-f*d,w=l*y-h*d,A=p*m-f*_,M=p*y-h*_,P=f*y-h*m,L=g*P-b*M+v*A+S*w-O*T+I*E;return L?(L=1/L,e[0]=(s*P-u*M+c*A)*L,e[1]=(a*M-n*P-i*A)*L,e[2]=(_*I-m*O+y*S)*L,e[3]=(f*O-p*I-h*S)*L,e[4]=(u*w-o*P-c*T)*L,e[5]=(r*P-a*w+i*T)*L,e[6]=(m*v-d*I-y*b)*L,e[7]=(l*I-f*v+h*b)*L,e[8]=(o*M-s*w+c*E)*L,e[9]=(n*w-r*M-i*E)*L,e[10]=(d*O-_*v+y*g)*L,e[11]=(p*v-l*O-h*g)*L,e[12]=(s*T-o*A-u*E)*L,e[13]=(r*A-n*T+a*E)*L,e[14]=(_*b-d*S-m*g)*L,e[15]=(l*S-p*b+f*g)*L,e):null}function multiply(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],p=t[8],f=t[9],h=t[10],d=t[11],_=t[12],m=t[13],y=t[14],g=t[15],b=r[0],v=r[1],S=r[2],O=r[3];return e[0]=b*n+v*s+S*p+O*_,e[1]=b*a+v*u+S*f+O*m,e[2]=b*i+v*c+S*h+O*y,e[3]=b*o+v*l+S*d+O*g,b=r[4],v=r[5],S=r[6],O=r[7],e[4]=b*n+v*s+S*p+O*_,e[5]=b*a+v*u+S*f+O*m,e[6]=b*i+v*c+S*h+O*y,e[7]=b*o+v*l+S*d+O*g,b=r[8],v=r[9],S=r[10],O=r[11],e[8]=b*n+v*s+S*p+O*_,e[9]=b*a+v*u+S*f+O*m,e[10]=b*i+v*c+S*h+O*y,e[11]=b*o+v*l+S*d+O*g,b=r[12],v=r[13],S=r[14],O=r[15],e[12]=b*n+v*s+S*p+O*_,e[13]=b*a+v*u+S*f+O*m,e[14]=b*i+v*c+S*h+O*y,e[15]=b*o+v*l+S*d+O*g,e}function translate(e,t,r){var n,a,i,o,s,u,c,l,p,f,h,d,_=r[0],m=r[1],y=r[2];return t===e?(e[12]=t[0]*_+t[4]*m+t[8]*y+t[12],e[13]=t[1]*_+t[5]*m+t[9]*y+t[13],e[14]=t[2]*_+t[6]*m+t[10]*y+t[14],e[15]=t[3]*_+t[7]*m+t[11]*y+t[15]):(n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],p=t[8],f=t[9],h=t[10],d=t[11],e[0]=n,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=p,e[9]=f,e[10]=h,e[11]=d,e[12]=n*_+s*m+p*y+t[12],e[13]=a*_+u*m+f*y+t[13],e[14]=i*_+c*m+h*y+t[14],e[15]=o*_+l*m+d*y+t[15]),e}function scale$1(e,t,r){var n=r[0],a=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rotateX(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],p=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+c*n,e[5]=o*a+l*n,e[6]=s*a+p*n,e[7]=u*a+f*n,e[8]=c*a-i*n,e[9]=l*a-o*n,e[10]=p*a-s*n,e[11]=f*a-u*n,e}function rotateZ(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],p=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+c*n,e[1]=o*a+l*n,e[2]=s*a+p*n,e[3]=u*a+f*n,e[4]=c*a-i*n,e[5]=l*a-o*n,e[6]=p*a-s*n,e[7]=f*a-u*n,e}function perspective(e,t,r,n,a){var i,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(i=1/(n-a),e[10]=(a+n)*i,e[14]=2*a*n*i):(e[10]=-1,e[14]=-2*n),e}function equals(e,t){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],p=e[9],f=e[10],h=e[11],d=e[12],_=e[13],m=e[14],y=e[15],g=t[0],b=t[1],v=t[2],S=t[3],O=t[4],I=t[5],E=t[6],T=t[7],w=t[8],A=t[9],M=t[10],P=t[11],L=t[12],x=t[13],C=t[14],j=t[15];return Math.abs(r-g)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-b)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-v)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-S)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(o-O)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(s-I)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(u-E)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-T)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(p-A)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(f-M)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(h-P)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(d-L)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(_-x)<=EPSILON*Math.max(1,Math.abs(_),Math.abs(x))&&Math.abs(m-C)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(y-j)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(j))}function create$1(){var e=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function add(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e}function lerp(e,t,r,n){var a=t[0],i=t[1];return e[0]=a+n*(r[0]-a),e[1]=i+n*(r[1]-i),e}var forEach$1=function(){var e=create$1();return function(t,r,n,a,i,o){var s,u;for(r||(r=2),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],i(e,e,o),t[s]=e[0],t[s+1]=e[1];return t}}();function create$2(){var e=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function negate$1(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}var forEach$2=function(){var e=create$2();return function(t,r,n,a,i,o){var s,u;for(r||(r=3),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],i(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}();function assert(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS=PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4,DEFAULT_ALTITUDE=1.5;function zoomToScale(e){return Math.pow(2,e)}function lngLatToWorld(e,t){var r=_slicedToArray(e,2),n=r[0],a=r[1];assert(Number.isFinite(n)&&Number.isFinite(t)),assert(Number.isFinite(a)&&a>=-90&&a<=90,"invalid latitude");var i=a*DEGREES_TO_RADIANS;return[(t*=TILE_SIZE)*(n*DEGREES_TO_RADIANS+PI)/(2*PI),t*(PI-Math.log(Math.tan(PI_4+.5*i)))/(2*PI)]}function worldToLngLat(e,t){var r=_slicedToArray(e,2),n=r[0],a=r[1],i=n/(t*=TILE_SIZE)*(2*PI)-PI,o=2*(Math.atan(Math.exp(PI-a/t*(2*PI)))-PI_4);return[i*RADIANS_TO_DEGREES,o*RADIANS_TO_DEGREES]}function getDistanceScales(e){var t=e.latitude,r=e.longitude,n=e.zoom,a=e.scale,i=e.highPrecision,o=void 0!==i&&i;a=void 0!==a?a:zoomToScale(n),assert(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(a));var s={},u=TILE_SIZE*a,c=Math.cos(t*DEGREES_TO_RADIANS),l=u/360,p=l/c,f=u/EARTH_CIRCUMFERENCE/c;if(s.pixelsPerMeter=[f,-f,f],s.metersPerPixel=[1/f,-1/f,1/f],s.pixelsPerDegree=[l,-p,f],s.degreesPerPixel=[1/l,-1/p,1/f],o){var h=DEGREES_TO_RADIANS*Math.tan(t*DEGREES_TO_RADIANS)/c,d=l*h/2,_=u/EARTH_CIRCUMFERENCE*h,m=_/p*f;s.pixelsPerDegree2=[0,-d,_],s.pixelsPerMeter2=[m,0,m]}return s}function getViewMatrix(e){var t=e.height,r=e.pitch,n=e.bearing,a=e.altitude,i=e.center,o=void 0===i?null:i,s=e.flipY,u=void 0!==s&&s,c=createMat4();return translate(c,c,[0,0,-a]),scale$1(c,c,[1,1,1/t]),rotateX(c,c,-r*DEGREES_TO_RADIANS),rotateZ(c,c,n*DEGREES_TO_RADIANS),u&&scale$1(c,c,[1,-1,1]),o&&translate(c,c,negate$1([],o)),c}function getProjectionParameters(e){var t=e.width,r=e.height,n=e.altitude,a=void 0===n?DEFAULT_ALTITUDE:n,i=e.pitch,o=void 0===i?0:i,s=e.nearZMultiplier,u=void 0===s?1:s,c=e.farZMultiplier,l=void 0===c?1:c,p=o*DEGREES_TO_RADIANS,f=Math.atan(.5/a),h=Math.sin(f)*a/Math.sin(Math.PI/2-p-f),d=Math.cos(Math.PI/2-p)*h+a;return{fov:2*Math.atan(r/2/a),aspect:t/r,focalDistance:a,near:u,far:d*l}}function getProjectionMatrix(e){var t=e.width,r=e.height,n=e.pitch,a=getProjectionParameters({width:t,height:r,altitude:e.altitude,pitch:n,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier});return perspective([],a.fov,a.aspect,a.near,a.far)}function worldToPixels(e,t){var r=_slicedToArray(e,3),n=r[0],a=r[1],i=r[2],o=void 0===i?0:i;return assert(Number.isFinite(n)&&Number.isFinite(a)&&Number.isFinite(o)),transformVector(t,[n,a,o,1])}function pixelsToWorld(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=_slicedToArray(e,3),a=n[0],i=n[1],o=n[2];if(assert(Number.isFinite(a)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return transformVector(t,[a,i,o,1]);var s=transformVector(t,[a,i,0,1]),u=transformVector(t,[a,i,1,1]),c=s[2],l=u[2];return lerp([],s,u,c===l?0:((r||0)-c)/(l-c))}var IDENTITY=createMat4(),Viewport=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width,n=t.height,a=t.viewMatrix,i=void 0===a?IDENTITY:a,o=t.projectionMatrix,s=void 0===o?IDENTITY:o;_classCallCheck(this,e),this.width=r||1,this.height=n||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=i,this.projectionMatrix=s;var u=createMat4();multiply(u,u,this.projectionMatrix),multiply(u,u,this.viewMatrix),this.viewProjectionMatrix=u;var c=createMat4();scale$1(c,c,[this.width/2,-this.height/2,1]),translate(c,c,[1,-1,0]),multiply(c,c,this.viewProjectionMatrix);var l=invert(createMat4(),c);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=l,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return _createClass(e,[{key:"equals",value:function(t){return t instanceof e&&t.width===this.width&&t.height===this.height&&equals(t.projectionMatrix,this.projectionMatrix)&&equals(t.viewMatrix,this.viewMatrix)}},{key:"project",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===t||t,n=worldToPixels(this.projectPosition(e),this.pixelProjectionMatrix),a=_slicedToArray(n,2),i=a[0],o=a[1],s=r?o:this.height-o;return 2===e.length?[i,s]:[i,s,n[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,a=t.targetZ,i=_slicedToArray(e,3),o=i[0],s=i[1],u=i[2],c=n?s:this.height-s,l=a&&a*this.pixelsPerMeter,p=pixelsToWorld([o,c,u],this.pixelUnprojectionMatrix,l),f=_slicedToArray(this.unprojectPosition(p),3),h=f[0],d=f[1],_=f[2];return Number.isFinite(u)?[h,d,_]:Number.isFinite(a)?[h,d,a]:[h,d]}},{key:"projectPosition",value:function(e){var t=_slicedToArray(this.projectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(e){var t=_slicedToArray(this.unprojectFlat(e),2);return[t[0],t[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale,e}},{key:"unprojectFlat",value:function(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale,e}}]),e}();function fitBounds(e){var t=e.width,r=e.height,n=e.bounds,a=e.padding,i=void 0===a?0:a,o=e.offset,s=void 0===o?[0,0]:o,u=_slicedToArray(n,2),c=_slicedToArray(u[0],2),l=c[0],p=c[1],f=_slicedToArray(u[1],2),h=f[0],d=f[1];Number.isFinite(i)?i={top:i,bottom:i,left:i,right:i}:assert(Number.isFinite(i.top)&&Number.isFinite(i.bottom)&&Number.isFinite(i.left)&&Number.isFinite(i.right));var _=new WebMercatorViewport({width:t,height:r,longitude:0,latitude:0,zoom:0}),m=_.project([l,d]),y=_.project([h,p]),g=[Math.abs(y[0]-m[0]),Math.abs(y[1]-m[1])],b=[t-i.left-i.right-2*Math.abs(s[0]),r-i.top-i.bottom-2*Math.abs(s[1])];assert(b[0]>0&&b[1]>0);var v=b[0]/g[0],S=b[1]/g[1],O=(i.right-i.left)/2/v,I=(i.bottom-i.top)/2/S,E=[(y[0]+m[0])/2+O,(y[1]+m[1])/2+I],T=_.unproject(E),w=_.zoom+Math.log2(Math.abs(Math.min(v,S)));return{longitude:T[0],latitude:T[1],zoom:w}}var WebMercatorViewport=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width,a=r.height,i=r.latitude,o=void 0===i?0:i,s=r.longitude,u=void 0===s?0:s,c=r.zoom,l=void 0===c?0:c,p=r.pitch,f=void 0===p?0:p,h=r.bearing,d=void 0===h?0:h,_=r.altitude,m=void 0===_?1.5:_,y=r.nearZMultiplier,g=r.farZMultiplier;_classCallCheck(this,t),n=n||1,a=a||1;var b=zoomToScale(l);m=Math.max(.75,m);var v=lngLatToWorld([u,o],b);v[2]=0;var S=getProjectionMatrix({width:n,height:a,pitch:f,bearing:d,altitude:m,nearZMultiplier:y||1/a,farZMultiplier:g||1.01}),O=getViewMatrix({height:a,center:v,pitch:f,bearing:d,altitude:m,flipY:!0});return(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,{width:n,height:a,viewMatrix:O,projectionMatrix:S}))).latitude=o,e.longitude=u,e.zoom=l,e.pitch=f,e.bearing=d,e.altitude=m,e.scale=b,e.center=v,e.pixelsPerMeter=getDistanceScales(_assertThisInitialized(_assertThisInitialized(e))).pixelsPerMeter[2],Object.freeze(_assertThisInitialized(_assertThisInitialized(e))),e}return _inherits(t,Viewport),_createClass(t,[{key:"projectFlat",value:function(e){return lngLatToWorld(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"unprojectFlat",value:function(e){return worldToLngLat(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=pixelsToWorld(e.pos,this.pixelUnprojectionMatrix),n=add([],lngLatToWorld(t,this.scale),negate([],r));return worldToLngLat(add([],this.center,n),this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,a=this.height,i=fitBounds(Object.assign({width:n,height:a,bounds:e},r));return new t({width:n,height:a,longitude:i.longitude,latitude:i.latitude,zoom:i.zoom})}}]),t}(),VESSELS_MINIMUM_RADIUS_FACTOR=.25,VESSELS_MINIMUM_OPACITY=.5,VESSELS_HEATMAP_STYLE_ZOOM_THRESHOLD=6,PLAYBACK_PRECISION=864e5,TIMELINE_OVERALL_START_DATE=new Date(Date.UTC(2012,0,1)),TIMELINE_OVERALL_START_DATE_OFFSET=Math.floor(TIMELINE_OVERALL_START_DATE/PLAYBACK_PRECISION),getTimeAtPrecision=function(e){return Math.floor(e/PLAYBACK_PRECISION)},mapConvert={latLonToWorldCoordinates:function(e,t){return{worldX:(t+180)/360*256,worldY:(1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*256}},sigmaToRadius:function(e,t,r){var n=t*Math.max(.8,2+Math.log(e*r));return Math.max(VESSELS_MINIMUM_RADIUS_FACTOR,n)},weightToOpacity:function(e,t){var r=3+Math.log(e*t);return r=Math.max(0,r),r=.1+.2*(r=3+Math.log(r)),Math.min(1,Math.max(VESSELS_MINIMUM_OPACITY,r))},getZoomFactorOpacity:function(e){return Math.pow(e-1,3.5)/1e3},getZoomFactorRadiusRenderingMode:function(e){return e<VESSELS_HEATMAP_STYLE_ZOOM_THRESHOLD?.3:.15},getZoomFactorRadius:function(e){return Math.pow(e-1,2.5)},getOffsetedTimeAtPrecision:function(e){return Math.max(0,getTimeAtPrecision(e)-TIMELINE_OVERALL_START_DATE_OFFSET)},getTimestampFromOffsetedtTimeAtPrecision:function(e){return(TIMELINE_OVERALL_START_DATE_OFFSET+e)*PLAYBACK_PRECISION}};function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty?_defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue,objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$8.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignValue=assignValue;function copyObject(e,t,r,n){var a=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),a?_baseAssignValue(r,s,u):_assignValue(r,s,u)}return r}var _copyObject=copyObject;function isIterateeCall(e,t,r){if(!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.b)(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike_1(r)&&_isIndex(t,r.length):"string"==n&&t in r)&&eq_1(r[t],e)}var _isIterateeCall=isIterateeCall;function createAssigner(e){return _baseRest(function(t,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,o&&_isIterateeCall(r[0],r[1],o)&&(i=a<3?void 0:i,a=1),t=Object(t);++n<a;){var s=r[n];s&&e(t,s,n,i)}return t})}var _createAssigner=createAssigner;function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var _nativeKeysIn=nativeKeysIn,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function baseKeysIn(e){if(!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.b)(e))return _nativeKeysIn(e);var t=_isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$9.call(e,n))&&r.push(n);return r}var _baseKeysIn=baseKeysIn;function keysIn(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}var keysIn_1=keysIn,assignInWith=_createAssigner(function(e,t,r,n){_copyObject(t,keysIn_1(t),e,n)}),assignInWith_1=assignInWith,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$c=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(e)||Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.c)(e)!=objectTag$3)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$a.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var isPlainObject_1=isPlainObject,domExcTag="[object DOMException]",errorTag$2="[object Error]";function isError(e){if(!Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.e)(e))return!1;var t=Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.c)(e);return t==errorTag$2||t==domExcTag||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject_1(e)}var isError_1=isError,attempt=_baseRest(function(e,t){try{return _apply(e,void 0,t)}catch(e){return isError_1(e)?e:new Error(e)}}),attempt_1=attempt;function baseValues(e,t){return _arrayMap(t,function(t){return e[t]})}var _baseValues=baseValues,objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function customDefaultsAssignIn(e,t,r,n){return void 0===e||eq_1(e,objectProto$d[r])&&!hasOwnProperty$b.call(n,r)?t:e}var _customDefaultsAssignIn=customDefaultsAssignIn,stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function escapeStringChar(e){return"\\"+stringEscapes[e]}var _escapeStringChar=escapeStringChar,reInterpolate=/<%=([\s\S]+?)%>/g,_reInterpolate=reInterpolate;function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}var _basePropertyOf=basePropertyOf,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar=_basePropertyOf(htmlEscapes),_escapeHtmlChar=escapeHtmlChar,reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape(e){return(e=toString_1(e))&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,_escapeHtmlChar):e}var _escape=escape,reEscape=/<%-([\s\S]+?)%>/g,_reEscape=reEscape,reEvaluate=/<%([\s\S]+?)%>/g,_reEvaluate=reEvaluate,templateSettings={escape:_reEscape,evaluate:_reEvaluate,interpolate:_reInterpolate,variable:"",imports:{_:{escape:_escape}}},templateSettings_1=templateSettings,reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g;function template(e,t,r){var n=templateSettings_1.imports._.templateSettings||templateSettings_1;r&&_isIterateeCall(e,t,r)&&(t=void 0),e=toString_1(e),t=assignInWith_1({},t,n,_customDefaultsAssignIn);var a,i,o=assignInWith_1({},t.imports,n.imports,_customDefaultsAssignIn),s=keys_1(o),u=_baseValues(o,s),c=0,l=t.interpolate||reNoMatch,p="__p += '",f=RegExp((t.escape||reNoMatch).source+"|"+l.source+"|"+(l===_reInterpolate?reEsTemplate:reNoMatch).source+"|"+(t.evaluate||reNoMatch).source+"|$","g"),h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(f,function(t,r,n,o,s,u){return n||(n=o),p+=e.slice(c,u).replace(reUnescapedString,_escapeStringChar),r&&(a=!0,p+="' +\n__e("+r+") +\n'"),s&&(i=!0,p+="';\n"+s+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),p+="';\n";var d=t.variable;d||(p="with (obj) {\n"+p+"\n}\n"),p=(i?p.replace(reEmptyStringLeading,""):p).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),p="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var _=attempt_1(function(){return Function(s,h+"return "+p).apply(void 0,u)});if(_.source=p,isError_1(_))throw _;return _}var template_1=template,buildEndpoint=function(e,t){return templateSettings_1.interpolate=/{{([\s\S]+?)}}/g,template_1(e)(t)},byname={Uint8:{size:Uint8Array.BYTES_PER_ELEMENT,array:"Float32Array",getter:"getUint8",setter:"setUint8"},Int8:{size:Int8Array.BYTES_PER_ELEMENT,array:"Float32Array",getter:"getUint8",setter:"setUint8"},Uint16:{size:Uint16Array.BYTES_PER_ELEMENT,array:"Float32Array",getter:"getUint16",setter:"setUint16"},Int16:{size:Int16Array.BYTES_PER_ELEMENT,array:"Float32Array",getter:"getInt16",setter:"setInt16"},Uint32:{size:Uint32Array.BYTES_PER_ELEMENT,array:"Float32Array",getter:"getUint32",setter:"setUint32"},Int32:{size:Int32Array.BYTES_PER_ELEMENT,array:"Float32Array",getter:"getInt32",setter:"setInt32"},Float32:{size:Float32Array.BYTES_PER_ELEMENT,array:"Float32Array",getter:"getFloat32",setter:"setFloat32"},Float64:{size:Float64Array.BYTES_PER_ELEMENT,array:"Float64Array",getter:"getFloat64",setter:"setFloat64"}},writeStringToArrayBuffer=function(e,t,r,n,a){null==r&&(r=e.length),null==t&&(t=0),null==a&&(a=t);for(var i=t;i<r;i++)n[i-t+a]=255&e.charCodeAt(i)},stringToArrayBuffer=function(e,t,r){null==r&&(r=e.length),null==t&&(t=0);var n=new Uint8ClampedArray(r-t);return writeStringToArrayBuffer(e,t,r,n,0),n.buffer},arrayBufferToString=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},pack=function(e,t,r){var n=new ArrayBuffer(e.size);return new DataView(n)[e.setter](0,t,r),arrayBufferToString(n)},Pack={typemap:{byname:byname,byarray:{}},pack:pack,arrayBufferToString:arrayBufferToString,stringToArrayBuffer:stringToArrayBuffer,writeStringToArrayBuffer:writeStringToArrayBuffer};for(var name in Pack.typemap.byname){var spec=Pack.typemap.byname[name];spec.name=name,Pack.typemap.byarray[spec.array]=spec}var PelagosClient=function(){function PelagosClient(){Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.d)(this,PelagosClient),this.MAGIC_COOKIE="tmtx"}return Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.g)(PelagosClient,[{key:"obtainTile",value:function(e,t){return new Promise(function(r,n){if(this.request=null,"undefined"==typeof XMLHttpRequest)throw"XMLHttpRequest is disabled";this.request=new XMLHttpRequest,this.resolve=r,this.reject=n,this.request.open("GET",e,!0),t&&this.request.setRequestHeader("Authorization","Bearer ".concat(t)),this.request.responseType="arraybuffer",this.request.onload=this.handleData.bind(this),this.request.onerror=this.handleData.bind(this),this.request.send(null)}.bind(this))}},{key:"handleData",value:function handleData(){var self=this;if(this.request){if(this.error)return!0;if(4==this.request.readyState){var success=200==this.request.status||this.isFileUri&&0==this.request.status;if(!success)return void this.resolve(null)}if(this.request.response){var length=this.request.response.byteLength,response=this.request.response,dataView=new DataView(response);if(!(length<8)){if(null==self.headerLen){var cookie=Pack.arrayBufferToString(response.slice(0,4));if(cookie!=this.MAGIC_COOKIE)return void this.reject("Could not load "+this.url+" due to incorrect file format. Cookie: ["+this.cookie+"]");self.headerLen=dataView.getInt32(4,!0),self.offset=8}if(!(length<self.offset+self.headerLen)){if(!self.headerIsLoaded){self.header=JSON.parse(Pack.arrayBufferToString(response.slice(self.offset,self.offset+self.headerLen))),self.rowLen=0,self.header.colsByName={};for(var colidx=0;colidx<self.header.cols.length;colidx++){var col=self.header.cols[colidx];col.idx=colidx,self.header.colsByName[col.name]=col,col.typespec=Pack.typemap.byname[col.type],null!=col.multiplier&&null!=col.min&&(col.min=col.min*col.multiplier),null!=col.offset&&null!=col.min&&(col.min=col.min+col.offset),null!=col.multiplier&&null!=col.max&&(col.max=col.max*col.multiplier),null!=col.offset&&null!=col.max&&(col.max=col.max+col.offset),self.rowLen+=col.typespec.size}if(self.offset+=self.headerLen,self.offset+=(4-self.headerLen%4)%4,self.headerIsLoaded=!0,"rowwise"!=self.header.orientation&&"columnwise"!=self.header.orientation)return self.errorLoading({orientation:self.header.orientation,toString:function(){return"Could not load "+this.url+" due to unsupported file orientation. Orientation: "+this.orientation+". Supported orientations: rowwise, columnwise."}}),!0;if(!self.rowLen)return self.allLoaded(),!0}if("rowwise"==self.header.orientation){for(var result={};self.offset+self.rowLen<=length;self.rowidx++){for(var row={},colidx=0;colidx<self.header.cols.length;colidx++){var col=self.header.cols[colidx],val=dataView[col.typespec.getter](self.offset,!0);row[col.name]=val,self.offset+=col.typespec.size}result[col.name]=row}self.rowidx==self.header.length&&this.resolve(result)}else if("columnwise"==self.header.orientation){var colValues=null,result={};if(length>=self.offset+self.header.length*self.rowLen){for(var colidx=0;colidx<self.header.cols.length;colidx++){var col=self.header.cols[colidx];colValues=new(eval(col.typespec.array))(response.slice(self.offset,self.offset+col.typespec.size*self.header.length)),self.offset+=self.header.length*col.typespec.size,result[col.name]=colValues}return this.resolve(result),!0}}}}}}}}]),PelagosClient}(),read=function(e,t,r,n,a){var i,o,s=8*a-n-1,u=(1<<s)-1,c=u>>1,l=-7,p=r?a-1:0,f=r?-1:1,h=e[t+p];for(p+=f,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+p],p+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=256*o+e[t+p],p+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=c}return(h?-1:1)*o*Math.pow(2,i-n)},write=function(e,t,r,n,a,i){var o,s,u,c=8*i-a-1,l=(1<<c)-1,p=l>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(o++,u/=2),o+p>=l?(s=0,o=l):o+p>=1?(s=(t*u-1)*Math.pow(2,a),o+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,a),o=0));a>=8;e[r+h]=255&s,h+=d,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[r+h]=255&o,h+=d,o/=256,c-=8);e[r+h-d]|=128*_},ieee754={read:read,write:write},pbf=Pbf;function Pbf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32;function readVarintRemainder(e,t,r){var n,a,i=r.buf;if(n=(112&(a=i[r.pos++]))>>4,a<128)return toNum(e,n,t);if(n|=(127&(a=i[r.pos++]))<<3,a<128)return toNum(e,n,t);if(n|=(127&(a=i[r.pos++]))<<10,a<128)return toNum(e,n,t);if(n|=(127&(a=i[r.pos++]))<<17,a<128)return toNum(e,n,t);if(n|=(127&(a=i[r.pos++]))<<24,a<128)return toNum(e,n,t);if(n|=(1&(a=i[r.pos++]))<<31,a<128)return toNum(e,n,t);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(e){return e.type===Pbf.Bytes?e.readVarint()+e.pos:e.pos+1}function toNum(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function writeBigVarint(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),writeBigVarintLow(r,n,t),writeBigVarintHigh(n,t)}function writeBigVarintLow(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}function writeBigVarintHigh(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function makeRoomForExtraLength(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var a=r.pos-1;a>=e;a--)r.buf[a+n]=r.buf[a]}function _writePackedVarint(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function _writePackedSVarint(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function _writePackedFloat(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function _writePackedDouble(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function _writePackedBoolean(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function _writePackedFixed(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function _writePackedSFixed(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function _writePackedFixed2(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function _writePackedSFixed2(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function readUInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function writeInt32(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function readInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function readUtf8(e,t,r){for(var n="",a=t;a<r;){var i,o,s,u=e[a],c=null,l=u>239?4:u>223?3:u>191?2:1;if(a+l>r)break;1===l?u<128&&(c=u):2===l?128==(192&(i=e[a+1]))&&(c=(31&u)<<6|63&i)<=127&&(c=null):3===l?(i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&((c=(15&u)<<12|(63&i)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&((c=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),a+=l}return n}function writeUtf8(e,t,r){for(var n,a,i=0;i<t.length;i++){if((n=t.charCodeAt(i))>55295&&n<57344){if(!a){n>56319||i+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):a=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(e[r++]=239,e[r++]=191,e[r++]=189,a=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),a=n>>3,i=this.pos;this.type=7&n,e(a,t,this),this.pos===i&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=readUInt32(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=readInt32(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readSFixed64:function(){var e=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readFloat:function(){var e=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:readVarintRemainder(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=readUtf8(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Pbf.Bytes)return e.push(this.readVarint(t));var r=readPackedEnd(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readSVarint());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readBoolean());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readFloat());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readDouble());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readFixed32());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readSFixed32());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readFixed64());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Pbf.Bytes)return e.push(this.readSFixed64());var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(t===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Pbf.Fixed32)this.pos+=4;else{if(t!==Pbf.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?writeBigVarint(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);var r=this.pos-t;r>=128&&makeRoomForExtraLength(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),ieee754.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ieee754.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&makeRoomForExtraLength(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Pbf.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,_writePackedVarint,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,_writePackedSVarint,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,_writePackedBoolean,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,_writePackedFloat,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,_writePackedDouble,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,_writePackedFixed,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,_writePackedSFixed,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,_writePackedFixed2,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,_writePackedSFixed2,t)},writeBytesField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var pointGeometry=Point;function Point(e,t){this.x=e,this.y=t}Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,a=r*this.x+t*this.y;return this.x=n,this.y=a,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),a=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=a,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(e){return e instanceof Point?e:Array.isArray(e)?new Point(e[0],e[1]):e};var vectortilefeature=VectorTileFeature;function VectorTileFeature(e,t,r,n,a){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=a,e.readFields(readFeature,this,t)}function readFeature(e,t,r){1==e?t.id=r.readVarint():2==e?readTag(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function readTag(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[n]=a}}function classifyRings(e){var t=e.length;if(t<=1)return[e];for(var r,n,a=[],i=0;i<t;i++){var o=signedArea(e[i]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&a.push(r),r=[e[i]]):r.push(e[i]))}return r&&a.push(r),a}function signedArea(e){for(var t,r,n=0,a=0,i=e.length,o=i-1;a<i;o=a++)t=e[a],n+=((r=e[o]).x-t.x)*(t.y+r.y);return n}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,a=0,i=0,o=0,s=[];e.pos<r;){if(a<=0){var u=e.readVarint();n=7&u,a=u>>3}if(a--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new pointGeometry(i,o));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},VectorTileFeature.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,a=0,i=0,o=1/0,s=-1/0,u=1/0,c=-1/0;e.pos<t;){if(n<=0){var l=e.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)(a+=e.readSVarint())<o&&(o=a),a>s&&(s=a),(i+=e.readSVarint())<u&&(u=i),i>c&&(c=i);else if(7!==r)throw new Error("unknown command "+r)}return[o,u,s,c]},VectorTileFeature.prototype.toGeoJSON=function(e,t,r){var n,a,i=this.extent*Math.pow(2,r),o=this.extent*e,s=this.extent*t,u=this.loadGeometry(),c=VectorTileFeature.types[this.type];function l(e){for(var t=0;t<e.length;t++){var r=e[t],n=180-360*(r.y+s)/i;e[t]=[360*(r.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<u.length;n++)p[n]=u[n][0];l(u=p);break;case 2:for(n=0;n<u.length;n++)l(u[n]);break;case 3:for(u=classifyRings(u),n=0;n<u.length;n++)for(a=0;a<u[n].length;a++)l(u[n][a])}1===u.length?u=u[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var vectortilelayer=VectorTileLayer;function VectorTileLayer(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(readLayer,this,t),this.length=this._features.length}function readLayer(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(readValueMessage(r))}function readValueMessage(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}VectorTileLayer.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new vectortilefeature(this._pbf,t,this.extent,this._keys,this._values)};var vectortile=VectorTile;function VectorTile(e,t){this.layers=e.readFields(readTile,{},t)}function readTile(e,t,r){if(3===e){var n=new vectortilelayer(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}var VectorTile$1=vectortile,getPBFTile=function(e,t){return fetch(e,{headers:t?{Authorization:"Bearer ".concat(t)}:{}}).then(function(t){if(!t.ok)throw new Error("could not load tile ".concat(e));return t.blob().then(function(e){var t=new FileReader;return new Promise(function(r){t.addEventListener("loadend",function(){var e=new pbf(t.result),n=new VectorTile$1(e);return r(n)}),t.readAsArrayBuffer(e)})})}).catch(function(e){console.warn(e)})},getTemporalTileURLs=function(e,t,r){var n=[];return(t||[null]).forEach(function(t,a){var i={id:r.seriesgroup};null!==t&&!0!==r.temporalExtentsLess&&(i.startTimeISO=new Date(t[0]).toISOString(),i.endTimeISO=new Date(t[1]).toISOString()),r.tileCoordinates&&(i.x=r.tileCoordinates.x,i.y=r.tileCoordinates.y,i.z=r.tileCoordinates.zoom);var o=buildEndpoint(e,i);(!0===r.temporalExtentsLess||!r.temporalExtentsIndices||r.temporalExtentsIndices.indexOf(a)>-1)&&n.push(o)}),n},getTilePromises=function(e,t,r,n){for(var a=[],i=getTemporalTileURLs(e,r,n),o=0,s=i.length;o<s;o++)!0===n.isPBF?a.push(getPBFTile(i[o],t)):a.push((new PelagosClient).obtainTile(i[o],t));return a},getCleanVectorArrays=function(e){return e.filter(function(e){return null!==e})},groupData=function(e,t){var r,n={},a=sumBy_1(e,function(e){return e.longitude.length}),i=t.filter(function(t){return!e[0]||void 0!==e[0][t]||(console.warn("column ".concat(t," is present in layerHeader.colsByName but not in tile data")),!1)});i.forEach(function(e){n[e]=new Float32Array(a)});for(var o=0,s=function(e){n[e].set(r[e],o)},u=0,c=e.length;u<c;u++)r=e[u],i.forEach(s),o+=r.longitude.length;return n},getTilePlaybackData=function(e,t,r,n,a){var i=void 0===a?[]:a,o=r.zoom,s=mapConvert.getZoomFactorRadius(o),u=mapConvert.getZoomFactorRadiusRenderingMode(o),c=mapConvert.getZoomFactorOpacity(o),l={},p=Object.keys(t);p.forEach(function(e){l[e]=!0});var f=[].concat(p);!0===l.sigma&&f.push("radius"),!0===l.weight&&f.push("opacity"),!0===l.longitude&&(f.push("worldX"),f.push("worldY")),!0===l.id&&f.push("series"),["latitude","longitude","datetime"].forEach(function(e){void 0!==t[e]&&!0!==t[e].hidden||pull_1(f,e)}),pull_1(f,"sigma","weight"),f=uniq_1(f);for(var h=function(t,a){var h=void 0;if(!0===n){var d=e.feature(t);h=d.properties;var _=d.toGeoJSON(r.x,r.y,o).geometry.coordinates;h.longitude=_[0],h.latitude=_[1]}else h={},p.forEach(function(r){h[r]=e[r][t]});var m=l.timeIndex?h.timeIndex:mapConvert.getOffsetedTimeAtPrecision(h.datetime),y=lngLatToWorld([h.longitude,h.latitude],1),g=Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.h)(y,2),b=g[0],v=g[1];if(h.worldX=b,h.worldY=v,l.sigma&&(h.radius=mapConvert.sigmaToRadius(h.sigma,u,s)),l.weight&&(h.opacity=mapConvert.weightToOpacity(h.weight,c)),l.id&&(h.series=h.id),!i[m]){var S={};return f.forEach(function(e){S[e]=[h[e]]}),i[m]=S,"continue"}var O=i[m];f.forEach(function(e){O[e].push(h[e])})},d=0,_=!0===n?e.length:e.latitude.length;d<_;d++)h(d);return i},addTracksPointsRenderingData=function(e){e.hasFishing=[],e.worldX=[],e.worldY=[];for(var t=0,r=e.weight.length;t<r;t++){var n=lngLatToWorld([e.longitude[t],e.latitude[t]],1),a=Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.h)(n,2),i=a[0],o=a[1];e.worldX[t]=i,e.worldY[t]=o,e.hasFishing[t]=e.weight[t]>0}return e},getTracksPlaybackData=function(e){for(var t=[],r=0,n=e.series.length;r<n;r++){var a=e.datetime[r],i=mapConvert.getOffsetedTimeAtPrecision(a);if(t[i]){var o=t[i];o.worldX.push(e.worldX[r]),o.worldY.push(e.worldY[r]),o.series.push(e.series[r]),o.hasFishing.push(e.hasFishing[r])}else{var s={worldX:[e.worldX[r]],worldY:[e.worldY[r]],series:[e.series[r]],hasFishing:[e.hasFishing[r]]};t[i]=s}}return t},vesselSatisfiesFilters=function(e,t,r){return Object.keys(r).every(function(n){return void 0!==e[n]&&r[n].indexOf(e[n][t])>-1})},vesselSatisfiesAllFilters=function(e,t,r){return r.filter(function(e){return!0!==e.pass}).some(function(r){return vesselSatisfiesFilters(e,t,r.filterValues)})},selectVesselsAt=function(e,t,r,n,a){for(var i=[],o=t.worldX,s=t.worldY,u=t.toleranceRadiusInWorldUnits,c=function(t){var r=e[t];if(void 0===r)return"continue";for(var n=function(e){var t=r.worldX[e],n=r.worldY[e];if((!a.length||vesselSatisfiesAllFilters(r,e,a))&&t>=o-u&&t<=o+u&&n>=s-u&&n<=s+u){var c={};Object.keys(r).forEach(function(t){c[t]=r[t][e]}),i.push(c)}},c=0;c<r.worldX.length;c++)n(c)},l=r;l<n;l++)c(l);return i},d2r=Math.PI/180,r2d=180/Math.PI;function tileToBBOX(e){var t=tile2lon(e[0]+1,e[2]);return[tile2lon(e[0],e[2]),tile2lat(e[1]+1,e[2]),t,tile2lat(e[1],e[2])]}function tileToGeoJSON(e){var t=tileToBBOX(e);return{type:"Polygon",coordinates:[[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]],[t[0],t[1]]]]}}function tile2lon(e,t){return e/Math.pow(2,t)*360-180}function tile2lat(e,t){var r=Math.PI-2*Math.PI*e/Math.pow(2,t);return r2d*Math.atan(.5*(Math.exp(r)-Math.exp(-r)))}function pointToTile(e,t,r){var n=pointToTileFraction(e,t,r);return n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n}function getChildren(e){return[[2*e[0],2*e[1],e[2]+1],[2*e[0]+1,2*e[1],e[2]+1],[2*e[0]+1,2*e[1]+1,e[2]+1],[2*e[0],2*e[1]+1,e[2]+1]]}function getParent(e){return e[0]%2==0&&e[1]%2==0?[e[0]/2,e[1]/2,e[2]-1]:e[0]%2==0&&!e[1]%2==0?[e[0]/2,(e[1]-1)/2,e[2]-1]:!e[0]%2==0&&e[1]%2==0?[(e[0]-1)/2,e[1]/2,e[2]-1]:[(e[0]-1)/2,(e[1]-1)/2,e[2]-1]}function getSiblings(e){return getChildren(getParent(e))}function hasSiblings(e,t){for(var r=getSiblings(e),n=0;n<r.length;n++)if(!hasTile(t,r[n]))return!1;return!0}function hasTile(e,t){for(var r=0;r<e.length;r++)if(tilesEqual(e[r],t))return!0;return!1}function tilesEqual(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function tileToQuadkey(e){for(var t="",r=e[2];r>0;r--){var n=0,a=1<<r-1;0!=(e[0]&a)&&n++,0!=(e[1]&a)&&(n+=2),t+=n.toString()}return t}function quadkeyToTile(e){for(var t=0,r=0,n=e.length,a=n;a>0;a--){var i=1<<a-1,o=+e[n-a];1===o&&(t|=i),2===o&&(r|=i),3===o&&(t|=i,r|=i)}return[t,r,n]}function bboxToTile(e){var t=pointToTile(e[0],e[1],32),r=pointToTile(e[2],e[3],32),n=[t[0],t[1],r[0],r[1]],a=getBboxZoom(n);return 0===a?[0,0,0]:[n[0]>>>32-a,n[1]>>>32-a,a]}function getBboxZoom(e){for(var t=0;t<28;t++){var r=1<<32-(t+1);if((e[0]&r)!=(e[2]&r)||(e[1]&r)!=(e[3]&r))return t}return 28}function pointToTileFraction(e,t,r){var n=Math.sin(t*d2r),a=Math.pow(2,r);return[a*(e/360+.5),a*(.5-.25*Math.log((1+n)/(1-n))/Math.PI),r]}var tilebelt={tileToGeoJSON:tileToGeoJSON,tileToBBOX:tileToBBOX,getChildren:getChildren,getParent:getParent,getSiblings:getSiblings,hasTile:hasTile,hasSiblings:hasSiblings,tilesEqual:tilesEqual,tileToQuadkey:tileToQuadkey,quadkeyToTile:quadkeyToTile,pointToTile:pointToTile,bboxToTile:bboxToTile,pointToTileFraction:pointToTileFraction},geojson=function(e,t){return{type:"FeatureCollection",features:getTiles(e,t).map(tileToFeature)}};function tileToFeature(e){return{type:"Feature",geometry:tilebelt.tileToGeoJSON(e),properties:{}}}var tiles=getTiles,indexes=function(e,t){return getTiles(e,t).map(tilebelt.tileToQuadkey)};function getTiles(e,t){var r,n,a=e.coordinates,i=t.max_zoom,o={},s=[];if("Point"===e.type)return[tilebelt.pointToTile(a[0],a[1],i)];if("MultiPoint"===e.type)for(r=0;r<a.length;r++)o[toID((n=tilebelt.pointToTile(a[r][0],a[r][1],i))[0],n[1],n[2])]=!0;else if("LineString"===e.type)lineCover(o,a,i);else if("MultiLineString"===e.type)for(r=0;r<a.length;r++)lineCover(o,a[r],i);else if("Polygon"===e.type)polygonCover(o,s,a,i);else{if("MultiPolygon"!==e.type)throw new Error("Geometry type not implemented");for(r=0;r<a.length;r++)polygonCover(o,s,a[r],i)}if(t.min_zoom!==i){var u=s.length;for(appendHashTiles(o,s),r=0;r<u;r++){var c=s[r];o[toID(c[0],c[1],c[2])]=!0}return mergeTiles(o,s,t)}return appendHashTiles(o,s),s}function mergeTiles(e,t,r){for(var n=[],a=r.max_zoom;a>r.min_zoom;a--){for(var i={},o=[],s=0;s<t.length;s++){var u=t[s];if(u[0]%2==0&&u[1]%2==0){var c=toID(u[0]+1,u[1],a),l=toID(u[0],u[1]+1,a),p=toID(u[0]+1,u[1]+1,a);if(e[c]&&e[l]&&e[p]){e[toID(u[0],u[1],u[2])]=!1,e[c]=!1,e[l]=!1,e[p]=!1;var f=[u[0]/2,u[1]/2,a-1];a-1===r.min_zoom?n.push(f):(i[toID(u[0]/2,u[1]/2,a-1)]=!0,o.push(f))}}}for(s=0;s<t.length;s++)e[toID((u=t[s])[0],u[1],u[2])]&&n.push(u);e=i,t=o}return n}function polygonCover(e,t,r,n){for(var a=[],i=0;i<r.length;i++){var o=[];lineCover(e,r[i],n,o);for(var s=0,u=o.length,c=u-1;s<u;c=s++){var l=(s+1)%u,p=o[s][1];(p>o[c][1]||p>o[l][1])&&(p<o[c][1]||p<o[l][1])&&p!==o[l][1]&&a.push(o[s])}}for(a.sort(compareTiles),i=0;i<a.length;i+=2){p=a[i][1];for(var f=a[i][0]+1;f<a[i+1][0];f++)e[toID(f,p,n)]||t.push([f,p,n])}}function compareTiles(e,t){return e[1]-t[1]||e[0]-t[0]}function lineCover(e,t,r,n){for(var a,i,o=0;o<t.length-1;o++){var s=tilebelt.pointToTileFraction(t[o][0],t[o][1],r),u=tilebelt.pointToTileFraction(t[o+1][0],t[o+1][1],r),c=s[0],l=s[1],p=u[0]-c,f=u[1]-l;if(0!==f||0!==p){var h=p>0?1:-1,d=f>0?1:-1,_=Math.floor(c),m=Math.floor(l),y=0===p?1/0:Math.abs(((p>0?1:0)+_-c)/p),g=0===f?1/0:Math.abs(((f>0?1:0)+m-l)/f),b=Math.abs(h/p),v=Math.abs(d/f);for(_===a&&m===i||(e[toID(_,m,r)]=!0,n&&m!==i&&n.push([_,m]),a=_,i=m);y<1||g<1;)y<g?(y+=b,_+=h):(g+=v,m+=d),e[toID(_,m,r)]=!0,n&&m!==i&&n.push([_,m]),a=_,i=m}}n&&m===n[0][1]&&n.pop()}function appendHashTiles(e,t){for(var r=Object.keys(e),n=0;n<r.length;n++)t.push(fromID(+r[n]))}function toID(e,t,r){return 32*(2*(1<<r)*t+e)+r}function fromID(e){var t=e%32,r=2*(1<<t),n=(e-t)/32,a=n%r;return[a,(n-a)/r%r,t]}var tileCover={geojson:geojson,tiles:tiles,indexes:indexes},SET_CURRENTLY_VISIBLE_TILES="SET_CURRENTLY_VISIBLE_TILES",SET_CURRENTLY_LOADED_TILES="SET_CURRENTLY_LOADED_TILES",SET_CURRENTLY_SWAPPED_TILE_UIDS="SET_CURRENTLY_SWAPPED_TILE_UIDS",MARK_TILES_UIDS_AS_LOADED="MARK_TILES_UIDS_AS_LOADED",RELEASE_MARKED_TILES_UIDS="RELEASE_MARKED_TILES_UIDS",getTilecoverLimits=function(e){var t=Math.ceil(e+TILES_LOAD_ZOOM_OFFSET),r=!0;return t>ACTIVITY_LAYERS_MAX_ZOOM_LEVEL_TILE_LOADING&&(t=ACTIVITY_LAYERS_MAX_ZOOM_LEVEL_TILE_LOADING,r=!1),{min_zoom:t,max_zoom:t,tilesAvailable:r}},flushToReleaseTiles=function(){return function(e,t){var r=t();if(!r.map.heatmapTiles.currentToLoadTileUids.length){var n=r.map.heatmapTiles.currentToReleaseTileUids;e(releaseTiles(n)),e({type:RELEASE_MARKED_TILES_UIDS})}}},markTileAsLoaded=function(e){return function(t){t({type:MARK_TILES_UIDS_AS_LOADED,payload:e}),t(flushToReleaseTiles())}},flushTileState=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,r){var n=r(),a=n.map.heatmapTiles.currentVisibleTiles,i=[],o=[];if(!0===e)i=a;else{var s=n.map.heatmapTiles.currentLoadedTiles;a.forEach(function(e){void 0===s.find(function(t){return t.uid===e.uid})&&i.push(e)}),s.forEach(function(e){void 0===a.find(function(t){return t.uid===e.uid})&&o.push(e.uid)})}var u=i.map(function(e){return e.uid});i.forEach(function(e){t(getTile(e))}),t({type:SET_CURRENTLY_LOADED_TILES,payload:a}),t({type:SET_CURRENTLY_SWAPPED_TILE_UIDS,payload:{tilesToLoadUids:u,tilesToReleaseUids:o}}),t(updateLoadedTiles()),t(flushToReleaseTiles())}},_debouncedFlushState=function(e){e(flushTileState())},debouncedFlushState=Object(_chunk_552d8fc4_js__WEBPACK_IMPORTED_MODULE_1__.i)(_debouncedFlushState,500),updateHeatmapTilesFromViewport=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,r){var n=r().map.viewport,a=n.viewport;if(null===n.currentTransition){var i=new WebMercatorViewport(a),o=[i.unproject([0,0]),i.unproject([a.width,a.height])],s=o[0],u=o[1],c=[s[0],u[1],u[0],s[1]],l=c[0],p=c[1],f=c[2],h=c[3],d=[],_=getTilecoverLimits(a.zoom);if(!1!==_.tilesAvailable||!0===e){if(f>180||l<-180){var m=f>180?l:l+360,y=f>180?f-360:f;d.push([[[m,h],[179.999,h],[179.999,p],[m,p],[m,h]]]),d.push([[[-180,h],[y,h],[y,p],[-180,p],[-180,h]]])}else d.push([[[l,h],[f,h],[f,p],[l,p],[l,h]]]);var g={type:"MultiPolygon",coordinates:d},b=tileCover.tiles(g,_),v=tileCover.indexes(g,_),S=[];b.forEach(function(e,t){var r=v[t];e[2]>=2&&S.push({tileCoordinates:{x:e[0],y:e[1],zoom:e[2]},uid:r})}),t({type:SET_CURRENTLY_VISIBLE_TILES,payload:S}),!1===(n.prevZoom!==a.zoom)?t(flushTileState(e)):debouncedFlushState(t)}}}},queryHeatmapVessels=function(e,t){return function(r,n){var a={type:"Point",coordinates:[e.longitude,e.latitude]},i=n().map.viewport.viewport.zoom,o=[i,i-1,i+1].map(function(e){return getTilecoverLimits(e)}).map(function(e){return tileCover.indexes(a,e)}).map(function(e){return e[0]});r(highlightVesselFromHeatmap(Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.l)({},e,{uids:o}),t))}},ADD_HEATMAP_LAYER="ADD_HEATMAP_LAYER",UPDATE_HEATMAP_LAYER_STYLE="UPDATE_HEATMAP_LAYER_STYLE",ADD_REFERENCE_TILE="ADD_REFERENCE_TILE",HIGHLIGHT_VESSELS="HIGHLIGHT_VESSELS",INIT_HEATMAP_LAYERS="INIT_HEATMAP_LAYERS",REMOVE_HEATMAP_LAYER="REMOVE_HEATMAP_LAYER",UPDATE_HEATMAP_LAYER_TEMPORAL_EXTENTS_LOADED_INDICES="UPDATE_HEATMAP_LAYER_TEMPORAL_EXTENTS_LOADED_INDICES",UPDATE_HEATMAP_TILE="UPDATE_HEATMAP_TILE",RELEASE_HEATMAP_TILES="RELEASE_HEATMAP_TILES",UPDATE_LOADED_TILES="UPDATE_LOADED_TILES",HIGHLIGHT_CLICKED_VESSEL="HIGHLIGHT_CLICKED_VESSEL",CLEAR_HIGHLIGHT_CLICKED_VESSEL="CLEAR_HIGHLIGHT_CLICKED_VESSEL";function getTemporalExtentsVisibleIndices(e,t){var r=e[0].getTime(),n=e[1].getTime(),a=[];return t.forEach(function(e,t){var i=e[0];e[1]>=r&&i<=n&&a.push(t)}),a}function loadLayerTile(e,t,r,n,a){var i=a.url,o=a.temporalExtents,s=a.temporalExtentsLess,u=a.isPBF;if(void 0===i)throw new Error("URL/endpoints object is not available on this tilesets header");var c=getTilePromises(i,r,o,{tileCoordinates:t,temporalExtentsIndices:n,temporalExtentsLess:s,isPBF:u}),l=Promise.all(c);return new Promise(function(t){l.then(function(r){t({loadedLayerId:e,rawTileData:r})})})}function parseLayerTile(e,t,r,n,a){var i;if(!0===r){if(void 0===e||!e.length||void 0===e[0]||!Object.keys(e[0].layers).length)return[];i=e[0].layers.points}else{var o=getCleanVectorArrays(e);if(i=groupData(o,Object.keys(t)),0===Object.keys(i).length)return[]}return getTilePlaybackData(i,t,n,r,a)}function getTiles$1(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(n,a){var i=a(),o=startLoader(n,i,e.join("-")),s=i.map.module.token,u=i.map.heatmap.heatmapLayers,c={};e.forEach(function(e){c[e]=Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.m)(u[e].tiles)});var l=[];e.forEach(function(e){var a=u[e].header,i=Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.l)({},a),o=i.temporalExtents,p=i.temporalExtentsLess,f=i.isPBF,h=i.colsByName,d=a.endpoints.tiles;t.forEach(function(t){var a=c[e].find(function(e){return e.uid===t.uid});a||(a={uid:t.uid,temporalExtentsIndicesLoaded:[]},c[e].push(a));var i=void 0===r?u[e].visibleTemporalExtentsIndices:r[e],_=difference_1(i,a.temporalExtentsIndicesLoaded),m=loadLayerTile(e,t.tileCoordinates,s,_,{url:d,temporalExtents:o,temporalExtentsLess:p,isPBF:f});l.push(m),m.then(function(e){var r=e.loadedLayerId,i=e.rawTileData;a.temporalExtentsIndicesLoaded=uniq_1(a.temporalExtentsIndicesLoaded.concat(_)),a.data=parseLayerTile(i,h,f,t.tileCoordinates,a.data),n({type:UPDATE_HEATMAP_TILE,payload:{layerId:r,tile:a}})})})}),Promise.all(l).then(function(){n(completeLoader(o)),n(markTileAsLoaded(t.map(function(e){return e.uid})))})}}function getTile(e){return function(t,r){t({type:ADD_REFERENCE_TILE,payload:e});var n=r().map.heatmap.heatmapLayers,a=Object.keys(n).filter(function(e){return!0===n[e].visible});a.length&&t(getTiles$1(a,[e]))}}var releaseTiles=function(e){return{type:RELEASE_HEATMAP_TILES,payload:e}},updateLoadedTiles=function(){return{type:UPDATE_LOADED_TILES}};function loadAllTilesForLayer(e){return function(t,r){var n=r().map.heatmap.referenceTiles;t(getTiles$1([e],n))}}var addHeatmapLayer=function(e,t){return function(r){var n=e.header.temporalExtents;r({type:ADD_HEATMAP_LAYER,payload:Object(_chunk_4036bba0_js__WEBPACK_IMPORTED_MODULE_0__.l)({},e,{visibleTemporalExtentsIndices:getTemporalExtentsVisibleIndices(t,n)})}),!0===e.visible&&r(loadAllTilesForLayer(e.id))}},removeHeatmapLayer=function(e){return function(t){t({type:REMOVE_HEATMAP_LAYER,payload:{id:e}})}};function updateLayerLoadTemporalExtents(e){return function(t,r){var n=r(),a=n.map.heatmap.heatmapLayers,i={};Object.keys(a).forEach(function(r){var n=a[r],o=n.header.temporalExtents,s=n.visibleTemporalExtentsIndices,u=getTemporalExtentsVisibleIndices(e,o),c=difference_1(u,s);c.length&&(i[r]=c,t({type:UPDATE_HEATMAP_LAYER_TEMPORAL_EXTENTS_LOADED_INDICES,payload:{layerId:r,indicesAdded:c}}))});var o=Object.keys(i);o.length&&t(getTiles$1(o,n.map.heatmap.referenceTiles,i))}}var _queryHeatmap=function(e,t,r){var n=e.map.heatmap.heatmapLayers,a=r[0],i=r[1],o=[];Object.keys(n).forEach(function(e){var r=n[e];if(!0===r.visible){var s=t.uids.map(function(e){return r.tiles.find(function(t){return t.uid===e})}).filter(function(e){return void 0!==e&&void 0!==e.data}),u=r.filters;if(s.length){var c=s[0];o.push({layer:r,vessels:selectVesselsAt(c.data,t,a,i,u)})}}});var s,u,c,l,p,f=o.filter(function(e){return e.vessels.length>0}),h=f.filter(function(e){return e.layer.subtype===ENCOUNTERS}).length>0;if(0===f.length)c=!0;else if(f.length>1&&!h)s=!0;else{var d=(l=h?f.find(function(e){return e.layer.subtype===ENCOUNTERS}):f[0]).vessels;0===d.length?c=!0:d.filter(function(e){return e.seriesgroup<0}).length?s=!0:u=(p=uniqBy_1(d,function(e){return e.series})).length>1}return{isEmpty:c,isCluster:s,isMouseCluster:u,foundVessels:p,layer:void 0===l?{}:l.layer}};function clearHighlightedVessels(){return{type:HIGHLIGHT_VESSELS,payload:{isEmpty:!0,clickableCluster:!1}}}function highlightVesselFromHeatmap(e,t){return function(r,n){var a=n(),i=_queryHeatmap(a,e,t),o=i.layer,s=i.isEmpty,u=i.isCluster,c=i.isMouseCluster,l=i.foundVessels;void 0!==o.id||a.map.heatmap.highlightedVessels.layerId!==o.id?r({type:HIGHLIGHT_VESSELS,payload:{layer:{id:o.id,tilesetId:o.tilesetId,subtype:o.subtype,header:o.header},isEmpty:s,clickableCluster:!0===u||!0===c,highlightableCluster:!0!==u,foundVessels:l}}):r(clearHighlightedVessels())}}var clearHighlightedClickedVessel=function(){return{type:CLEAR_HIGHLIGHT_CLICKED_VESSEL}},updateHeatmapLayers=function(e,t){return function(r,n){if(null!==e){var a=n().map.heatmap.heatmapLayers;e.forEach(function(e){var n=e.id,i=a[n];void 0===i?r(addHeatmapLayer(e,t)):(i.visible!==e.visible&&!0===e.visible&&r(loadAllTilesForLayer(n)),i.visible===e.visible&&i.hue===e.hue&&i.opacity===e.opacity&&i.filters===e.filters&&i.interactive===e.interactive||r({type:UPDATE_HEATMAP_LAYER_STYLE,payload:{id:e.id,visible:e.visible,hue:e.hue,opacity:e.opacity,filters:e.filters,interactive:e.interactive}}))}),Object.keys(a).forEach(function(t){e.find(function(e){return e.id===t})||r(removeHeatmapLayer(t))})}else console.warn("New layers in updateHeatmapLayers can't be null")}},SET_VIEWPORT="SET_VIEWPORT",UPDATE_VIEWPORT="UPDATE_VIEWPORT",SET_ZOOM_INCREMENT="SET_ZOOM_INCREMENT",SET_MOUSE_LAT_LONG="SET_MOUSE_LAT_LONG",TRANSITION_END="TRANSITION_END",SET_NATIVE_VIEWPORT="SET_NATIVE_VIEWPORT",setViewport=function(e){return function(t){t({type:SET_VIEWPORT,payload:e}),t(updateHeatmapTilesFromViewport()),t(onViewportChange())}},updateViewport=function(e){return function(t){t({type:UPDATE_VIEWPORT,payload:e}),t(updateHeatmapTilesFromViewport()),t(onViewportChange())}},transitionTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(a){a({type:SET_ZOOM_INCREMENT,payload:{increment:e,latitude:t,longitude:r,zoom:n}}),a(updateHeatmapTilesFromViewport()),a(onViewportChange())}},transitionToZoom=function(e){return function(t){t(transitionTo(null,null,null,e))}},transitionEnd=function(){return function(e){e({type:TRANSITION_END}),e(updateHeatmapTilesFromViewport()),e(onViewportChange())}},zoomIntoVesselCenter=function(e,t){return function(r){r(transitionTo(CLUSTER_CLICK_ZOOM_INCREMENT,e,t))}},fitToBounds=function(e){return function(t,r){var n=r(),a=fitBounds({bounds:[[e.minLng,e.minLat],[e.maxLng,e.maxLat]],width:n.map.viewport.viewport.width,height:n.map.viewport.viewport.height,padding:50});t(transitionTo(null,a.latitude,a.longitude,a.zoom))}},exportNativeViewport=function(e){return function(t){var r=[0,0],n=[e.width,e.height],a=pixelsToWorld(r,e.pixelUnprojectionMatrix),i=pixelsToWorld(n,e.pixelUnprojectionMatrix),o=a[0]/e.scale,s=i[0]/e.scale,u=e.unproject(r),c=e.unproject(n),l={north:u[1],south:c[1],west:u[0],east:c[0]};t({type:SET_NATIVE_VIEWPORT,payload:{leftWorldScaled:o,rightWorldScaled:s,bounds:l}})}};function createThunkMiddleware(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;var composeEnhancers=redux__WEBPACK_IMPORTED_MODULE_2__.d,composeWithDevTools;Object({NODE_ENV:"production",PUBLIC_URL:"/pcp-prototypes"}).REACT_APP_MAP_REDUX_REMOTE_DEBUG;var store=Object(redux__WEBPACK_IMPORTED_MODULE_2__.e)(function(){},{},composeEnhancers(Object(redux__WEBPACK_IMPORTED_MODULE_2__.a)(thunk))),targetMapVessel=function(e){var t=store.getState().map.tracks.data.find(function(t){return t.id===e.toString()});return store.dispatch(fitToBounds(t.geoBounds)),t.timelineBounds}},486:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(230),o=r.n(i),s=(r(255),r(256),r(83)),u=r(138),c=r.n(u),l=function(){return a.a.createElement(n.Fragment,null,a.a.createElement("h1",{className:c.a.title},"Pew Carrier Portal prototypes"),a.a.createElement("nav",{className:c.a.nav},a.a.createElement(s.a,{to:"".concat("/pcp-prototypes","/search")},"Search"),a.a.createElement("a",{href:"".concat("/pcp-prototypes","/clusters.html?num=50")},"Clusters"),a.a.createElement(s.a,{to:"".concat("/pcp-prototypes","/map-scrolling")},"Map and events scroll navigation")))},p=r(20),f=r(19),h=r(1),d=r(6),_=r.n(d),m=Object(h.a)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.memo"):60115,_=r?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case p:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case f:case u:return e;default:return t}}case _:case d:case a:return t}}}function y(e){return m(e)===p}t.typeOf=m,t.AsyncMode=l,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=u,t.Element=n,t.ForwardRef=f,t.Fragment=i,t.Lazy=_,t.Memo=d,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===s||e===o||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===_||e.$$typeof===d||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f)},t.isAsyncMode=function(e){return y(e)||m(e)===l},t.isConcurrentMode=y,t.isContextConsumer=function(e){return m(e)===c},t.isContextProvider=function(e){return m(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return m(e)===f},t.isFragment=function(e){return m(e)===i},t.isLazy=function(e){return m(e)===_},t.isMemo=function(e){return m(e)===d},t.isPortal=function(e){return m(e)===a},t.isProfiler=function(e){return m(e)===s},t.isStrictMode=function(e){return m(e)===o},t.isSuspense=function(e){return m(e)===h}});Object(h.b)(m),m.typeOf,m.AsyncMode,m.ConcurrentMode,m.ContextConsumer,m.ContextProvider,m.Element,m.ForwardRef,m.Fragment,m.Lazy,m.Memo,m.Portal,m.Profiler,m.StrictMode,m.Suspense,m.isValidElementType,m.isAsyncMode,m.isConcurrentMode,m.isContextConsumer,m.isContextProvider,m.isElement,m.isForwardRef,m.isFragment,m.isLazy,m.isMemo,m.isPortal,m.isProfiler,m.isStrictMode,m.isSuspense;var y=Object(h.a)(function(e,t){});Object(h.b)(y),y.typeOf,y.AsyncMode,y.ConcurrentMode,y.ContextConsumer,y.ContextProvider,y.Element,y.ForwardRef,y.Fragment,y.Lazy,y.Memo,y.Portal,y.Profiler,y.StrictMode,y.Suspense,y.isValidElementType,y.isAsyncMode,y.isConcurrentMode,y.isContextConsumer,y.isContextProvider,y.isElement,y.isForwardRef,y.isFragment,y.isLazy,y.isMemo,y.isPortal,y.isProfiler,y.isStrictMode,y.isSuspense,Object(h.a)(function(e){e.exports=m});Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}})()&&Object.assign;var g="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function b(){}function v(){}Function.call.bind(Object.prototype.hasOwnProperty),v.resetWarningCache=b;var S=Object(h.a)(function(e){e.exports=function(){function e(e,t,r,n,a,i){if(i!==g){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:v,resetWarningCache:b};return r.PropTypes=r,r}()}),O=[{ISO2:"AW",ISO3:"ABW",name:"Aruba"},{ISO2:"AF",ISO3:"AFG",name:"Afghanistan"},{ISO2:"AO",ISO3:"AGO",name:"Angola"},{ISO2:"AI",ISO3:"AIA",name:"Anguilla"},{ISO2:"AX",ISO3:"ALA",name:"\xc5land Islands"},{ISO2:"AL",ISO3:"ALB",name:"Albania"},{ISO2:"AD",ISO3:"AND",name:"Andorra"},{ISO2:"AE",ISO3:"ARE",name:"United Arab Emirates"},{ISO2:"AR",ISO3:"ARG",name:"Argentina"},{ISO2:"AM",ISO3:"ARM",name:"Armenia"},{ISO2:"AS",ISO3:"ASM",name:"American Samoa"},{ISO2:"AQ",ISO3:"ATA",name:"Antarctica"},{ISO2:"TF",ISO3:"ATF",name:"French Southern and Antarctic Lands"},{ISO2:"AG",ISO3:"ATG",name:"Antigua and Barbuda"},{ISO2:"AU",ISO3:"AUS",name:"Australia"},{ISO2:"AT",ISO3:"AUT",name:"Austria"},{ISO2:"AZ",ISO3:"AZE",name:"Azerbaijan"},{ISO2:"BI",ISO3:"BDI",name:"Burundi"},{ISO2:"BE",ISO3:"BEL",name:"Belgium"},{ISO2:"BJ",ISO3:"BEN",name:"Benin"},{ISO2:"BF",ISO3:"BFA",name:"Burkina Faso"},{ISO2:"BD",ISO3:"BGD",name:"Bangladesh"},{ISO2:"BG",ISO3:"BGR",name:"Bulgaria"},{ISO2:"BH",ISO3:"BHR",name:"Bahrain"},{ISO2:"BS",ISO3:"BHS",name:"Bahamas"},{ISO2:"BA",ISO3:"BIH",name:"Bosnia and Herzegovina"},{ISO2:"BL",ISO3:"BLM",name:"Saint Barth\xe9lemy"},{ISO2:"SH",ISO3:"SHN",name:"Saint Helena, Ascension and Tristan da Cunha"},{ISO2:"BY",ISO3:"BLR",name:"Belarus"},{ISO2:"BZ",ISO3:"BLZ",name:"Belize"},{ISO2:"BM",ISO3:"BMU",name:"Bermuda"},{ISO2:"BO",ISO3:"BOL",name:"Bolivia"},{ISO2:"BQ",ISO3:"BES",name:"Caribbean Netherlands"},{ISO2:"BR",ISO3:"BRA",name:"Brazil"},{ISO2:"BB",ISO3:"BRB",name:"Barbados"},{ISO2:"BN",ISO3:"BRN",name:"Brunei"},{ISO2:"BT",ISO3:"BTN",name:"Bhutan"},{ISO2:"BV",ISO3:"BVT",name:"Bouvet Island"},{ISO2:"BW",ISO3:"BWA",name:"Botswana"},{ISO2:"CF",ISO3:"CAF",name:"Central African Republic"},{ISO2:"CA",ISO3:"CAN",name:"Canada"},{ISO2:"CC",ISO3:"CCK",name:"Cocos (Keeling) Islands"},{ISO2:"CH",ISO3:"CHE",name:"Switzerland"},{ISO2:"CL",ISO3:"CHL",name:"Chile"},{ISO2:"CN",ISO3:"CHN",name:"China"},{ISO2:"CI",ISO3:"CIV",name:"Ivory Coast"},{ISO2:"CM",ISO3:"CMR",name:"Cameroon"},{ISO2:"CD",ISO3:"COD",name:"DR Congo"},{ISO2:"CG",ISO3:"COG",name:"Republic of the Congo"},{ISO2:"CK",ISO3:"COK",name:"Cook Islands"},{ISO2:"CO",ISO3:"COL",name:"Colombia"},{ISO2:"KM",ISO3:"COM",name:"Comoros"},{ISO2:"CV",ISO3:"CPV",name:"Cape Verde"},{ISO2:"CR",ISO3:"CRI",name:"Costa Rica"},{ISO2:"CU",ISO3:"CUB",name:"Cuba"},{ISO2:"CW",ISO3:"CUW",name:"Cura\xe7ao"},{ISO2:"CX",ISO3:"CXR",name:"Christmas Island"},{ISO2:"KY",ISO3:"CYM",name:"Cayman Islands"},{ISO2:"CY",ISO3:"CYP",name:"Cyprus"},{ISO2:"CZ",ISO3:"CZE",name:"Czechia"},{ISO2:"DE",ISO3:"DEU",name:"Germany"},{ISO2:"DJ",ISO3:"DJI",name:"Djibouti"},{ISO2:"DM",ISO3:"DMA",name:"Dominica"},{ISO2:"DK",ISO3:"DNK",name:"Denmark"},{ISO2:"DO",ISO3:"DOM",name:"Dominican Republic"},{ISO2:"DZ",ISO3:"DZA",name:"Algeria"},{ISO2:"EC",ISO3:"ECU",name:"Ecuador"},{ISO2:"EG",ISO3:"EGY",name:"Egypt"},{ISO2:"ER",ISO3:"ERI",name:"Eritrea"},{ISO2:"EH",ISO3:"ESH",name:"Western Sahara"},{ISO2:"ES",ISO3:"ESP",name:"Spain"},{ISO2:"EE",ISO3:"EST",name:"Estonia"},{ISO2:"ET",ISO3:"ETH",name:"Ethiopia"},{ISO2:"FI",ISO3:"FIN",name:"Finland"},{ISO2:"FJ",ISO3:"FJI",name:"Fiji"},{ISO2:"FK",ISO3:"FLK",name:"Falkland Islands"},{ISO2:"FR",ISO3:"FRA",name:"France"},{ISO2:"FO",ISO3:"FRO",name:"Faroe Islands"},{ISO2:"FM",ISO3:"FSM",name:"Micronesia"},{ISO2:"GA",ISO3:"GAB",name:"Gabon"},{ISO2:"GB",ISO3:"GBR",name:"United Kingdom"},{ISO2:"GE",ISO3:"GEO",name:"Georgia"},{ISO2:"GG",ISO3:"GGY",name:"Guernsey"},{ISO2:"GH",ISO3:"GHA",name:"Ghana"},{ISO2:"GI",ISO3:"GIB",name:"Gibraltar"},{ISO2:"GN",ISO3:"GIN",name:"Guinea"},{ISO2:"GP",ISO3:"GLP",name:"Guadeloupe"},{ISO2:"GM",ISO3:"GMB",name:"Gambia"},{ISO2:"GW",ISO3:"GNB",name:"Guinea-Bissau"},{ISO2:"GQ",ISO3:"GNQ",name:"Equatorial Guinea"},{ISO2:"GR",ISO3:"GRC",name:"Greece"},{ISO2:"GD",ISO3:"GRD",name:"Grenada"},{ISO2:"GL",ISO3:"GRL",name:"Greenland"},{ISO2:"GT",ISO3:"GTM",name:"Guatemala"},{ISO2:"GF",ISO3:"GUF",name:"French Guiana"},{ISO2:"GU",ISO3:"GUM",name:"Guam"},{ISO2:"GY",ISO3:"GUY",name:"Guyana"},{ISO2:"HK",ISO3:"HKG",name:"Hong Kong"},{ISO2:"HM",ISO3:"HMD",name:"Heard Island and McDonald Islands"},{ISO2:"HN",ISO3:"HND",name:"Honduras"},{ISO2:"HR",ISO3:"HRV",name:"Croatia"},{ISO2:"HT",ISO3:"HTI",name:"Haiti"},{ISO2:"HU",ISO3:"HUN",name:"Hungary"},{ISO2:"ID",ISO3:"IDN",name:"Indonesia"},{ISO2:"IM",ISO3:"IMN",name:"Isle of Man"},{ISO2:"IN",ISO3:"IND",name:"India"},{ISO2:"IO",ISO3:"IOT",name:"British Indian Ocean Territory"},{ISO2:"IE",ISO3:"IRL",name:"Ireland"},{ISO2:"IR",ISO3:"IRN",name:"Iran"},{ISO2:"IQ",ISO3:"IRQ",name:"Iraq"},{ISO2:"IS",ISO3:"ISL",name:"Iceland"},{ISO2:"IL",ISO3:"ISR",name:"Israel"},{ISO2:"IT",ISO3:"ITA",name:"Italy"},{ISO2:"JM",ISO3:"JAM",name:"Jamaica"},{ISO2:"JE",ISO3:"JEY",name:"Jersey"},{ISO2:"JO",ISO3:"JOR",name:"Jordan"},{ISO2:"JP",ISO3:"JPN",name:"Japan"},{ISO2:"KZ",ISO3:"KAZ",name:"Kazakhstan"},{ISO2:"KE",ISO3:"KEN",name:"Kenya"},{ISO2:"KG",ISO3:"KGZ",name:"Kyrgyzstan"},{ISO2:"KH",ISO3:"KHM",name:"Cambodia"},{ISO2:"KI",ISO3:"KIR",name:"Kiribati"},{ISO2:"KN",ISO3:"KNA",name:"Saint Kitts and Nevis"},{ISO2:"KR",ISO3:"KOR",name:"South Korea"},{ISO2:"XK",ISO3:"UNK",name:"Kosovo"},{ISO2:"KW",ISO3:"KWT",name:"Kuwait"},{ISO2:"LA",ISO3:"LAO",name:"Laos"},{ISO2:"LB",ISO3:"LBN",name:"Lebanon"},{ISO2:"LR",ISO3:"LBR",name:"Liberia"},{ISO2:"LY",ISO3:"LBY",name:"Libya"},{ISO2:"LC",ISO3:"LCA",name:"Saint Lucia"},{ISO2:"LI",ISO3:"LIE",name:"Liechtenstein"},{ISO2:"LK",ISO3:"LKA",name:"Sri Lanka"},{ISO2:"LS",ISO3:"LSO",name:"Lesotho"},{ISO2:"LT",ISO3:"LTU",name:"Lithuania"},{ISO2:"LU",ISO3:"LUX",name:"Luxembourg"},{ISO2:"LV",ISO3:"LVA",name:"Latvia"},{ISO2:"MO",ISO3:"MAC",name:"Macau"},{ISO2:"MF",ISO3:"MAF",name:"Saint Martin"},{ISO2:"MA",ISO3:"MAR",name:"Morocco"},{ISO2:"MC",ISO3:"MCO",name:"Monaco"},{ISO2:"MD",ISO3:"MDA",name:"Moldova"},{ISO2:"MG",ISO3:"MDG",name:"Madagascar"},{ISO2:"MV",ISO3:"MDV",name:"Maldives"},{ISO2:"MX",ISO3:"MEX",name:"Mexico"},{ISO2:"MH",ISO3:"MHL",name:"Marshall Islands"},{ISO2:"MK",ISO3:"MKD",name:"Macedonia"},{ISO2:"ML",ISO3:"MLI",name:"Mali"},{ISO2:"MT",ISO3:"MLT",name:"Malta"},{ISO2:"MM",ISO3:"MMR",name:"Myanmar"},{ISO2:"ME",ISO3:"MNE",name:"Montenegro"},{ISO2:"MN",ISO3:"MNG",name:"Mongolia"},{ISO2:"MP",ISO3:"MNP",name:"Northern Mariana Islands"},{ISO2:"MZ",ISO3:"MOZ",name:"Mozambique"},{ISO2:"MR",ISO3:"MRT",name:"Mauritania"},{ISO2:"MS",ISO3:"MSR",name:"Montserrat"},{ISO2:"MQ",ISO3:"MTQ",name:"Martinique"},{ISO2:"MU",ISO3:"MUS",name:"Mauritius"},{ISO2:"MW",ISO3:"MWI",name:"Malawi"},{ISO2:"MY",ISO3:"MYS",name:"Malaysia"},{ISO2:"YT",ISO3:"MYT",name:"Mayotte"},{ISO2:"NA",ISO3:"NAM",name:"Namibia"},{ISO2:"NC",ISO3:"NCL",name:"New Caledonia"},{ISO2:"NE",ISO3:"NER",name:"Niger"},{ISO2:"NF",ISO3:"NFK",name:"Norfolk Island"},{ISO2:"NG",ISO3:"NGA",name:"Nigeria"},{ISO2:"NI",ISO3:"NIC",name:"Nicaragua"},{ISO2:"NU",ISO3:"NIU",name:"Niue"},{ISO2:"NL",ISO3:"NLD",name:"Netherlands"},{ISO2:"NO",ISO3:"NOR",name:"Norway"},{ISO2:"NP",ISO3:"NPL",name:"Nepal"},{ISO2:"NR",ISO3:"NRU",name:"Nauru"},{ISO2:"NZ",ISO3:"NZL",name:"New Zealand"},{ISO2:"OM",ISO3:"OMN",name:"Oman"},{ISO2:"PK",ISO3:"PAK",name:"Pakistan"},{ISO2:"PA",ISO3:"PAN",name:"Panama"},{ISO2:"PN",ISO3:"PCN",name:"Pitcairn Islands"},{ISO2:"PE",ISO3:"PER",name:"Peru"},{ISO2:"PH",ISO3:"PHL",name:"Philippines"},{ISO2:"PW",ISO3:"PLW",name:"Palau"},{ISO2:"PG",ISO3:"PNG",name:"Papua New Guinea"},{ISO2:"PL",ISO3:"POL",name:"Poland"},{ISO2:"PR",ISO3:"PRI",name:"Puerto Rico"},{ISO2:"KP",ISO3:"PRK",name:"North Korea"},{ISO2:"PT",ISO3:"PRT",name:"Portugal"},{ISO2:"PY",ISO3:"PRY",name:"Paraguay"},{ISO2:"PS",ISO3:"PSE",name:"Palestine"},{ISO2:"PF",ISO3:"PYF",name:"French Polynesia"},{ISO2:"QA",ISO3:"QAT",name:"Qatar"},{ISO2:"RE",ISO3:"REU",name:"R\xe9union"},{ISO2:"RO",ISO3:"ROU",name:"Romania"},{ISO2:"RU",ISO3:"RUS",name:"Russia"},{ISO2:"RW",ISO3:"RWA",name:"Rwanda"},{ISO2:"SA",ISO3:"SAU",name:"Saudi Arabia"},{ISO2:"SD",ISO3:"SDN",name:"Sudan"},{ISO2:"SN",ISO3:"SEN",name:"Senegal"},{ISO2:"SG",ISO3:"SGP",name:"Singapore"},{ISO2:"GS",ISO3:"SGS",name:"South Georgia"},{ISO2:"SJ",ISO3:"SJM",name:"Svalbard and Jan Mayen"},{ISO2:"SB",ISO3:"SLB",name:"Solomon Islands"},{ISO2:"SL",ISO3:"SLE",name:"Sierra Leone"},{ISO2:"SV",ISO3:"SLV",name:"El Salvador"},{ISO2:"SM",ISO3:"SMR",name:"San Marino"},{ISO2:"SO",ISO3:"SOM",name:"Somalia"},{ISO2:"PM",ISO3:"SPM",name:"Saint Pierre and Miquelon"},{ISO2:"RS",ISO3:"SRB",name:"Serbia"},{ISO2:"SS",ISO3:"SSD",name:"South Sudan"},{ISO2:"ST",ISO3:"STP",name:"S\xe3o Tom\xe9 and Pr\xedncipe"},{ISO2:"SR",ISO3:"SUR",name:"Suriname"},{ISO2:"SK",ISO3:"SVK",name:"Slovakia"},{ISO2:"SI",ISO3:"SVN",name:"Slovenia"},{ISO2:"SE",ISO3:"SWE",name:"Sweden"},{ISO2:"SZ",ISO3:"SWZ",name:"Eswatini"},{ISO2:"SX",ISO3:"SXM",name:"Sint Maarten"},{ISO2:"SC",ISO3:"SYC",name:"Seychelles"},{ISO2:"SY",ISO3:"SYR",name:"Syria"},{ISO2:"TC",ISO3:"TCA",name:"Turks and Caicos Islands"},{ISO2:"TD",ISO3:"TCD",name:"Chad"},{ISO2:"TG",ISO3:"TGO",name:"Togo"},{ISO2:"TH",ISO3:"THA",name:"Thailand"},{ISO2:"TJ",ISO3:"TJK",name:"Tajikistan"},{ISO2:"TK",ISO3:"TKL",name:"Tokelau"},{ISO2:"TM",ISO3:"TKM",name:"Turkmenistan"},{ISO2:"TL",ISO3:"TLS",name:"Timor-Leste"},{ISO2:"TO",ISO3:"TON",name:"Tonga"},{ISO2:"TT",ISO3:"TTO",name:"Trinidad and Tobago"},{ISO2:"TN",ISO3:"TUN",name:"Tunisia"},{ISO2:"TR",ISO3:"TUR",name:"Turkey"},{ISO2:"TV",ISO3:"TUV",name:"Tuvalu"},{ISO2:"TW",ISO3:"TWN",name:"Taiwan"},{ISO2:"TZ",ISO3:"TZA",name:"Tanzania"},{ISO2:"UG",ISO3:"UGA",name:"Uganda"},{ISO2:"UA",ISO3:"UKR",name:"Ukraine"},{ISO2:"UM",ISO3:"UMI",name:"United States Minor Outlying Islands"},{ISO2:"UY",ISO3:"URY",name:"Uruguay"},{ISO2:"US",ISO3:"USA",name:"United States"},{ISO2:"UZ",ISO3:"UZB",name:"Uzbekistan"},{ISO2:"VA",ISO3:"VAT",name:"Vatican City"},{ISO2:"VC",ISO3:"VCT",name:"Saint Vincent and the Grenadines"},{ISO2:"VE",ISO3:"VEN",name:"Venezuela"},{ISO2:"VG",ISO3:"VGB",name:"British Virgin Islands"},{ISO2:"VI",ISO3:"VIR",name:"United States Virgin Islands"},{ISO2:"VN",ISO3:"VNM",name:"Vietnam"},{ISO2:"VU",ISO3:"VUT",name:"Vanuatu"},{ISO2:"WF",ISO3:"WLF",name:"Wallis and Futuna"},{ISO2:"WS",ISO3:"WSM",name:"Samoa"},{ISO2:"YE",ISO3:"YEM",name:"Yemen"},{ISO2:"ZA",ISO3:"ZAF",name:"South Africa"},{ISO2:"ZM",ISO3:"ZMB",name:"Zambia"},{ISO2:"ZW",ISO3:"ZWE",name:"Zimbabwe"}],I=Object(h.a)(function(e,t){var r,n;e.exports=(r=function(e){return Array.prototype.toString.call(e)},n=function(e,t){try{var r=document.createElement("canvas");r.width=1,r.height=1;var n=r.getContext("2d");return n.textBaseline="top",n.font="100px -no-font-family-here-",n.fillStyle=t,n.scale(.01,.01),n.fillText(e,0,0),n.getImageData(0,0,1,1).data}catch(e){return!1}},function(e){var t=n(e,"#000"),a=n(e,"#fff");return t&&a&&function(e,t){var n=r(e);return n===r(t)&&"0,0,0,0"!==n}(t,a)})})("\ud83c\udde7\ud83c\uddf9"),E=function(e){function t(){return Object(h.d)(this,t),Object(h.e)(this,Object(h.f)(t).apply(this,arguments))}return Object(h.c)(t,d.PureComponent),Object(h.g)(t,[{key:"render",value:function(){var e=this.props,t=e.iso,r=e.iso2,n=e.svg,a=e.size,i=e.margin;if(!t&&!r)return console.error(" Country flag iso (iso 3) or iso2 code is required"),null;r&&console.warn("iso2 parameter is deprecated, use iso instead");var o=function(e){var t,r,n;if(2===e.length)t=e.toLowerCase(),r=t.toUpperCase(),n=O.find(function(e){return e.ISO2===r});else{if(3!==e.length)throw new Error(e," is not an ISO 2 nor ISO 3 code");var a=e.toUpperCase();n=O.find(function(e){return e.ISO3===a}),t=(r=n.ISO2).toLowerCase()}if(void 0===n)throw new Error("Could not find a country corresponding to provided ISO:",e);var i=null;return I&&(i=String.fromCodePoint(r.codePointAt(0)+127397,r.codePointAt(1)+127397)),{emoji:i,svg:"https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/flags/4x3/{iso2}.svg".replace("{iso2}",t),name:n.name}}(t||r);return!0===n||null===o.emoji?_.a.createElement("img",{style:{height:a,marginRight:i.right,marginLeft:i.left},alt:o.name,src:o.svg}):_.a.createElement("span",{style:{fontSize:a},role:"img","aria-label":o.name},o.emoji)}}]),t}();E.propTypes={iso:S.string.isRequired,svg:S.bool,size:S.string,margin:S.shape({left:S.string,righ:S.string})},E.defaultProps={svg:!1,size:"1em",margin:{left:"0.1em",right:"0.2em"}};var T=r(139),w=r.n(T),A=r(102),M=r.n(A),P=r(17),L=r(32),x=r.n(L),C=r(40),j=r(232),R=r(57),k=new RegExp("\xa0","g"),D=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\s/gi,"\xa0")},N=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(k," ")},F=function(e){return e.replace(/[.*+?^${}\/()|[\]\\]/g,"")},B=function(e){return e?e.replace(/:/gi," ").replace(/,/gi," ").split(" ").filter(function(e){return e}):[]},U=function(e){return null===e?{}:e.reduce(function(e,t){var r=t.type,n=t.id,a=t.label;return e[r]?(e[r].values.push({id:n,label:a}),e):Object(P.a)({},e,Object(R.a)({},r,{type:r,values:[{id:n,label:a}]}))},{})},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",r=Object.values(e).length-1;return Object.values(e).reduce(function(e,n,a){return"".concat(""!==e?"".concat(e," "):"").concat(n.type,":").concat(n.values.map(function(e){return D(e.label)}).join(",")).concat(a===r?t:"")},"")}(U(e),t)},z={flag:"flag",rfmo:"rfmo",vessel:"vessel",after:"after",before:"before",port:"port"},H=[z.flag,z.rfmo,z.vessel,z.after,z.before],G=[z.vessel],q=[z.after,z.before],K=function(e){var t=e.itemToString,r=e.setDownshiftRef,n=e.downshiftRefLoaded,i=e.initialInputValue,o=e.initialSelection,s=e.onChange,u=e.customEventHandler,c=e.stateReducer,l=e.items,f=e.onStateChange,h=e.loading?[].concat(Object(p.a)(l),[{type:"loading",id:"loading",label:"loading"}]):l;return a.a.createElement(C.a,{onChange:s,initialInputValue:i,initialSelectedItem:o,stateReducer:c,itemToString:t,onStateChange:f,defaultHighlightedIndex:0},function(e){!1===n&&r(e);var i=e.getInputProps,o=e.getMenuProps,s=e.getItemProps,c=e.isOpen,l=e.inputValue,f=e.selectedItem,d=e.highlightedIndex;return a.a.createElement("div",{className:x.a.searchContainer},a.a.createElement("div",null,!c&&a.a.createElement("div",{className:x.a.searchErrorsContainer},function(e,t){if(!e)return"";var r=null!==t?Array.from(new Set([].concat(Object(p.a)(t.map(function(e){return D(e.label)})),Object(p.a)(t.map(function(e){return e.type}))))):[],n=B(e).filter(function(e){return!r.some(function(t){return t===e})}),i=F(e);return n.length&&n.forEach(function(e){i=i.replace(new RegExp("\\b".concat(F(e),"\\b"),"g"),"<span class=".concat(x.a.searchItemError,">").concat(e,"</span>"))}),a.a.createElement("span",{dangerouslySetInnerHTML:{__html:i}})}(l||"",f)),a.a.createElement("input",Object.assign({className:x.a.searchInput},i({placeholder:"Start searching",onKeyDown:void 0!==u?function(t){return u(t,e)}:void 0,onClick:void 0!==u?function(t){return u(t,e)}:void 0}),{spellCheck:!1}))),c?a.a.createElement("div",{className:x.a.optionListContainer},h.length>0?a.a.createElement(j.a,Object.assign({height:300,itemSize:40,itemCount:h.length,outerElementType:"ul",className:x.a.optionList},o()),function(e){var r=e.index,n=e.style,i=h[r];return"loading"===i.type?a.a.createElement("li",{key:i.id,className:x.a.optionlistItemLoading,style:Object(P.a)({},n)},a.a.createElement("span",{className:x.a.spinner})):a.a.createElement("li",Object.assign({key:i.id,className:x.a.optionlistItem},s({item:i,index:r}),{style:Object(P.a)({},n,{backgroundColor:d===r?"#ccc":"transparent",color:f===i?"#0f0f0f":"#000"})}),a.a.createElement("div",{className:x.a.optionListText},i.type,":"," ",i.type===z.flag&&a.a.createElement(E,{iso:i.id})," ",t(i)),d===r&&a.a.createElement("span",{className:x.a.optionlistItemPlaceholder},function(e){var t="Press \u23ce to";switch(e){case z.flag:return"".concat(t," see the activity of carriers from this flag state");case z.rfmo:return"".concat(t," see the activity that occurred in this RFMO area");case z.after:return"".concat(t," see the activity that occurred after this date");case z.before:return"".concat(t," see the activity that occurred before this date");case z.vessel:return"".concat(t," see the activity from this carrier");default:return"".concat(t," select")}}(i.type)))}):a.a.createElement("span",{className:x.a.optionlistItem},"There are no filters matching your query")):null)})},$=r(60),Y=r(80),W=r.n(Y),Z=r(42),X=function(e,t,r){for(var n=t&&t.map(function(e){return e.type})||[],a=t&&t.map(function(e){return e.label})||[],i={},o=B(e).map(N).filter(function(e){return n.includes(e)?!!i[e]||(i[e]=!0,!1):!a.includes(e)}),s=0,u=r;u>0;u--)if(":"===e[u]){s=u;break}if(-1===e.slice(s,r+1).indexOf(" ")){for(var c=0,l=s;l>0;l--)if(" "===e[l]){c=l+1;break}var p=e.slice(c,s);p&&o.push(p)}return Array.from(new Set(o))},J=Object(Z.a)(function(e,t){return e.reduce(function(e,t){return Object($.a)(e,t,{keys:[{key:"type",threshold:$.b.EQUAL},{key:"label",threshold:$.b.WORD_STARTS_WITH}]})},t)}),Q=Object(Z.a)(function(e,t){return t.length>0?e.filter(function(e){return!t.includes(e.id)}):e}),ee=function(e,t,r,n){if(!t)return e;var a=r&&r.map(function(e){return e.id})||[],i=X(t,r,n),o=Q(e,a);return J(i,o)},te=r(136),re=r.n(te),ne=function(e){var t=e.selectedItems,r=e.onChange,i=function(e,t){var r={loading:!1,staticData:e,selectedItem:[],cursorPosition:0,search:t||"",results:e,cachedResults:e},a=Object(n.useReducer)(function(e,t){switch(t.type){case"inputChange":return Object(P.a)({},e,{search:t.payload.search,selectedItem:t.payload.selectedItem});case"setCursorPosition":return Object(P.a)({},e,{cursorPosition:t.payload});case"startSearch":var r=e.staticData,n=e.search,a=e.selectedItem,i=e.cursorPosition;return Object(P.a)({},e,{results:ee(r,n,a,i),loading:t.payload});case"endSearch":return Object(P.a)({},e,{results:[].concat(Object(p.a)(e.results),Object(p.a)(t.payload)),cachedResults:W()([].concat(Object(p.a)(e.cachedResults),Object(p.a)(t.payload)),"id"),loading:!1});default:return e}},r),i=Object(f.a)(a,2),o=i[0],s=i[1],u=o.search,c=o.selectedItem,l=o.cursorPosition;return Object(n.useEffect)(function(){var e=X(u,c,l),t=e.filter(function(e){return H.includes(e)}),r=0===t.length||t.some(function(e){return G.includes(e)}),n=c.map(function(e){return e.id}),a=c.map(function(e){return e.label}),i=e.filter(function(e){return!a.includes(e)&&!H.includes(e)}).join(","),o=r&&""!==i;if(s({type:"startSearch",payload:o}),o){var p=new AbortController,f="https://vessels-dot-world-fishing-827.appspot.com/datasets/indonesia/vessels?query=".concat(i,"&offset=0");return fetch(f,{signal:p.signal}).then(function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}).then(function(e){return e.json()}).then(function(e){var t=e.entries.filter(function(e){return e.name}).map(function(e){return{id:e.vesselId,label:e.name,type:"vessel"}}).filter(function(e){return!n.includes(e.id)});s({type:"endSearch",payload:t})}).catch(function(e){"AbortError"!==e.name&&console.error("Oops!",e),s({type:"endSearch",payload:[]})}),function(){return p.abort()}}},[u,l,c]),[o,s]}(e.staticOptions,""),o=Object(f.a)(i,2),s=o[0],u=o[1],c=s.results,l=s.loading,h=s.cachedResults,d=Object(n.useMemo)(function(){return re()(function(e){u({type:"inputChange",payload:e})},100)},[u]),_=Object(n.useCallback)(function(e,t){if(e.hasOwnProperty("inputValue")){var r=t.inputValue,n=void 0===r?"":r,a=t.selectedItem;d({search:n||"",selectedItem:a})}},[d]),m=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",n=e.selectedItem||[],a=n.some(function(e){return e.type===t.selectedItem.type}),i=q.includes(t.selectedItem.type),o=Object(p.a)(n);i&&!a||!i?o.push(t.selectedItem):o=o.map(function(e){return e.type===t.selectedItem.type?t.selectedItem:e});var s=V(o,r);return Object(P.a)({},t,{selectedItem:o,inputValue:s})},y=function(e,t){var r=e?function(e){return e.split(" ").filter(function(e){return e}).map(function(e){var t=e.split(":"),r=Object(f.a)(t,2),n=r[0],a=r[1];return{type:n,labels:a?a.split(",").map(N).filter(function(e){return e}):[]}})}(e):null;return null!==r?t.filter(function(e){return void 0!==r.find(function(t){return t.type===e.type&&void 0!==t.labels&&t.labels.includes(e.label)})}):[]},g=Object(n.useCallback)(function(e,t){var r={};if(!t.selectedItem||!e.selectedItem)return t;if(e.selectedItem.length===t.selectedItem.length)return t;var n=W()(t.selectedItem,"id").filter(function(e){return!!e&&(void 0!==r[e.type]?!q.includes(e.type):(r[e.type]=!0,!0))}),a=V(n);return Object(P.a)({},t,{inputValue:a,selectedItem:n})},[]),b=Object(n.useCallback)(function(e,t){var r=t.inputValue||"",n=e.selectedItem||[],a=W()([].concat(Object(p.a)(n),Object(p.a)(h)),"id"),i=y(r,a),o=function(e,t){if(!e||!t)return 0;for(var r=Math.max(t.length,e.length),n=0;n<r;n++){if(void 0===e[n])return n-1;if(e[n]!==t[n])return n}return 0}(t.inputValue||"",e.inputValue||"");return u({type:"setCursorPosition",payload:o}),Object(P.a)({},t,{selectedItem:i,isOpen:""!==r&&","!==r[o]})},[h,u]),v=Object(n.useCallback)(function(e,t){switch(t.type){case C.a.stateChangeTypes.keyDownEnter:case C.a.stateChangeTypes.clickItem:return m(e,t);case"keyDownComa":return m(e,t,"");case"externalChanges":return g(e,t);case C.a.stateChangeTypes.changeInput:return b(e,t);default:return Object(P.a)({},t,{inputValue:t.inputValue||e.inputValue||"",selectedItem:t.selectedItem||e.selectedItem||[]})}},[b,g]),S=Object(n.useCallback)(function(e,t){if("ArrowLeft"===e.key||"ArrowRight"===e.key||"click"===e.type){var r=e.target.selectionStart;u({type:"setCursorPosition",payload:r})}var n=t.highlightedIndex,a=t.inputValue,i=t.setState,o=""!==a&&" "!==a,s=" "===e.key,l=","===e.key,p=1===c.length;if(o&&(s||l)&&p&&(e.nativeEvent.preventDownshiftDefault=!0,null!==n&&n>=0)){var f=c[n];f&&i({type:"keyDownComa",selectedItem:f,inputValue:a})}},[u,c]),O=Object(n.useCallback)(function(e){return e?e.label:""},[]),I=Object(n.useMemo)(function(){return null!==t?V(t):""},[t]),E=Object(n.useMemo)(function(){return t||[]},[t]),T=Object(n.useRef)(null),w=Object(n.useCallback)(function(e){T.current=e},[]);return Object(n.useEffect)(function(){null!==T.current&&(0,T.current.setState)({type:"externalChanges",selectedItem:t})},[t]),a.a.createElement(K,{items:c,loading:l,onChange:r,setDownshiftRef:w,downshiftRefLoaded:null!==T.current,itemToString:O,stateReducer:v,selectedItems:t,initialSelection:E,initialInputValue:I,customEventHandler:S,onStateChange:_})},ae=r(233),ie=r(234),oe=r(247),se=r(235),ue=r(248),ce=r(49),le=r.n(ce),pe=function(e){function t(){var e,r;Object(ae.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=Object(oe.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(i)))).input=a.a.createRef(),r.itemToString=function(e){return e?e.label:""},r.handleChange=function(e){r.props.selectedItems.includes(e)?r.props.onRemoveItem(e):r.props.onSelectedItem(e)},r}return Object(ue.a)(t,e),Object(ie.a)(t,[{key:"getItems",value:function(e){return e?Object($.a)(this.props.options,e,{keys:["label"]}):this.props.options}},{key:"stateReducer",value:function(e,t){switch(t.type){case C.a.stateChangeTypes.keyDownEnter:case C.a.stateChangeTypes.clickItem:return Object(P.a)({},t,{highlightedIndex:e.highlightedIndex,isOpen:!0,inputValue:""});default:return t}}},{key:"render",value:function(){var e=this,t=this.props,r=t.selectedItems,n=t.onRemoveItem;return a.a.createElement(C.a,{stateReducer:this.stateReducer,selectedItem:null,onChange:this.handleChange,itemToString:this.itemToString},function(t){var i=t.getInputProps,o=t.getToggleButtonProps,s=t.getMenuProps,u=t.isOpen,c=t.inputValue,l=t.getItemProps,p=t.highlightedIndex,f=t.toggleMenu;return a.a.createElement("div",{className:le.a.container},a.a.createElement("div",{onClick:function(){f(),!u&&null!==e.input.current&&e.input.current.focus()}},a.a.createElement("div",{className:le.a.selections},r.length>0?r.map(function(e){return a.a.createElement("div",{key:e.id,className:le.a.selectionItem},a.a.createElement("div",null,a.a.createElement("span",null,e.label),a.a.createElement("button",{onClick:function(t){t.stopPropagation(),n(e)},className:le.a.selectionItemRemoveBtn},"\ud835\ude05")))}):"Select a value",a.a.createElement("input",Object.assign({},i({ref:e.input,onKeyUp:function(e){"Backspace"!==e.key||c||n(r[r.length-1])}}),{className:le.a.inputText}))),a.a.createElement("button",Object.assign({},o({onClick:function(e){e.stopPropagation()}}),{className:le.a.toggleBtn}),a.a.createElement("svg",{viewBox:"0 0 20 20",preserveAspectRatio:"none",width:16,fill:"transparent",stroke:"#979797",strokeWidth:"1.1px",transform:u?"rotate(180)":void 0},a.a.createElement("path",{d:"M1,6 L10,15 L19,6"})))),a.a.createElement("ul",Object.assign({},s(),{className:le.a.listContainer}),u?e.getItems(c).map(function(e,t){return a.a.createElement("li",Object.assign({key:e.id},l({item:e,index:t}),{style:{backgroundColor:p===t?"#ccc":"transparent",color:r.includes(e)?"#0f0f0f":"#000"}}),e.label)}):null))})}}]),t}(a.a.Component),fe=function(e){return e?"".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate()):""},he=[2017],de=he.flatMap(function(e){return Array.from(Array(12).keys()).reduce(function(t,r){var n=new Date(Date.UTC(e,r+1,0)).getDate(),a=Array.from(Array(n).keys()).reduce(function(t,n){var a=new Date(Date.UTC(e,r,n+1));return t.push({id:a.toISOString(),label:fe(a)}),t},[]);return[].concat(Object(p.a)(t),Object(p.a)(a))},[])}),_e=new Date(Date.UTC(he[he.length-1]+1,0)),me={id:_e.toISOString(),label:fe(_e)},ye=[{id:"ICCAT",label:"ICCAT"},{id:"IOTC",label:"IOTC"},{id:"WCPFC",label:"WCPFC"},{id:"IATTC",label:"IATTC"},{id:"AIDCP",label:"AIDCP"},{id:"CCSBT",label:"CCSBT"}].map(function(e){return Object(P.a)({},e,{type:z.rfmo})}),ge=[{id:"ABW",label:"Aruba"},{id:"AFG",label:"Afghanistan"},{id:"AGO",label:"Angola"},{id:"AIA",label:"Anguilla"},{id:"ALA",label:"\xc5land Islands"},{id:"ALB",label:"Albania"},{id:"AND",label:"Andorra"},{id:"ARE",label:"United Arab Emirates"},{id:"ARG",label:"Argentina"},{id:"ARM",label:"Armenia"},{id:"ASM",label:"American Samoa"},{id:"ATA",label:"Antarctica"},{id:"ATF",label:"French Southern and Antarctic Lands"},{id:"ATG",label:"Antigua and Barbuda"},{id:"AUS",label:"Australia"},{id:"AUT",label:"Austria"},{id:"AZE",label:"Azerbaijan"},{id:"BDI",label:"Burundi"},{id:"BEL",label:"Belgium"},{id:"BEN",label:"Benin"},{id:"BFA",label:"Burkina Faso"},{id:"BGD",label:"Bangladesh"},{id:"BGR",label:"Bulgaria"},{id:"BHR",label:"Bahrain"},{id:"BHS",label:"Bahamas"},{id:"BIH",label:"Bosnia and Herzegovina"},{id:"BLM",label:"Saint Barth\xe9lemy"},{id:"SHN",label:"Saint Helena Ascension and Tristan da Cunha"},{id:"BLR",label:"Belarus"},{id:"BLZ",label:"Belize"},{id:"BMU",label:"Bermuda"},{id:"BOL",label:"Bolivia"},{id:"BES",label:"Caribbean Netherlands"},{id:"BRA",label:"Brazil"},{id:"BRB",label:"Barbados"},{id:"BRN",label:"Brunei"},{id:"BTN",label:"Bhutan"},{id:"BVT",label:"Bouvet Island"},{id:"BWA",label:"Botswana"},{id:"CAF",label:"Central African Republic"},{id:"CAN",label:"Canada"},{id:"CCK",label:"Cocos (Keeling) Islands"},{id:"CHE",label:"Switzerland"},{id:"CHL",label:"Chile"},{id:"CHN",label:"China"},{id:"CIV",label:"Ivory Coast"},{id:"CMR",label:"Cameroon"},{id:"COD",label:"DR Congo"},{id:"COG",label:"Republic of the Congo"},{id:"COK",label:"Cook Islands"},{id:"COL",label:"Colombia"},{id:"COM",label:"Comoros"},{id:"CPV",label:"Cape Verde"},{id:"CRI",label:"Costa Rica"},{id:"CUB",label:"Cuba"},{id:"CUW",label:"Cura\xe7ao"},{id:"CXR",label:"Christmas Island"},{id:"CYM",label:"Cayman Islands"},{id:"CYP",label:"Cyprus"},{id:"CZE",label:"Czechia"},{id:"DEU",label:"Germany"},{id:"DJI",label:"Djibouti"},{id:"DMA",label:"Dominica"},{id:"DNK",label:"Denmark"},{id:"DOM",label:"Dominican Republic"},{id:"DZA",label:"Algeria"},{id:"ECU",label:"Ecuador"},{id:"EGY",label:"Egypt"},{id:"ERI",label:"Eritrea"},{id:"ESH",label:"Western Sahara"},{id:"ESP",label:"Spain"},{id:"EST",label:"Estonia"},{id:"ETH",label:"Ethiopia"},{id:"FIN",label:"Finland"},{id:"FJI",label:"Fiji"},{id:"FLK",label:"Falkland Islands"},{id:"FRA",label:"France"},{id:"FRO",label:"Faroe Islands"},{id:"FSM",label:"Micronesia"},{id:"GAB",label:"Gabon"},{id:"GBR",label:"United Kingdom"},{id:"GEO",label:"Georgia"},{id:"GGY",label:"Guernsey"},{id:"GHA",label:"Ghana"},{id:"GIB",label:"Gibraltar"},{id:"GIN",label:"Guinea"},{id:"GLP",label:"Guadeloupe"},{id:"GMB",label:"Gambia"},{id:"GNB",label:"Guinea-Bissau"},{id:"GNQ",label:"Equatorial Guinea"},{id:"GRC",label:"Greece"},{id:"GRD",label:"Grenada"},{id:"GRL",label:"Greenland"},{id:"GTM",label:"Guatemala"},{id:"GUF",label:"French Guiana"},{id:"GUM",label:"Guam"},{id:"GUY",label:"Guyana"},{id:"HKG",label:"Hong Kong"},{id:"HMD",label:"Heard Island and McDonald Islands"},{id:"HND",label:"Honduras"},{id:"HRV",label:"Croatia"},{id:"HTI",label:"Haiti"},{id:"HUN",label:"Hungary"},{id:"IDN",label:"Indonesia"},{id:"IMN",label:"Isle of Man"},{id:"IND",label:"India"},{id:"IOT",label:"British Indian Ocean Territory"},{id:"IRL",label:"Ireland"},{id:"IRN",label:"Iran"},{id:"IRQ",label:"Iraq"},{id:"ISL",label:"Iceland"},{id:"ISR",label:"Israel"},{id:"ITA",label:"Italy"},{id:"JAM",label:"Jamaica"},{id:"JEY",label:"Jersey"},{id:"JOR",label:"Jordan"},{id:"JPN",label:"Japan"},{id:"KAZ",label:"Kazakhstan"},{id:"KEN",label:"Kenya"},{id:"KGZ",label:"Kyrgyzstan"},{id:"KHM",label:"Cambodia"},{id:"KIR",label:"Kiribati"},{id:"KNA",label:"Saint Kitts and Nevis"},{id:"KOR",label:"South Korea"},{id:"UNK",label:"Kosovo"},{id:"KWT",label:"Kuwait"},{id:"LAO",label:"Laos"},{id:"LBN",label:"Lebanon"},{id:"LBR",label:"Liberia"},{id:"LBY",label:"Libya"},{id:"LCA",label:"Saint Lucia"},{id:"LIE",label:"Liechtenstein"},{id:"LKA",label:"Sri Lanka"},{id:"LSO",label:"Lesotho"},{id:"LTU",label:"Lithuania"},{id:"LUX",label:"Luxembourg"},{id:"LVA",label:"Latvia"},{id:"MAC",label:"Macau"},{id:"MAF",label:"Saint Martin"},{id:"MAR",label:"Morocco"},{id:"MCO",label:"Monaco"},{id:"MDA",label:"Moldova"},{id:"MDG",label:"Madagascar"},{id:"MDV",label:"Maldives"},{id:"MEX",label:"Mexico"},{id:"MHL",label:"Marshall Islands"},{id:"MKD",label:"Macedonia"},{id:"MLI",label:"Mali"},{id:"MLT",label:"Malta"},{id:"MMR",label:"Myanmar"},{id:"MNE",label:"Montenegro"},{id:"MNG",label:"Mongolia"},{id:"MNP",label:"Northern Mariana Islands"},{id:"MOZ",label:"Mozambique"},{id:"MRT",label:"Mauritania"},{id:"MSR",label:"Montserrat"},{id:"MTQ",label:"Martinique"},{id:"MUS",label:"Mauritius"},{id:"MWI",label:"Malawi"},{id:"MYS",label:"Malaysia"},{id:"MYT",label:"Mayotte"},{id:"NAM",label:"Namibia"},{id:"NCL",label:"New Caledonia"},{id:"NER",label:"Niger"},{id:"NFK",label:"Norfolk Island"},{id:"NGA",label:"Nigeria"},{id:"NIC",label:"Nicaragua"},{id:"NIU",label:"Niue"},{id:"NLD",label:"Netherlands"},{id:"NOR",label:"Norway"},{id:"NPL",label:"Nepal"},{id:"NRU",label:"Nauru"},{id:"NZL",label:"New Zealand"},{id:"OMN",label:"Oman"},{id:"PAK",label:"Pakistan"},{id:"PAN",label:"Panama"},{id:"PCN",label:"Pitcairn Islands"},{id:"PER",label:"Peru"},{id:"PHL",label:"Philippines"},{id:"PLW",label:"Palau"},{id:"PNG",label:"Papua New Guinea"},{id:"POL",label:"Poland"},{id:"PRI",label:"Puerto Rico"},{id:"PRK",label:"North Korea"},{id:"PRT",label:"Portugal"},{id:"PRY",label:"Paraguay"},{id:"PSE",label:"Palestine"},{id:"PYF",label:"French Polynesia"},{id:"QAT",label:"Qatar"},{id:"REU",label:"R\xe9union"},{id:"ROU",label:"Romania"},{id:"RUS",label:"Russia"},{id:"RWA",label:"Rwanda"},{id:"SAU",label:"Saudi Arabia"},{id:"SDN",label:"Sudan"},{id:"SEN",label:"Senegal"},{id:"SGP",label:"Singapore"},{id:"SGS",label:"South Georgia"},{id:"SJM",label:"Svalbard and Jan Mayen"},{id:"SLB",label:"Solomon Islands"},{id:"SLE",label:"Sierra Leone"},{id:"SLV",label:"El Salvador"},{id:"SMR",label:"San Marino"},{id:"SOM",label:"Somalia"},{id:"SPM",label:"Saint Pierre and Miquelon"},{id:"SRB",label:"Serbia"},{id:"SSD",label:"South Sudan"},{id:"STP",label:"S\xe3o Tom\xe9 and Pr\xedncipe"},{id:"SUR",label:"Suriname"},{id:"SVK",label:"Slovakia"},{id:"SVN",label:"Slovenia"},{id:"SWE",label:"Sweden"},{id:"SWZ",label:"Eswatini"},{id:"SXM",label:"Sint Maarten"},{id:"SYC",label:"Seychelles"},{id:"SYR",label:"Syria"},{id:"TCA",label:"Turks and Caicos Islands"},{id:"TCD",label:"Chad"},{id:"TGO",label:"Togo"},{id:"THA",label:"Thailand"},{id:"TJK",label:"Tajikistan"},{id:"TKL",label:"Tokelau"},{id:"TKM",label:"Turkmenistan"},{id:"TLS",label:"Timor-Leste"},{id:"TON",label:"Tonga"},{id:"TTO",label:"Trinidad and Tobago"},{id:"TUN",label:"Tunisia"},{id:"TUR",label:"Turkey"},{id:"TUV",label:"Tuvalu"},{id:"TWN",label:"Taiwan"},{id:"TZA",label:"Tanzania"},{id:"UGA",label:"Uganda"},{id:"UKR",label:"Ukraine"},{id:"UMI",label:"United States Minor Outlying Islands"},{id:"URY",label:"Uruguay"},{id:"USA",label:"United States"},{id:"UZB",label:"Uzbekistan"},{id:"VAT",label:"Vatican City"},{id:"VCT",label:"Saint Vincent and the Grenadines"},{id:"VEN",label:"Venezuela"},{id:"VGB",label:"British Virgin Islands"},{id:"VIR",label:"United States Virgin Islands"},{id:"VNM",label:"Vietnam"},{id:"VUT",label:"Vanuatu"},{id:"WLF",label:"Wallis and Futuna"},{id:"WSM",label:"Samoa"},{id:"YEM",label:"Yemen"},{id:"ZAF",label:"South Africa"},{id:"ZMB",label:"Zambia"},{id:"ZWE",label:"Zimbabwe"}].map(function(e){return Object(P.a)({},e,{type:z.flag})}),be=Array.from(Array(500).keys()).map(function(e){return{id:e.toString(),label:"Port ".concat(e),type:z.port}}),ve=de.map(function(e){return Object(P.a)({},e,{type:z.after})}),Se=de.map(function(e){return Object(P.a)({},e,{type:z.before})});Se.push(Object(P.a)({},me,{type:z.before}));var Oe=[].concat(Object(p.a)(ye),Object(p.a)(ge),Object(p.a)(be),Object(p.a)(ve),Object(p.a)(Se)),Ie=function(){var e=Object(n.useMemo)(function(){var e=w.a.parse(window.location.search,{ignoreQueryPrefix:!0});return e&&e.search?e.search:[]},[]),t=Object(n.useState)(e),r=Object(f.a)(t,2),i=r[0],o=r[1],s=Object(n.useCallback)(function(e){o(e);var t=w.a.stringify({search:e},{addQueryPrefix:!0}),r=window.location.origin+window.location.pathname+t;window.history.replaceState(window.history.state,"",r)},[]),u=Object(n.useMemo)(function(){return U(i||[])},[i]),c=function(e){o([].concat(Object(p.a)(i),[e]))},l=function(e){o(i.filter(function(t){return t!==e}))},h=function(e){return i.filter(function(t){return t.type===e})};return a.a.createElement("div",{className:M.a.app},a.a.createElement(ne,{staticOptions:Oe,selectedItems:i,onChange:s}),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){o([])}},"Remove selection")),a.a.createElement("div",null,a.a.createElement(pe,{options:ge,selectedItems:h("flag"),onSelectedItem:c,onRemoveItem:l}),a.a.createElement(pe,{options:ye,selectedItems:h("rfmo"),onSelectedItem:c,onRemoveItem:l})),a.a.createElement("div",{className:M.a.selectionContainer},a.a.createElement("h2",null,"Current filter selection by"),null!==u?a.a.createElement("ul",{className:M.a.selectionList},Object.keys(z).map(function(e){return a.a.createElement("li",{key:e},a.a.createElement("strong",null,(t=e).charAt(0).toUpperCase()+t.slice(1)),":"," ",void 0!==u[e]?u[e].values.map(function(t,r){return a.a.createElement("span",{key:t.id},e===z.flag&&a.a.createElement(E,{iso:t.id}),t.label,"(",t.id,")",r===u[e].values.length-1?"":",")}):a.a.createElement("span",null,"no filter"));var t})):a.a.createElement("span",null,"none")))},Ee=r(246),Te=r(236),we=r(53),Ae=r.n(we),Me=(r(342),r(141)),Pe=r.n(Me),Le={id:"Track example",color:"#FE81EB",type:"geojson",fitBoundsOnLoad:!0,data:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:"4447430-2018-08-20T03:34:00.000000Z",type:"track",coordinateProperties:{times:[153473604e4,15363834e5,153654738e4,153665244e4,153665604e4,153665964e4,15366633e5,153666684e4,153668484e4,153668844e4,153669204e4,153672804e4,153675324e4,153675684e4,153676044e4,15367641e5,153676764e4,153677124e4,153677484e4,153677844e4,153678204e4,153678564e4,153678924e4,153679284e4,153679644e4,153680004e4,153680364e4,153680724e4,153681084e4,153681444e4,153681804e4,153682164e4,153682524e4,153682884e4,153683244e4,153683604e4,153683964e4,153684324e4,153684684e4,153685044e4,15368541e5,153685764e4,153686124e4,153686484e4,153686844e4,15368721e5,153687564e4,153687924e4,153688284e4,153688644e4,153689004e4,153689364e4,153689724e4,15369009e5,153690444e4,153690804e4,153691524e4,153692244e4,153692604e4,153693372e4,153694404e4,153695124e4,153696924e4,153697284e4,15370197e5,15370233e5,153703404e4,153705564e4,153705924e4,153706284e4,153706644e4,153707004e4,153707364e4,153708084e4,153719964e4,153721044e4,153721404e4,153721764e4,153722124e4,153722484e4,15372285e5,153723204e4,153723564e4,153723924e4,153724284e4,15372465e5,153725004e4,153725364e4,153725724e4,153726084e4,153726444e4,153726804e4,15372753e5,153727884e4,153728604e4,153729324e4,153729684e4,153730044e4,153730404e4,153730764e4,153731124e4,153731484e4,153731844e4,153732204e4,153732564e4,153732924e4,153733284e4,153733644e4,153734004e4,153734364e4,15373473e5,15373509e5,15373545e5,153735804e4,153736164e4,153736524e4,153736884e4,153737244e4,153737604e4,153737964e4,153738324e4,153738684e4,153739044e4,153739404e4,153739764e4,153740124e4,153740484e4,153740844e4,153741204e4,153741564e4,15374193e5,153742284e4,15374265e5,153743004e4,153743364e4,153743724e4,153744084e4,153745524e4,15374589e5,153747324e4,15374805e5,153748404e4,15374877e5,153749124e4,153749484e4,153749844e4,153750204e4,153750564e4,15375093e5,153751284e4,15375201e5,153752724e4,153753084e4,153753444e4,153754884e4,153755964e4,153756684e4,153757404e4,153757764e4,153758124e4,153765684e4,153766044e4,153766404e4,153766764e4,153767124e4,153767484e4,153769644e4,153770004e4,153770724e4,15377109e5,153773604e4,153774324e4,153774684e4,153775044e4,15377541e5,15377577e5,153778644e4,153779004e4,153779364e4,15378261e5,153782964e4,153783324e4,153784764e4,153785124e4,153785844e4,153786204e4,153786564e4,153786924e4,153787644e4,153789084e4,153789444e4,15379737e5,153797724e4,15379809e5,153798444e4,153798804e4,153799884e4,153800244e4,153800604e4,15380097e5,153801324e4,15380169e5,153802044e4,153802404e4,153802764e4,153804204e4,153809244e4,153809604e4,15380997e5,153811044e4,15381141e5,153811764e4,153812484e4,153814284e4,153820404e4,153820764e4,153821124e4,15382185e5,153825804e4,15382617e5,153826524e4,15382689e5,15382725e5,153827604e4,153827964e4,153828324e4,153829044e4,153829764e4,153830124e4,15383157e5,153835164e4,153835524e4,15383589e5,15383625e5,153836964e4,153837324e4,153837684e4,153838044e4,153838404e4,153839484e4,153839844e4,153842724e4,153843084e4,153843444e4,153844524e4,153845244e4,153847764e4,153848124e4,153848484e4,153850644e4,153851004e4,153851364e4,153851724e4,153853164e4,15385353e5,153856044e4,153856404e4,15385677e5,153857484e4,15385821e5,153859284e4,153859644e4,153860364e4,153862884e4,153866484e4,153867564e4,153868284e4,15386865e5,153869004e4,153869364e4,153869724e4,153871884e4,153872964e4,153874404e4,153874764e4,153875124e4,153877644e4,15387801e5,153878364e4,153878724e4,153879444e4,153879804e4,153880884e4,153881244e4,153881964e4,153882324e4,15388269e5,153883044e4,15388341e5,153883764e4,153884124e4,153884484e4,153885204e4,153886284e4,15388665e5,153887004e4,15388737e5,153887724e4,153889884e4,15389025e5,15389061e5,153892764e4,153893484e4,153894564e4,153894924e4,15389529e5,153895644e4,15389601e5,153896364e4,153896724e4,153897084e4,153897804e4,153898164e4,153898524e4,15389889e5,153899244e4,15390105e5,15390213e5,153902844e4,153903204e4,153903564e4,153903924e4,153904284e4,15390465e5,153905364e4,153906804e4,153907164e4,153908244e4,153908604e4,153908964e4,15390933e5,153910044e4,153910764e4,153911484e4,153912204e4,153912564e4,153912924e4,15391329e5,153913644e4,153914004e4,153914364e4,153914724e4,153915084e4,15391977e5,153920844e4,15392121e5,15392157e5,153922284e4,153925164e4,153925524e4,153926964e4,153927324e4,15392805e5,153929844e4,153930204e4,15393057e5,153930924e4,153932004e4,153932364e4,153932724e4,15393309e5,153933444e4,153933804e4,153934164e4,153935604e4,153936684e4,15393741e5,153939924e4,15394029e5,153944964e4,153945324e4,153945684e4,153946044e4,153946404e4,153946764e4,153947124e4,153947844e4,153949284e4,153949644e4,153951084e4,153951804e4,153952524e4,153952884e4,153953964e4,153956484e4,153959724e4,153960444e4,15396153e5,153962244e4,153962604e4,153964404e4,153966204e4,15396657e5,153966924e4,153967644e4,153970524e4,15397089e5,153971244e4,153971604e4,153972684e4,153974484e4,15397485e5,153975204e4,15397989e5,15398025e5,15398133e5,15398205e5,15398349e5,15398781e5,15398889e5,15399069e5,15399105e5,153993924e4,15400185e5,15400437e5,15400473e5,15400617e5,15401085e5,15401157e5,15401193e5,15401265e5,15401337e5,15401373e5,15401445e5,15401625e5,15401697e5,15401949e5,15401985e5,15402021e5,15402093e5,15402129e5,15402237e5,15402273e5,15402381e5,15402417e5,15402489e5,15402561e5,15402669e5,15402849e5,15402885e5,15402921e5,15402957e5,15403353e5,15403389e5,15403425e5,15403461e5,15403497e5,15403533e5,15403605e5,15403713e5,15403785e5,15404181e5,15404253e5,15404289e5,15404325e5,15404361e5,15404397e5,15404433e5,15404901e5,15404937e5,15404973e5,15405117e5,15405189e5,15405225e5,15405297e5,15405333e5,15405513e5,15405585e5,15405621e5,15405693e5,15405729e5,15405765e5,15405801e5,15405837e5,15405873e5,15405909e5,15405945e5,15405981e5,15406017e5,15406053e5,15406089e5,15406197e5,15406485e5,15406593e5,15406665e5,15406773e5,15407061e5,15407097e5,15407133e5,15407169e5,15407205e5,15407349e5,15407385e5,15407601e5,15407637e5,15407673e5,15407709e5,15407745e5,15407781e5,15407817e5,15407925e5,15408105e5,15408429e5,15408501e5,15408537e5,15408609e5,15408645e5,15408681e5,15408717e5,15408753e5,15408897e5,15409005e5,15409113e5,15409365e5,15409401e5,15409437e5,15409473e5,15409509e5,15409545e5,15409725e5,15409905e5,15409941e5,15409977e5,15410085e5,15410337e5,15410409e5,15410445e5,15410481e5,15410517e5,15410841e5,15410877e5,15410913e5,15410985e5,15411021e5,15411093e5,15411165e5,15411309e5,15411381e5,15411417e5,15411453e5,15411489e5,15411525e5,15411885e5,15411993e5,15412029e5,15412065e5,15412101e5,15412137e5,15412209e5,15412281e5,15412533e5,15412677e5,15412785e5,15412821e5,15412857e5,15412893e5,15413145e5,15413181e5,15413217e5,15413721e5,15413757e5,15413937e5,15414369e5,15414477e5,15414513e5,15414549e5,15414585e5,15414621e5,15414657e5,15414693e5,15414729e5,15414765e5,15414837e5,15414873e5,15414909e5,15414945e5,15414981e5,15415017e5,15415125e5,15415449e5,15415485e5,15415521e5,15415557e5,15415665e5,15415881e5,15416313e5,15416349e5,15416385e5,15416421e5,15416457e5,15416493e5,15416529e5,15416565e5,15416601e5,15416637e5,15416673e5,15416709e5,15416745e5,15416817e5,15416853e5,15416925e5,15416961e5,15417033e5,15417069e5,15417105e5,15417141e5,15417177e5,15417213e5,15417249e5,15417285e5,15417321e5,15417357e5,15417393e5,15417429e5,15417537e5,15417717e5,15417753e5,15417789e5,15417825e5,15417897e5,15417933e5,15418041e5,15418077e5,15418113e5,15418221e5,15418401e5,15418437e5,15418473e5,15418617e5,15418653e5,15418689e5,15418725e5,15418761e5,15418869e5,15418905e5,15418941e5,15418977e5,15419013e5,15419049e5,15419085e5,15419121e5,15419157e5,15419229e5,15419373e5,15419409e5,15419445e5,15419481e5,15419517e5,15419553e5,15419589e5,15419625e5,15419661e5,15419697e5,15419733e5,15419769e5,15419805e5,15419841e5,15419877e5,15419913e5,15419949e5,15419985e5,15420021e5,15420057e5,15420093e5,15420129e5,15420237e5,15420381e5,15420417e5,15420489e5,15420525e5,15420561e5,15420597e5,15420633e5,15420669e5,15420705e5,15420741e5,15420777e5,15420813e5,15420957e5,15421173e5,15421209e5,15421245e5,15421317e5,15421353e5,15421461e5,15421533e5,15421641e5,15421821e5,15421857e5,15421929e5,15421965e5,15422001e5,15422037e5,15422541e5,15422613e5,15422649e5,15422685e5,15422757e5,15422793e5,15422829e5,15423261e5,15423297e5,15423333e5,15423369e5,15423405e5,15423441e5,15423477e5,15423513e5,15423585e5,15423621e5,15423729e5,15423765e5,15423981e5,15424053e5,15424089e5,15424125e5,15424161e5,15424197e5,15424233e5,15424269e5,15424305e5,15424341e5,15424377e5,15424413e5,15424449e5,15424521e5,15424665e5,15424737e5,15424809e5,15424845e5,15424917e5,15424953e5,15424989e5,15425025e5,15425061e5,15425097e5,15425133e5,15425169e5,15425205e5,15425241e5,15425277e5,15425385e5,15425565e5,15425601e5,15425709e5,15425745e5,15425781e5,15425817e5,15425853e5,15425889e5,15426033e5,15426069e5,15426105e5,15426141e5,15426177e5,15426429e5,15426645e5,15426717e5,15426753e5,15426825e5,15426861e5,15426969e5,154270836e4,154271916e4,15427695e5,154281276e4,15428163e5,15428271e5,15428307e5,15428415e5,15428451e5,15428487e5,15428523e5,15428559e5,15428631e5,154286676e4,15428703e5,15428739e5,15428775e5,15429387e5,15429423e5,15429567e5,15429639e5,15429675e5,15429819e5,15429927e5,15429963e5,154299996e4,15430143e5,15430179e5,15430215e5,15430359e5,15430395e5,15430431e5,15430467e5,15430719e5,15430755e5,15430791e5,15430827e5,15430863e5,15430899e5,15430971e5,15431007e5,15431043e5,154310796e4,154311156e4,15431151e5,15431187e5,154312236e4,15431259e5,15431295e5,15431331e5,15431367e5,154314396e4,15431511e5,15431547e5,15431583e5,154316196e4,15431655e5,154317276e4,15431763e5,154319076e4,15431943e5,15431979e5,15432015e5,154320516e4,15432087e5,15432123e5,15432231e5,15432411e5,15432447e5,15432483e5,15432735e5,154327716e4,15432807e5,15432843e5,15432879e5,15432915e5,15432951e5,15433095e5,15433167e5,154332036e4,15433311e5,154334196e4,154334556e4,15433671e5,15433707e5,15433743e5,15433779e5,154338156e4,15433851e5,15433887e5,15433923e5,15433959e5,15434031e5,15434067e5,15434103e5,15434139e5,15434211e5,15434247e5,15434283e5,15434319e5,15434535e5,15434571e5,15434607e5,15434643e5,15434679e5,15434967e5,15435003e5,15435039e5,15435075e5,154350774e4,15435111e5,15435219e5,154352484e4,15435255e5,154352592e4,15435291e5,154353006e4,154353066e4,154353276e4,15435363e5,154353756e4,15435399e5,15435435e5,154354494e4,154354668e4,15435468e5,154354686e4,15435471e5,15435486e5,154354902e4,15435492e5,154354998e4,15435507e5,154355088e4,15435543e5,15435579e5,15435615e5,154356516e4,15435687e5,15436119e5,154361784e4,15436227e5,15436263e5,15436299e5,154363092e4,15436335e5,15436344e5,154363446e4,154363506e4,154363716e4,154363914e4,15436407e5,15436443e5,154364796e4,15436515e5,15436731e5,154367958e4,154368036e4,15436947e5,15437019e5,154370604e4,154370778e4,15437127e5,15437307e5,154373388e4,15437379e5,15437415e5,154374486e4,15437451e5,15437523e5,15437595e5,15437739e5,15437754e5,154377552e4,154377558e4,15437883e5,15437919e5,15438027e5,15438063e5,15438099e5,15438135e5,15438171e5,15438207e5,15438387e5,154384236e4,15438459e5,15438531e5,154386396e4,15438675e5,154387164e4,154387836e4,15438819e5,15438855e5,15438891e5,15438927e5,154389636e4,154389996e4,15439035e5,15439071e5,15439179e5,154392156e4,15439323e5,15439359e5,15439395e5,15439503e5,15439539e5,15439575e5,154397556e4,154398636e4,15439899e5,154399716e4,15440043e5,15440115e5,15440187e5,15440256e5,15440259e5,154402728e4,154403316e4,15440403e5,15440475e5,15440511e5,15440547e5,15440583e5,154406196e4,15440655e5,15440691e5,15440763e5,15440907e5,15440943e5,15441051e5,15441087e5,154411596e4,15441195e5,154412316e4,15441339e5,154413756e4,15441411e5,154414476e4,15441519e5,15441879e5,154419156e4,15441987e5,15442023e5,154423836e4,154425636e4,15442599e5,15442707e5,15442743e5,15442815e5,15443031e5,15443103e5,15443139e5,154431756e4,154433196e4,15443355e5,154433916e4,15443571e5,15443607e5,15443643e5,15443787e5,15443859e5,15443931e5,154439676e4,154439766e4,154439772e4,154439862e4,154439868e4,15443988e5,15443991e5,154439916e4,154440036e4,1544403e6,154440306e4,15444039e5,154440636e4,154440642e4,15444075e5,15444111e5,15444147e5,15444183e5,15444219e5,15444255e5,15444291e5,154443276e4,15444399e5,15444435e5,15444507e5,15444543e5,15444615e5,15444651e5,154446876e4,15444723e5,15444759e5,154450476e4,154451916e4,15445227e5,15445263e5,15445299e5,15445587e5,15445659e5,15445731e5,15445767e5,15445803e5,15445839e5,15445875e5,15445947e5,15445983e5,15446091e5,15446127e5,15446199e5,154462356e4,15446451e5,15446487e5,154465596e4,15446595e5,154466316e4,15446667e5,15446703e5,15446739e5,15446775e5,15446811e5,154469196e4,15446991e5,15447063e5,15447171e5,15447243e5,15447279e5,154473516e4,15447495e5,154475316e4,154475676e4,15447603e5,15447639e5,15447783e5,15447855e5,15447891e5,15447927e5,154479636e4,154482156e4,15448323e5,154483596e4,154483956e4,15448431e5,15448467e5,154485036e4,154485396e4,15448575e5,15448611e5,15448647e5,15448683e5,154488636e4,154490076e4,15449079e5,15449115e5,154491516e4,154491876e4,154492236e4,154492596e4,154492956e4,154493316e4,15449367e5,154494036e4,154494396e4,15449475e5,15449511e5,15449547e5,154495836e4,15449619e5,15449655e5,15449691e5,154503036e4,154578636e4,154640196e4,154716876e4,154717236e4,154717956e4,154718316e4,154761156e4,154852236e4,154866276e4,154866636e4,154866996e4,154867356e4,154867716e4,154868076e4,154868436e4,154868796e4,154869876e4,154871316e4,154872036e4,154872756e4,154874556e4,154874916e4,154875276e4,154875636e4,154876356e4,154876716e4,154877076e4,154877436e4,154878516e4,154880682e4,154881036e4,154881396e4,154881756e4,154882116e4,154882476e4,154883562e4,154883922e4,154884276e4,154884642e4,154885356e4,154885716e4,154886076e4,154889316e4,154889676e4,154890036e4,154890402e4,154890756e4,154891116e4,154891476e4,154891836e4,154892196e4,154892556e4,154893276e4,154893996e4,154895076e4,154895436e4,154895802e4,154896156e4,154896516e4,154896882e4,154897236e4,154897596e4,154897956e4,154898316e4,154898676e4,154899036e4,154899396e4,154899756e4,154900116e4,154900476e4,154900836e4,154901196e4,154901556e4,154901922e4,154902276e4,154902636e4,154902996e4,154903356e4,154903722e4,154904082e4,154904436e4,154904796e4,154905126e4,154905138e4,154905156e4,154905516e4,154905876e4,154906032e4,154906062e4,154906068e4,154906218e4,154906224e4,154906236e4,154906248e4,154906254e4,154906266e4,154906332e4,154906338e4,154906344e4,15490635e5,154906356e4,154906362e4,154906368e4,15490638e5,154906386e4,154906392e4,154906398e4,154906404e4,15490641e5,15490653e5,154906554e4,154906602e4,154906626e4,154906632e4,154906668e4,154906674e4,15490668e5,154906686e4,154906698e4,154906704e4,154906722e4,15490674e5,154906752e4,154906758e4,154906764e4,15490677e5,154906776e4,154906782e4,154906794e4,154906914e4,154906932e4,154906938e4,154906944e4,15490695e5,15490695e5,154906962e4,154907016e4,154907022e4,154907022e4,15490704e5,154907046e4,154907052e4,154907118e4,154907124e4,15490713e5,154907166e4,154907166e4,154907322e4,154907574e4,15490758e5,154907586e4,154907676e4,154908036e4,154908756e4,154909116e4,154909476e4,154910916e4,154911276e4,154911636e4,154911996e4,154912716e4,154913076e4,154914516e4,154914876e4,15491517e5,154915182e4,154915188e4,1549152e6,154915206e4,154915236e4,154915596e4,154916676e4,154917756e4,154918836e4,154919196e4,154920996e4,154923516e4,15492357e5,154923762e4,154923762e4,154923876e4,154924236e4,154924254e4,15492441e5,154924422e4,154924428e4,154924434e4,15492444e5,154924488e4,154924494e4,154924596e4,154924956e4,154925676e4,154926396e4,154928556e4,154929636e4,154930722e4,154931076e4,154932156e4,154932288e4,15493248e5,154932486e4,154932522e4,154932876e4,15493305e5,15493308e5,154933086e4,154933092e4,154933098e4,154933104e4,154933116e4,154933128e4,154933134e4,15493314e5,154933152e4,154933158e4,154933158e4,154933164e4,154933176e4,154933182e4,154933188e4,154933194e4,1549332e6,154933206e4,154933212e4,154933242e4,154933248e4,154933254e4,15493326e5,154933506e4,154933512e4,154933518e4,154933524e4,154933596e4,154933956e4,154934316e4,154934676e4,154940154e4,15494916e5,154949514e4,154950126e4,154950132e4,154950186e4,154950234e4,154950288e4,154950294e4,154950312e4,154950318e4,154950324e4,15495033e5,154950342e4,154950348e4,154950354e4,15495036e5,154950384e4,15495039e5,154950396e4,154950402e4,154950408e4,154950408e4,154950414e4,15495042e5,154950426e4,154950432e4,154950444e4,154950504e4,15495051e5,15495051e5,154950516e4,154950522e4,154950528e4,154950534e4,15495054e5,154950546e4,154950552e4,154950558e4,15495057e5,154950576e4,154950582e4,154950588e4,154950594e4,1549506e6,154950606e4,154950612e4,154950618e4,15495063e5,154950636e4,154950642e4,154950654e4,15495066e5,154950666e4,154950954e4,154951314e4,154952034e4,15495564e5,154956e7,15495708e5]}},geometry:{type:"LineString",coordinates:[[112.2417,-3.68],[112.2417,-3.6803],[112.3269,-3.64],[112.3267,-3.6408],[112.3269,-3.6403],[112.1806,-3.7333],[112.0928,-3.7733],[112.0847,-3.7753],[112.085,-3.7753],[112.0853,-3.7753],[112.0867,-3.7747],[112.0869,-3.7747],[112.0833,-3.7758],[112.0814,-3.7761],[112.0806,-3.7764],[112.0764,-3.7781],[112.075,-3.7786],[112.0722,-3.7797],[112.0778,-3.7775],[112.0786,-3.7769],[112.0581,-3.7869],[112.0575,-3.7878],[112.0578,-3.7872],[112.0667,-3.7822],[112.0653,-3.7828],[112.0633,-3.7836],[112.0628,-3.7842],[112.0606,-3.7856],[112.0597,-3.7861],[112.0597,-3.7858],[112.0681,-3.7817],[112.0714,-3.78],[112.0039,-3.8117],[112.0056,-3.8108],[112.0053,-3.8111],[112.0064,-3.8103],[112.0122,-3.8078],[112.0128,-3.8075],[112.0144,-3.8067],[112.0156,-3.8061],[112.0239,-3.8025],[112.0244,-3.8022],[112.0272,-3.8008],[112.0281,-3.8003],[112.0278,-3.8006],[112.0275,-3.8006],[112.0347,-3.7983],[112.0336,-3.7989],[112.0331,-3.7989],[112.0322,-3.7992],[112.0414,-3.7956],[111.9969,-3.8147],[111.9964,-3.815],[111.9817,-3.8211],[111.9678,-3.8272],[111.9517,-3.8325],[111.95,-3.8328],[111.1217,-3.8211],[111.1214,-3.8211],[111.1561,-3.8158],[111.4267,-3.8042],[111.4269,-3.8044],[111.4361,-3.8089],[111.6953,-3.8831],[111.6956,-3.8831],[111.6994,-3.8828],[111.6997,-3.8825],[111.7214,-3.88],[111.7556,-3.8708],[111.7553,-3.8717],[111.7556,-3.8714],[111.7556,-3.8711],[111.8272,-3.8789],[111.7794,-3.8694],[111.6308,-3.8831],[111.6281,-3.8825],[111.6286,-3.8825],[111.6256,-3.8817],[111.5961,-3.8731],[111.5956,-3.8728],[111.5981,-3.8742],[111.6042,-3.8761],[111.6033,-3.8756],[111.6031,-3.8756],[111.6028,-3.8756],[111.6094,-3.8775],[111.6072,-3.8764],[111.6069,-3.8764],[111.6081,-3.8769],[111.6097,-3.8775],[111.6153,-3.8794],[111.6156,-3.8794],[111.5828,-3.8681],[111.5833,-3.8683],[111.5836,-3.8683],[111.5864,-3.8692],[111.59,-3.8708],[111.5892,-3.8706],[111.5753,-3.865],[111.5294,-3.8447],[111.3769,-3.7881],[111.3403,-3.7825],[111.3089,-3.7644],[111.3208,-3.7808],[111.3208,-3.7806],[111.3203,-3.7811],[111.3206,-3.7811],[111.3208,-3.7811],[111.3203,-3.7814],[111.3206,-3.7814],[111.3206,-3.7817],[111.3192,-3.7778],[111.3192,-3.7781],[111.3056,-3.7644],[111.3058,-3.7642],[111.3061,-3.7639],[111.3031,-3.7658],[111.2606,-3.7839],[111.2561,-3.7864],[110.4075,-4.055],[110.4083,-4.0547],[110.4122,-4.0542],[110.4056,-4.0553],[110.4053,-4.0553],[110.4042,-4.0553],[110.3997,-4.0561],[110.3511,-4.0697],[110.3508,-4.0697],[110.3525,-4.0694],[110.3533,-4.0692],[110.3533,-4.0689],[110.3544,-4.0686],[110.3475,-4.0703],[110.3353,-4.0731],[110.335,-4.0733],[110.3417,-4.0722],[110.3636,-4.0667],[110.4339,-4.0525],[110.4336,-4.0525],[110.4322,-4.0528],[110.4403,-4.0522],[110.4406,-4.0522],[110.4411,-4.0522],[110.4678,-4.0556],[110.4658,-4.0558],[110.4656,-4.0561],[110.4794,-4.0544],[110.4792,-4.0544],[110.5292,-4.0514],[110.6522,-4.0439],[110.6169,-4.0444],[110.6181,-4.0447],[110.6183,-4.0447],[110.7756,-4.0422],[111.0425,-3.8725],[111.0414,-3.8567],[111.0414,-3.8564],[111.0414,-3.8561],[111.0414,-3.8558],[111.0414,-3.8556],[111.0414,-3.8553],[111.0667,-3.8392],[111.0533,-3.8464],[111.0428,-3.8828],[111.0428,-3.8825],[111.0433,-3.8872],[111.0433,-3.8875],[111.0439,-3.8922],[111.0247,-3.9658],[110.9706,-4.0272],[110.9658,-4.0378],[110.9661,-4.0378],[110.9667,-4.0383],[110.9664,-4.0383],[110.9664,-4.0381],[110.9661,-4.0389],[110.9667,-4.0386],[110.9667,-4.0389],[110.9667,-4.0392],[110.0261,-4.1519],[109.7592,-4.2547],[109.8558,-4.2289],[109.9358,-4.19],[109.9383,-4.1889],[109.9433,-4.1867],[109.6606,-4.2722],[109.5731,-4.2044],[109.6119,-4.1447],[109.6361,-4.0789],[109.7575,-4.0281],[109.7578,-4.0278],[109.7342,-3.9886],[109.6489,-4.0206],[109.6978,-3.9797],[109.8208,-3.9272],[109.8592,-3.8661],[109.7853,-3.9928],[110.1111,-4.1236],[110.1625,-4.1186],[110.1628,-4.1186],[110.1533,-4.12],[110.2328,-4.105],[110.2342,-4.1047],[110.2306,-4.1058],[110.2322,-4.1053],[110.2083,-4.1114],[110.2069,-4.1119],[110.2092,-4.1114],[110.2025,-4.1128],[110.1983,-4.1142],[110.1981,-4.1144],[110.2356,-4.1044],[110.2358,-4.1044],[110.2361,-4.1042],[110.2375,-4.1033],[110.2394,-4.1031],[110.2428,-4.1011],[110.2433,-4.1011],[110.2411,-4.1019],[110.24,-4.1028],[110.2842,-4.0858],[110.2906,-4.0833],[110.3033,-4.08],[110.3122,-4.0772],[110.3133,-4.0769],[110.325,-4.0747],[110.3261,-4.0744],[110.3292,-4.0742],[110.3286,-4.0742],[109.9714,-3.7108],[109.9714,-3.7106],[109.9711,-3.7108],[109.9711,-3.7111],[109.9583,-3.6842],[109.9,-3.5736],[109.9494,-3.7481],[109.9036,-3.8064],[109.8506,-3.4856],[109.82,-3.4272],[109.7847,-3.3575],[109.7428,-3.2831],[109.6953,-3.2028],[109.6467,-3.1206],[109.5925,-3.0414],[109.1908,-2.3467],[109.2425,-2.4108],[109.2989,-2.47],[109.3247,-2.5378],[109.3664,-2.6161],[109.4108,-2.6956],[109.4928,-2.8678],[109.4503,-2.7806],[108.9358,-2.8136],[108.9058,-2.8964],[108.9614,-2.7267],[108.9875,-2.6483],[109.0117,-2.5664],[109.0225,-2.4753],[109.0469,-2.3936],[108.7858,-3.4272],[108.7856,-3.4272],[108.7858,-3.4267],[108.7825,-3.4664],[108.8247,-3.35],[108.8469,-3.2572],[108.865,-3.1636],[108.8747,-3.07],[109.5444,-2.9539],[109.5336,-4.2611],[109.5639,-4.2994],[109.5219,-4.2792],[109.5261,-4.2725],[109.5261,-4.2719],[109.5261,-4.2722],[109.4658,-4.2944],[109.4094,-4.3],[109.3553,-4.3114],[109.3692,-4.3442],[109.3197,-4.325],[109.3217,-4.3253],[109.3206,-4.325],[109.3206,-4.3247],[109.3206,-4.3244],[109.3208,-4.3244],[109.3208,-4.3242],[109.32,-4.3242],[109.32,-4.3244],[109.32,-4.3247],[109.3197,-4.3247],[109.2197,-4.3725],[109.2669,-4.3708],[109.4703,-4.3219],[109.0336,-4.4719],[108.8436,-4.5911],[108.9053,-4.5508],[108.9694,-4.5097],[108.875,-4.4775],[108.9794,-4.4525],[109.0669,-4.4194],[109.095,-4.4361],[109.1686,-4.395],[108.7756,-4.5056],[108.6753,-4.5303],[108.7756,-4.6231],[108.7142,-4.6703],[108.6239,-4.7544],[108.645,-4.7364],[108.6367,-4.7306],[108.6561,-4.7161],[108.4622,-4.5797],[108.5692,-4.5542],[108.245,-4.6192],[108.3533,-4.6014],[108.1375,-4.6381],[108.1425,-4.0428],[108.08,-4.0786],[108.2064,-4.0042],[108.2744,-3.9706],[108.3411,-3.9344],[108.4017,-3.8875],[108.4731,-3.8444],[108.6144,-3.75],[108.545,-3.8003],[108.6844,-3.7067],[108.7542,-3.675],[108.7644,-3.6597],[108.7647,-3.6597],[108.765,-3.6597],[108.7689,-3.6397],[108.7769,-3.5525],[107.9686,-4.1625],[108.0239,-4.1219],[107.8936,-4.2242],[107.8939,-4.2242],[107.8936,-4.2244],[107.8933,-4.2244],[107.8931,-4.2244],[107.8928,-4.2244],[107.8306,-4.2294],[107.6842,-4.2656],[107.7542,-4.2425],[108.0314,-4.6633],[107.9228,-4.6814],[107.8108,-4.6825],[107.7022,-4.6778],[107.6125,-4.6911],[107.5236,-4.7156],[107.4322,-4.7228],[107.3292,-4.7683],[107.3297,-4.7675],[107.3297,-4.7678],[107.335,-4.76],[107.335,-4.7603],[107.3347,-4.7603],[107.3353,-4.7597],[107.3353,-4.7592],[107.335,-4.7592],[107.3058,-4.7581],[107.3269,-4.7219],[107.3275,-4.7219],[107.3278,-4.7219],[107.3281,-4.7219],[107.3356,-4.7147],[107.3289,-4.7225],[107.3286,-4.7222],[107.3283,-4.7222],[107.3286,-4.7225],[107.3283,-4.7231],[107.3281,-4.7233],[107.3281,-4.7231],[107.3281,-4.7236],[107.3214,-4.6825],[107.3125,-4.7006],[107.3014,-4.6692],[107.2994,-4.6136],[107.295,-4.5903],[107.2933,-4.5117],[107.3006,-4.4961],[107.2931,-4.5031],[107.2933,-4.4981],[107.3006,-4.3828],[107.2917,-4.3756],[107.2925,-4.3756],[107.2922,-4.3758],[107.2919,-4.375],[107.2922,-4.375],[107.2922,-4.3753],[107.2917,-4.375],[107.2939,-4.3708],[107.4833,-4.3144],[107.5481,-4.2997],[107.6147,-4.2844],[107.42,-4.3303],[107.3586,-4.3511],[107.3136,-4.3378],[107.2903,-4.3475],[107.2903,-4.3472],[107.2903,-4.3469],[107.1875,-4.3417],[107.1583,-4.2514],[107.0889,-4.2561],[107.0897,-4.2642],[107.09,-4.2644],[107.09,-4.2647],[107.0892,-4.2647],[107.0886,-4.2642],[107.0889,-4.2642],[107.0889,-4.2639],[107.0886,-4.2636],[107.0883,-4.2636],[107.0911,-4.2897],[107.1008,-4.3467],[107.1478,-4.4625],[107.1203,-4.4042],[107.2217,-4.4339],[107.2889,-4.3572],[107.2875,-4.3717],[107.2875,-4.3714],[107.2861,-4.3706],[107.2872,-4.3708],[107.2872,-4.3719],[107.2867,-4.3717],[107.2872,-4.3722],[107.2872,-4.3725],[107.2872,-4.3728],[107.2861,-4.4444],[107.2628,-4.5192],[107.2244,-4.5717],[107.1797,-4.5211],[107.1633,-4.6742],[107.2675,-4.635],[107.2353,-4.7164],[107.2403,-4.7367],[107.1511,-4.7842],[107.1,-4.8175],[107.0997,-4.8178],[107.0994,-4.8178],[107.0997,-4.8181],[107.0878,-4.6375],[107.0167,-4.5986],[106.9606,-4.5558],[106.9656,-4.5625],[106.9664,-4.5628],[106.9664,-4.5631],[106.9658,-4.5625],[106.9661,-4.5628],[106.9661,-4.5631],[106.9661,-4.5636],[106.9664,-4.5636],[106.9664,-4.5633],[106.9661,-4.5639],[106.9028,-4.5261],[106.9031,-4.5261],[106.9033,-4.5264],[106.9033,-4.5267],[106.9033,-4.5269],[106.9019,-4.5283],[106.6175,-4.8064],[106.6158,-4.7536],[106.5544,-4.7067],[106.5378,-4.4689],[106.5414,-4.4514],[106.5703,-4.405],[106.6167,-4.3981],[106.6686,-4.43],[106.6344,-4.3936],[106.6347,-4.3933],[106.6342,-4.3936],[106.6342,-4.3939],[106.6339,-4.3939],[106.6342,-4.3928],[106.635,-4.3931],[106.6347,-4.3931],[106.635,-4.3928],[106.6347,-4.3928],[106.6444,-4.3794],[106.6414,-4.3728],[106.6428,-4.3825],[106.7019,-4.4894],[106.7017,-4.4894],[106.7014,-4.4894],[106.7017,-4.4889],[106.7011,-4.4894],[106.6792,-4.4619],[106.6794,-4.4622],[106.6797,-4.4622],[106.6797,-4.4625],[106.6794,-4.4619],[106.6797,-4.4628],[106.6994,-4.4653],[106.6647,-4.4753],[106.6631,-4.5008],[106.6633,-4.5014],[106.6631,-4.5022],[106.6625,-4.5019],[106.6628,-4.5019],[106.6625,-4.5022],[106.6622,-4.5022],[106.6628,-4.5014],[106.6628,-4.5011],[106.6625,-4.5011],[106.6625,-4.5008],[106.6622,-4.5008],[106.6803,-4.4917],[106.7022,-4.49],[106.7022,-4.4897],[106.7022,-4.4903],[106.7022,-4.4906],[106.7631,-4.4756],[106.8247,-4.4903],[106.8844,-4.5228],[106.8844,-4.5225],[106.8842,-4.5228],[106.8842,-4.5231],[106.8839,-4.5231],[106.8842,-4.5222],[106.8836,-4.5219],[106.8839,-4.5217],[106.8933,-4.4858],[106.8942,-4.485],[106.8936,-4.485],[106.8936,-4.4856],[106.8936,-4.4853],[106.885,-4.4861],[106.8942,-4.4847],[106.8942,-4.4844],[106.7103,-4.2144],[106.6972,-4.2858],[106.6831,-4.3581],[106.6325,-4.3508],[106.6308,-4.3464],[106.6303,-4.3444],[106.6294,-4.3417],[106.6181,-4.3092],[106.6075,-4.2833],[106.5842,-4.2186],[106.5678,-4.1789],[106.5608,-4.1575],[106.6667,-4.1967],[106.6669,-4.1969],[106.6672,-4.1967],[106.6669,-4.1972],[106.6672,-4.1975],[106.6675,-4.1981],[106.6678,-4.1981],[106.6681,-4.1978],[106.6681,-4.1981],[106.6683,-4.1975],[106.6364,-4.1228],[106.6247,-4.0944],[106.5408,-4.095],[106.6039,-4.0367],[106.5617,-3.9106],[106.5836,-3.9717],[106.7728,-4.0317],[106.7478,-3.9997],[106.7453,-3.9303],[106.8111,-3.9675],[106.82,-3.8981],[106.7453,-4.0711],[106.7503,-4.1081],[106.73,-4.1439],[106.7253,-4.1697],[107.075,-4.0717],[107.0819,-4.1303],[107.0858,-4.1911],[107.1311,-4.1758],[107.1014,-4.0958],[107.1072,-3.9728],[107.1125,-3.9736],[107.115,-3.9731],[107.1136,-3.9719],[107.1139,-3.9719],[107.1142,-3.9719],[107.1144,-3.9719],[107.1144,-3.9722],[107.1139,-3.9725],[107.1139,-3.9728],[107.115,-3.9725],[107.115,-3.9728],[107.1147,-3.9722],[107.1075,-3.9603],[107.0456,-3.9442],[107.0458,-3.9442],[107.0464,-3.9442],[107.0464,-3.9444],[107.0464,-3.9447],[107.0461,-3.9447],[107.0464,-3.945],[107.0461,-3.9439],[107.0458,-3.9439],[107.0475,-3.9542],[107.0972,-3.9489],[107.0989,-3.9503],[107.0986,-3.95],[107.0983,-3.9497],[107.0989,-3.95],[107.0983,-3.9494],[107.0983,-3.9492],[107.0981,-3.9497],[107.0978,-3.9497],[107.0975,-3.9497],[107.0975,-3.95],[107.0972,-3.9494],[107.0975,-3.9503],[107.0981,-3.9506],[107.0953,-4.0219],[107.0694,-4.0142],[106.8528,-3.86],[106.8525,-3.8603],[106.8525,-3.86],[106.8522,-3.86],[106.8519,-3.86],[106.8456,-3.8822],[106.8458,-3.8822],[106.8461,-3.8825],[106.8325,-3.85],[106.7411,-3.8631],[106.7442,-3.7972],[106.7717,-3.8128],[106.7475,-3.7597],[106.7472,-3.7603],[106.7475,-3.7603],[106.7472,-3.7606],[106.7469,-3.7603],[106.7458,-3.7589],[106.7461,-3.7589],[106.7464,-3.7592],[106.7467,-3.7589],[106.7464,-3.7586],[106.5356,-3.8758],[106.5356,-3.8756],[106.5353,-3.8756],[106.535,-3.8756],[106.535,-3.8747],[106.5353,-3.8742],[106.5397,-3.8528],[109.0683,-2.0644],[109.0564,-2.0392],[109.085,-2.0339],[109.0817,-2.0311],[109.0842,-2.0481],[109.1217,-2.0658],[109.1125,-2.045],[109.1128,-2.0444],[109.1128,-2.0447],[109.1125,-2.0447],[109.1122,-2.0447],[109.1494,-2.0486],[109.1683,-2.1133],[109.1556,-2.1067],[109.1286,-2.1108],[109.095,-2.1328],[109.0956,-2.1569],[109.0953,-2.1572],[109.0956,-2.1572],[109.115,-2.1611],[109.1711,-2.1789],[109.1272,-2.1992],[109.0825,-2.2214],[109.065,-2.3083],[109.1592,-2.2717],[109.2553,-2.1772],[109.2831,-2.2131],[109.2981,-2.225],[109.2975,-2.2261],[109.2978,-2.2258],[109.2978,-2.2256],[109.2975,-2.2256],[109.2975,-2.2258],[109.2972,-2.2258],[109.2969,-2.2258],[109.2978,-2.2253],[109.2961,-2.2244],[109.3019,-2.1119],[109.3019,-2.1117],[109.3022,-2.1122],[109.3025,-2.1119],[109.2133,-2.1494],[109.2144,-2.1544],[109.2042,-2.1411],[109.2042,-2.1414],[109.2039,-2.1414],[109.2072,-2.065],[109.2597,-2.08],[109.2594,-2.08],[109.2597,-2.0797],[109.2622,-2.0769],[109.2392,-2.0472],[109.2392,-2.0475],[109.2392,-2.0478],[109.2386,-2.0481],[109.2389,-2.0481],[109.2211,-2.0283],[109.0244,-1.7964],[109.0886,-1.815],[109.105,-1.8686],[109.1142,-1.8242],[109.1139,-1.8242],[109.1139,-1.8236],[109.1136,-1.8236],[109.1136,-1.8239],[109.1136,-1.8242],[109.1131,-1.8244],[109.1131,-1.8247],[109.1072,-1.8233],[109.1425,-2.0217],[109.0628,-1.9794],[109.0628,-1.9797],[109.0811,-2.0192],[109.0769,-2.0206],[109.0808,-2.0228],[109.0786,-2.0172],[109.0458,-2.025],[109.0456,-2.025],[109.0458,-2.0247],[109.0464,-2.0247],[109.0464,-2.0244],[109.0467,-2.0247],[109.0464,-2.025],[109.0481,-2.0233],[109.0481,-2.0231],[109.0461,-2.0239],[109.0458,-2.0239],[109.0456,-2.0239],[109.0456,-2.0236],[109.0458,-2.0231],[109.0456,-2.0231],[109.0456,-2.0233],[109.0483,-2.0228],[109.0486,-2.0225],[109.0483,-2.0222],[109.0517,-2.0111],[109.0458,-2.0111],[109.0456,-2.0111],[109.0456,-2.0108],[109.0458,-2.0108],[109.0461,-2.0108],[109.0461,-2.0106],[109.0478,-2.0103],[109.0475,-2.0106],[109.0475,-2.0108],[109.0472,-2.0108],[109.0456,-2.0094],[109.0311,-1.9922],[109.0217,-2.0047],[109.0425,-2.0064],[109.0428,-2.0069],[109.0431,-2.0069],[109.0447,-2.0097],[109.045,-2.0097],[109.0453,-2.0097],[109.0447,-2.0103],[109.0444,-2.0097],[109.0453,-2.0108],[109.0453,-2.0111],[109.045,-2.0111],[109.0392,-2.0183],[109.0403,-2.0189],[109.0394,-2.0189],[109.0397,-2.0192],[109.0394,-2.0192],[109.0397,-2.0194],[109.04,-2.0194],[109.0444,-2.0228],[109.0447,-2.0228],[109.0453,-2.0231],[109.0453,-2.0233],[109.045,-2.0233],[109.0447,-2.0231],[109.0447,-2.0233],[109.0447,-2.0236],[109.045,-2.0236],[109.0453,-2.0236],[109.045,-2.0239],[109.0453,-2.0239],[109.045,-2.0242],[109.0447,-2.0242],[109.0447,-2.0239],[109.0444,-2.0239],[109.0444,-2.0242],[109.0442,-2.0242],[109.0439,-2.0242],[109.0439,-2.0239],[109.0439,-2.0236],[109.0444,-2.0231],[109.0442,-2.0231],[109.0436,-2.0236],[109.0436,-2.0239],[109.0442,-2.0244],[109.0444,-2.0244],[109.0447,-2.0247],[109.0447,-2.0244],[109.0453,-2.0244],[109.045,-2.0247],[109.0447,-2.025],[109.0392,-2.0186],[109.0281,-2.0214],[109.0317,-2.0231],[109.0319,-2.0231],[109.0328,-2.0233],[109.0328,-2.0236],[109.0328,-2.0242],[109.0328,-2.0239],[109.0325,-2.0239],[109.0325,-2.0242],[109.0322,-2.0242],[109.0317,-2.0233],[109.0317,-2.0236],[109.0314,-2.0236],[109.0317,-2.0239],[109.0261,-2.0247],[109.0247,-2.0094],[109.0128,-1.9697],[109.0797,-1.9375],[108.9269,-1.8814],[108.9092,-1.8881],[108.9183,-1.9044],[108.9181,-1.9042],[108.9444,-1.9106],[108.9089,-1.9475],[108.9628,-1.9372],[108.9628,-1.9375],[108.9631,-1.9375],[108.9631,-1.9372],[108.9633,-1.9375],[108.9633,-1.9378],[108.9636,-1.9378],[108.9639,-1.9378],[108.9642,-1.9378],[108.9642,-1.9372],[108.9642,-1.9375],[108.9639,-1.9375],[108.9636,-1.9375],[108.9639,-1.9372],[108.9642,-1.9369],[108.9644,-1.9369],[108.9644,-1.9367],[108.9642,-1.9364],[108.9636,-1.9361],[108.9628,-1.9369],[108.9575,-1.9331],[108.9572,-1.9333],[108.9572,-1.9331],[108.9569,-1.9331],[108.9567,-1.9331],[108.9569,-1.9328],[108.9808,-1.9281],[108.9967,-1.95],[108.9939,-1.9703],[108.9675,-1.9756],[108.9608,-1.9764],[108.9611,-1.98],[108.9008,-1.9631],[108.8831,-1.9572],[108.8775,-1.9431],[108.8783,-1.95],[108.8783,-1.9503],[108.8769,-1.9497],[108.8769,-1.9494],[108.8772,-1.9492],[108.8758,-1.955],[108.8756,-1.955],[108.8753,-1.955],[108.8753,-1.9547],[108.8758,-1.9547],[108.8756,-1.9547],[108.8758,-1.9544],[108.8756,-1.9544],[108.8758,-1.9542],[108.8761,-1.9544],[108.8761,-1.9547],[108.8794,-1.9492],[108.8792,-1.9494],[108.8792,-1.9492],[108.8794,-1.9489],[108.8897,-1.9467],[108.8828,-1.9378],[108.8828,-1.9375],[108.8811,-1.9375],[108.8808,-1.9375],[108.8814,-1.9381],[108.8569,-1.9136],[108.8597,-1.8936],[108.8489,-1.9039],[108.8744,-1.825],[108.8897,-1.8164],[108.8908,-1.83],[108.9367,-1.88],[108.9561,-1.7906],[108.8903,-1.7725],[108.835,-1.8028],[108.8397,-1.7617],[108.8425,-1.7547],[108.8272,-1.7247],[108.8097,-1.7064],[108.81,-1.7056],[108.6206,-1.2767],[108.6208,-1.2767],[108.6206,-1.2769],[108.6206,-1.2772],[108.6208,-1.2764],[108.6211,-1.2764],[108.6211,-1.2761],[108.6214,-1.2761],[108.5983,-1.1975],[108.4497,-1.2317],[108.4814,-1.2953],[108.6153,-1.2692],[108.6153,-1.2694],[108.615,-1.2694],[108.6147,-1.2694],[108.6147,-1.2692],[108.6147,-1.2689],[108.615,-1.2689],[108.6153,-1.2686],[108.615,-1.2686],[108.6144,-1.2694],[108.6144,-1.2697],[108.6153,-1.2706],[108.615,-1.2706],[108.6147,-1.2703],[108.6147,-1.27],[108.6147,-1.2697],[108.615,-1.2697],[108.6153,-1.2697],[108.6153,-1.27],[108.6156,-1.27],[108.6158,-1.2697],[108.6158,-1.27],[108.6156,-1.2703],[108.6172,-1.2714],[108.6131,-1.2739],[108.6128,-1.2739],[108.6083,-1.2775],[108.5286,-1.3628],[108.5258,-1.3497],[108.5331,-1.3097],[108.4978,-1.3142],[108.4961,-1.3142],[108.4958,-1.3231],[108.4958,-1.3125],[108.4958,-1.3128],[108.4956,-1.3131],[108.4958,-1.3131],[108.4958,-1.3133],[108.4956,-1.3133],[108.4958,-1.3136],[108.4964,-1.3136],[108.4967,-1.3131],[108.4967,-1.3139],[108.4964,-1.3128],[108.4961,-1.3122],[108.4564,-1.3347],[108.4358,-1.3389],[108.5772,-1.4178],[108.5767,-1.4297],[108.6208,-1.4994],[108.6258,-1.5375],[108.6253,-1.5375],[108.625,-1.5367],[108.6253,-1.5378],[108.6258,-1.5378],[108.6414,-1.5453],[108.6711,-1.5678],[108.7972,-1.5858],[108.7986,-1.5881],[108.7981,-1.5881],[108.7983,-1.5881],[108.7981,-1.5883],[108.7983,-1.5883],[108.7986,-1.5883],[108.8,-1.6178],[108.7258,-1.6367],[108.8033,-1.635],[108.7706,-1.6636],[108.7867,-1.6969],[108.7064,-1.6081],[108.6169,-1.5183],[108.6156,-1.4958],[108.3447,-1.3522],[108.345,-1.3522],[108.3578,-1.3514],[108.3575,-1.3514],[108.36,-1.3531],[108.3825,-1.3583],[108.3817,-1.3578],[108.3819,-1.3575],[108.3814,-1.3581],[108.4067,-1.1692],[108.3933,-.9375],[108.3511,-.8819],[108.1881,-.6267],[108.1886,-.6261],[108.1883,-.6264],[108.1881,-.6264],[108.1883,-.6261],[108.1869,-.6256],[108.1458,-.5836],[108.1433,-.5717],[108.2161,-.6242],[108.2106,-.6664],[108.2111,-.6678],[108.2122,-.6675],[108.2111,-.6675],[108.2114,-.6672],[108.2114,-.6669],[108.2117,-.6669],[108.2117,-.6667],[108.2119,-.6667],[108.2608,-.6992],[108.2561,-.6847],[108.3081,-.7394],[108.3083,-.7317],[108.2867,-.7517],[108.3239,-.7633],[108.3164,-.8178],[108.3675,-.8139],[108.4408,-.835],[108.4825,-.8794],[108.5067,-.9483],[108.4469,-.9908],[108.5533,-1.0756],[108.5311,-1.0136],[108.4856,-1.0269],[108.4847,-1.0239],[108.485,-1.0239],[108.4706,-1.0822],[108.4708,-1.0825],[108.4708,-1.0822],[108.465,-1.0889],[108.4647,-1.0889],[108.4647,-1.0886],[108.4356,-1.115],[108.5644,-1.1219],[108.5514,-1.0883],[108.5511,-1.0883],[108.5511,-1.0886],[108.5508,-1.0886],[108.5508,-1.0889],[108.1092,-.5011],[108.0972,-.5561],[108.0972,-.5581],[108.0969,-.5578],[108.0969,-.5581],[108.0964,-.5561],[108.0961,-.5561],[108.0961,-.5564],[108.0967,-.5558],[108.0969,-.5558],[108.0972,-.5558],[108.0975,-.5558],[108.0978,-.5558],[108.0925,-.5389],[108.0881,-.4506],[108.0881,-.455],[108.0878,-.455],[108.0875,-.455],[108.0875,-.4553],[108.0872,-.4558],[108.0872,-.4553],[108.0731,-.4569],[108.0658,-.4369],[108.0831,-.4217],[108.0833,-.4217],[108.0831,-.4222],[108.0831,-.4219],[108.0831,-.4228],[108.0831,-.4225],[108.0831,-.4231],[108.0836,-.4219],[108.0836,-.4217],[108.0836,-.4214],[108.0939,-.3956],[108.0522,-.4025],[108.0522,-.4028],[108.0522,-.4031],[108.0525,-.4025],[108.0528,-.4025],[108.0528,-.4022],[108.0825,-.3217],[108.0569,-.2547],[108.0494,-.2222],[108.0492,-.2211],[108.0494,-.2211],[108.0408,-.2253],[108.0411,-.225],[108.0408,-.225],[108.0406,-.2253],[108.0303,-.2975],[108.0336,-.3789],[106.5269,-3.7892],[106.5272,-3.7886],[106.5267,-3.7886],[106.5264,-3.7908],[106.5344,-3.8036],[106.5247,-3.8092],[106.5244,-3.8092],[106.5086,-3.8278],[106.5092,-3.8275],[106.5092,-3.8272],[106.5308,-3.8881],[106.5183,-3.9725],[106.5178,-3.9686],[106.5086,-4.0175],[106.5086,-4.0172],[106.5086,-4.0169],[106.5083,-4.0167],[106.5083,-4.0169],[106.5175,-4.0353],[106.5231,-4.0511],[106.5275,-4.0611],[106.5203,-4.5317],[106.5203,-4.5311],[106.5228,-4.5142],[106.5183,-4.5436],[106.5131,-4.5844],[106.5067,-4.6272],[106.5017,-4.6583],[106.5022,-4.6583],[106.5039,-4.6597],[106.5031,-4.6592],[106.5025,-4.6583],[106.5028,-4.6583],[106.5031,-4.6581],[106.5033,-4.6583],[106.5033,-4.6581],[106.5036,-4.6583],[106.5036,-4.6586],[106.5039,-4.6589],[106.5033,-4.6589],[106.5033,-4.6592],[106.5031,-4.6606],[106.5028,-4.6606],[106.5025,-4.6606],[106.5033,-4.6569],[106.5033,-4.6578],[106.5031,-4.6575],[106.5031,-4.6578],[106.5028,-4.6575],[106.5028,-4.6572],[106.5031,-4.6572],[106.5025,-4.6569],[106.5033,-4.6567],[106.5033,-4.6564],[106.4911,-5.0397],[106.5108,-5.0222],[106.5108,-5.0219],[106.5111,-5.0219],[106.5111,-5.0222],[106.5111,-5.0225],[106.5108,-5.0225],[106.5108,-5.0228],[106.5111,-5.0228],[106.5111,-5.0231],[106.5108,-5.0231],[106.5114,-5.0231],[107.9128,-6.1178],[107.9394,-6.1264],[107.9386,-6.1261],[107.9389,-6.1258],[107.9383,-6.1256],[107.9383,-6.1258],[107.9383,-6.1261],[107.9386,-6.1269],[107.9386,-6.1267],[107.9389,-6.1267],[107.9392,-6.1272],[107.8878,-6.1014],[107.8469,-6.1094],[107.6708,-6.1522],[107.6706,-6.1525],[107.6706,-6.1522],[107.6706,-6.1517],[107.6708,-6.1519],[107.6681,-6.1372],[106.7969,-5.9408],[106.75,-5.8528],[106.8808,-5.8786],[106.8269,-5.93],[106.9117,-5.95],[106.8686,-5.9881],[106.8192,-6.0486],[106.8225,-5.9886],[106.8225,-5.9883],[106.8233,-5.9878],[106.815,-6.0033],[106.8081,-6.0072],[106.8078,-6.0319],[106.8036,-6.0672],[106.8031,-6.0944],[106.8031,-6.0942],[106.8017,-6.0953],[106.8025,-6.0911],[106.7992,-6.095],[106.7983,-6.0886],[106.8025,-6.0847],[106.7994,-6.0964],[106.7992,-6.0961],[106.7997,-6.0972],[106.8028,-6.0983],[106.8028,-6.0981],[106.8031,-6.0978],[106.8036,-6.0981],[106.8033,-6.0981],[106.8031,-6.0981],[106.8031,-6.0983],[106.8033,-6.0983],[107.2897,-5.8972],[107.2131,-5.8814],[107.2781,-5.8175],[107.2614,-5.8119],[107.2592,-5.8133],[107.2544,-5.8158],[107.2506,-5.8153],[107.2506,-5.8156],[107.25,-5.8161],[107.2492,-5.8156],[107.2492,-5.8153],[107.2494,-5.8153],[107.2494,-5.8156],[107.2494,-5.8158],[107.25,-5.8158],[107.2503,-5.8158],[107.2497,-5.815],[107.2503,-5.8147],[107.25,-5.8147],[107.2497,-5.8147],[107.2489,-5.8042],[107.2489,-5.8044],[107.2489,-5.8047],[107.2483,-5.8056],[107.2478,-5.8056],[107.2467,-5.805],[107.2467,-5.8047],[107.2469,-5.8053],[107.2489,-5.8067],[107.2408,-5.8158],[107.1411,-5.8611],[107.0283,-5.8472],[107.075,-5.8514],[106.9681,-5.8908],[106.9431,-5.9178],[106.9942,-5.8681],[106.9342,-5.8208],[106.9933,-5.7636],[107.0522,-5.7258],[107.1883,-5.7206],[107.2383,-5.7844],[107.1825,-5.6458],[107.1189,-5.6844],[107.1314,-5.6672],[107.2411,-5.6019],[107.2792,-5.5533],[107.0619,-5.6403],[107.0081,-5.5928],[106.9728,-5.5208],[106.6797,-5.6731],[106.715,-5.7642],[106.6486,-5.5831],[106.5911,-5.505],[106.5911,-5.5053],[106.5911,-5.5056],[106.5953,-5.505],[106.5586,-5.5086],[106.5586,-5.5083],[106.5592,-5.5078],[106.5606,-5.5078],[106.5603,-5.5081],[106.5606,-5.5072],[106.5606,-5.5075],[106.5606,-5.5069],[106.5592,-5.5075],[106.5592,-5.5072],[106.5589,-5.5075],[106.5981,-5.4514],[106.6278,-5.3778],[106.91,-5.3789],[106.8981,-5.3644],[106.8983,-5.3644],[106.8403,-5.2953],[106.8403,-5.295],[106.8464,-5.3031],[106.8467,-5.3031],[106.8419,-5.2978],[106.8631,-5.3217],[106.83,-5.2781],[106.8303,-5.2783],[106.8203,-5.2619],[106.7928,-5.1681],[106.7811,-5.1942],[106.7811,-5.1939],[106.7811,-5.1936],[106.7808,-5.1936],[106.7806,-5.1936],[106.7803,-5.1933],[106.7808,-5.1939],[106.7808,-5.1944],[106.7808,-5.1947],[106.7808,-5.195],[106.7803,-5.1953],[106.7806,-5.1953],[106.7811,-5.1947],[106.7811,-5.1944],[106.7856,-5.2011],[106.7514,-5.1967],[106.7172,-5.1825],[106.7175,-5.1825],[106.7175,-5.1811],[106.7175,-5.1819],[106.7172,-5.1819],[106.7169,-5.1819],[106.7169,-5.1822],[106.7172,-5.1822],[106.7175,-5.1822],[106.7181,-5.1819],[106.7183,-5.1817],[106.7181,-5.1817],[106.7178,-5.1819],[106.7178,-5.1814],[106.7181,-5.1811],[106.7183,-5.1811],[106.7183,-5.1814],[106.7181,-5.1814],[106.7178,-5.1808],[106.7178,-5.1825],[106.6872,-5.1947],[106.6872,-5.1944],[106.6831,-5.2344],[106.6578,-5.3028],[106.6261,-5.1094],[106.6858,-5.1569],[106.7,-5.1658],[106.6922,-5.0572],[106.6919,-5.0572],[106.6919,-5.0569],[106.6925,-5.0569],[106.6925,-5.0567],[106.6275,-5.0161],[106.6278,-5.0156],[106.6278,-5.0158],[106.6278,-5.0161],[106.6281,-5.0164],[106.6278,-5.0164],[106.5661,-5.0603],[106.5581,-5.0164],[106.5781,-4.9775],[106.5781,-4.9772],[106.5783,-4.9769],[106.5786,-4.9778],[106.5789,-4.9778],[106.5789,-4.9781],[106.5792,-4.9781],[106.5853,-4.9806],[106.5992,-4.8781],[106.5994,-4.8783],[106.5983,-4.8786],[106.5983,-4.8783],[106.5983,-4.8781],[106.5986,-4.8781],[106.5989,-4.8778],[106.5992,-4.8792],[106.5994,-4.8797],[106.6097,-4.8831],[106.6733,-4.915],[106.7117,-4.9553],[106.6314,-4.9703],[106.7953,-5.08],[106.7256,-5.1242],[106.7931,-5.145],[106.8911,-5.1239],[106.9192,-5.1453],[106.9275,-5.1422],[107.0189,-5.0881],[107.0444,-5.0233],[107.0978,-4.9564],[107.1022,-4.8789],[106.9381,-5.4214],[106.9381,-5.4217],[106.9472,-5.4456],[107.4661,-5.3867],[107.4167,-5.4322],[107.5781,-5.3169],[107.5231,-5.355],[107.6194,-5.2747],[107.6522,-5.2183],[107.8353,-5.1258],[108.0314,-5.0272],[107.9022,-5.0936],[107.9681,-5.0575],[107.7742,-5.1611],[107.7103,-5.1914],[107.3611,-5.4714],[107.3144,-5.5078],[107.5481,-5.9461],[107.4844,-5.9167],[107.3028,-5.8206],[107.3097,-5.8389],[107.37,-5.9125],[107.4242,-5.8922],[107.4461,-5.9353],[107.5131,-5.9767],[107.5756,-6.0236],[107.6164,-5.9758],[107.6311,-6.0756],[107.6872,-6.1047],[107.6833,-6.0672],[107.6797,-6.0694],[107.68,-6.0667],[107.7542,-6.0375],[107.7289,-6.0836],[107.7833,-6.1011],[107.8222,-6.0692],[107.8458,-6.0581],[107.8456,-6.0578],[107.8447,-6.0603],[107.845,-6.0597],[107.8453,-6.0594],[107.6872,-6.0069],[107.8731,-6.0981],[107.8725,-6.0981],[107.8719,-6.0944],[108.1744,-4.9694],[108.1017,-4.9969],[108.24,-4.9436],[108.3036,-4.9158],[108.3664,-4.8875],[108.4383,-4.8586],[108.4953,-4.8294],[108.5628,-4.7983]]}}]}},xe=Le.data.features.find(function(e){return"track"===e.properties.type}).properties.coordinateProperties.times,Ce=Pe()(new Date(2017,0,1)),je=Pe()(new Date(2017,11,31)),Re=function(){var e={rfmo:{duration:[1,100,"day"]},event:{duration:[10,300,"hour"],interval:[0,25,"day"]}},t={};return Object.keys(e).forEach(function(r){for(var n=e[r],a=n.duration[1]-n.duration[0],i=n.interval?n.interval[1]-n.interval[0]:null,o=[],s=0;;){var u=o.length?o[o.length-1]:null,c=n.duration[0]+Math.random()*a,l=u?u.end.clone():Ce.clone();if(n.interval){var p=n.interval[0]+Math.random()*i;l=l.add(p,n.interval[2])}var f=l.add(c,n.duration[2]),h={id:xe[s],start:l,end:f};if(f.isAfter(je)){h.end=je.clone(),o.push(h);break}o.push(h),s+=Math.floor(40*Math.random())+10}t[r]=o}),t.event=t.event.map(function(e){return Object(P.a)({},e,{encounteredVessel:Math.random()>.5?null:"other:".concat(e.id)})}),t}(),ke=!1,De=a.a.memo(function(e){var t=e.events,r=e.rfmos,i=e.onChange,o=e.onEventClick,s=Object(n.useRef)(new Map).current,u=Object(n.useState)(null),c=Object(f.a)(u,2),l=c[0],p=c[1],h=Object(n.useCallback)(function(){ke=!1;var e=document.documentElement.clientHeight,t=window.innerHeight||0,r=Math.max(e,t)/2,n=Number.POSITIVE_INFINITY,a=null;s.forEach(function(e,t){e.classList.toggle("selected",!1);var i=e.getBoundingClientRect().top,o=Math.abs(r-i);o<n&&(a=t,n=o)}),p(a)},[s]),d=Object(n.useCallback)(function(){!1===ke&&(ke=!0,window.requestAnimationFrame(h))},[h]),_=Object(n.useCallback)(function(e){var t=s.get(e.id);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),void 0!==o&&o(e.id))},[s,o]);Object(n.useEffect)(function(){return window.addEventListener("scroll",d,!0),function(){window.removeEventListener("scroll",d,!0)}},[d]),Object(n.useEffect)(function(){void 0!==i&&i(l)},[i,l]);var m=Object(n.useMemo)(function(){return function(e,t){var r=Object(Ee.a)().domain([Ce.toDate(),je.toDate()]).range([0,1]),n=function(e){return r(e)},a=function(e){return"".concat(100*e,"%")},i=function(e){return e.map(function(e){var t=e.start.toDate(),r=e.end.toDate(),i=n(t),o=n(r),s=o-i,u=i+s/2;return Object(P.a)({},e,{startNormalized:i,endNormalized:o,startCoord:a(i),endCoord:a(o),middleNormalized:u,middleCoord:a(u),height:a(s)})})};return{events:i(e),rfmos:i(t)}}(t,r)},[t,r]),y=Object(n.useMemo)(function(){return function(e,t){var r=e.events.find(function(e){return e.id===t}),n=r?r.middleCoord:0,a=void 0===r?null:e.rfmos.find(function(e){return r.middleNormalized>e.startNormalized&&r.middleNormalized<e.endNormalized});return{y:n,currentRfmoId:a?a.id:null,currentEvent:r}}(m,l)},[m,l]),g=Object(n.useState)(null),b=Object(f.a)(g,2),v=b[0],S=b[1],O=Object(n.useRef)(Object(Te.debounce)(function(e){setTimeout(function(){return S(e.encounteredVessel)},200)},1e3));Object(n.useEffect)(function(){S(null),O.current.cancel(),null!==l&&null!==y.currentEvent.encounteredVessel&&O.current(y.currentEvent)},[l,y]);var I=document.documentElement.clientHeight,E=window.innerHeight||0,T=Math.max(I,E)/2;return a.a.createElement(n.Fragment,null,a.a.createElement("div",{style:{top:T,position:"fixed",zIndex:10,width:100,borderBottom:"1px solid red"}}),a.a.createElement("div",{className:"timeline"},a.a.createElement("svg",null,a.a.createElement("g",{className:"rfmosColumn"},m.rfmos.map(function(e){return a.a.createElement("rect",{x:0,y:e.startCoord,key:e.id,width:"100%",height:e.height,className:Ae()({highlighted:e.id===y.currentRfmoId})})})),a.a.createElement("g",{className:"eventsColumn"},m.events.map(function(e){return a.a.createElement("rect",{x:0,y:e.startCoord,key:e.id,width:10,height:e.height,className:Ae()({highlighted:e.id===l}),onClick:function(){return _(e)}})})),a.a.createElement("g",{style:{transform:"translateY(".concat(y.y,")")}},a.a.createElement("line",{x1:"0%",x2:"100%"}),a.a.createElement("text",{x:"100%"},"Jan 12 2017"),a.a.createElement("text",{x:"100%"},"RFMO")))),a.a.createElement("div",{className:"detail"},m.events.map(function(e){var t=e.id===l;return a.a.createElement("div",{ref:function(t){return null===t?s.delete(e.id):s.set(e.id,t)},className:Ae()("event",{highlighted:t}),key:e.id},"Event ",e.id,a.a.createElement("br",null),null!==e.encounteredVessel&&a.a.createElement("div",null,"I'm an encounter!"),e.start.format("DD/MM/YYYY HH:mm"),a.a.createElement("br",null),e.end.format("DD/MM/YYYY HH:mm"),a.a.createElement("br",null),e.id===l&&null!==v&&a.a.createElement("div",{className:"encounteredVessel"},v),!0===t&&a.a.createElement("ul",null,a.a.createElement("li",null,"data 1"),a.a.createElement("li",null,"data 2"),a.a.createElement("li",null,"data 3"),a.a.createElement("li",null,"data 4")))})))}),Ne=Re,Fe=function(){return a.a.createElement(De,{events:Ne.event,rfmos:Ne.rfmo})},Be=r(237),Ue=r.n(Be);var Ve=r(10),ze=r(82),He=r(39),Ge=r(4),qe=r(77),Ke=r(63),$e=(r(173),r(62)),Ye=function(e,t,r){var n=e%360/parseFloat(360)*6,a=100===t?1:t%100/parseFloat(100),i=100===r?1:r%100/parseFloat(100),o=Math.floor(n),s=n-o,u=i*(1-a),c=i*(1-s*a),l=i*(1-(1-s)*a),p=o%6,f=[i,c,u,u,l,i][p],h=[l,i,i,c,u,u][p],d=[u,u,l,i,i,c][p];return{r:Math.round(255*f),g:Math.round(255*h),b:Math.round(255*d)}},We=function(e){return Ye(e,50,100)},Ze=function(e){var t=We(e);return"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")},Xe=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},Je=function(e){return 12*e},Qe=function(e){return e%360},et={version:8,glyphs:"https://raw.githubusercontent.com/GlobalFishingWatch/map-gl-glyphs/master/_output/{fontstack}/{range}.pbf?raw=true",sprite:"https://raw.githubusercontent.com/GlobalFishingWatch/map-gl-sprites/master/out/sprites",metadata:{"mapbox:groups":{"basemap-background":{name:"basemap-background"},static:{name:"static"},temporal:{name:"temporal"},tracks:{name:"tracks"},"basemap-foreground":{name:"basemap-foreground"}},"gfw:basemap-layers":[{id:"satellite",label:"Satellite"},{id:"north-star",label:"North Star"},{id:"labels",isOption:!0},{id:"graticules",isOption:!0},{id:"bathymetry",isOption:!0}],"gfw:styles":{selected:{fill:{"fill-color":["rgba($REFLAYER_COLOR_RGB, 0.5)","rgba(0,0,0,0)"]},circle:{"circle-stroke-width":[2,.5],"circle-stroke-color":["rgba(0,0,0,0)","rgba(0,0,0,0)"],"circle-radius":[15,0]}},highlighted:{circle:{"circle-stroke-color":["#fff","#000"]}}}},sources:{6:{metadata:{"gfw:carto-sql":"select * from kkp_regions","gfw:popups":[{id:"nama"},{id:"POLYGON_LAYERS_AREA"}]},type:"vector"},satellite:{tiles:["https://gtiles-dot-world-fishing-827.appspot.com/v1/tileset/sat/tile?x={x}&y={y}&z={z}"],type:"raster",tileSize:256,attribution:"Map data \xa92018 Google, \xa92018 NASA, INEGI, TerraMetrics \xb7 <a href='https://www.google.com/intl/en-GB_US/help/terms_maps.html'>Terms of Use</a><br>"},"north-star":{tiles:["https://gtiles-dot-world-fishing-827.appspot.com/v1/tileset/ns/tile?x={x}&y={y}&z={z}"],type:"raster",tileSize:256},labels:{tiles:["https://gtiles-dot-world-fishing-827.appspot.com/v1/tileset/nslabels/tile?x={x}&y={y}&z={z}"],type:"raster",tileSize:256},graticules:{metadata:{"gfw:carto-sql":"select * from graticules where scalerank=4"},type:"vector"},bathymetry:{metadata:{"gfw:carto-sql":"SELECT * FROM bathymetry order by depth"},type:"vector"},mpant:{metadata:{"gfw:carto-sql":"select * FROM wdpa_no_take_mpas","gfw:popups":[{id:"name"},{id:"wdpaid",label:"WDPA ID"},{id:"iucn_cat",label:"IUCN Category"},{id:"desig_eng",label:"Designation"},{id:"rep_area"},{id:"no_take"},{id:"status"},{id:"status_yr"},{id:"gov_type"},{id:"mang_auth"},{id:"verif"},{id:"iso3"}]},type:"vector"},mparu:{metadata:{"gfw:carto-sql":"SELECT * FROM wdpa_restricted_use_mpas","gfw:popups":[{id:"name"},{id:"wdpaid",label:"WDPA ID"},{id:"iucn_cat",label:"IUCN Category"},{id:"desig_eng",label:"Designation"},{id:"rep_area"},{id:"no_take"},{id:"status"},{id:"status_yr"},{id:"gov_type"},{id:"mang_auth"},{id:"verif"},{id:"iso3"}]},type:"vector"},eez:{metadata:{"gfw:carto-sql":"SELECT cartodb_id, the_geom, the_geom_webmercator, geoname as name, 'eez:' || mrgid as region_id, geoname as reporting_name, 'eez:' || mrgid as reporting_id FROM eez","gfw:popups":[{id:"name"}]},type:"vector",attribution:"EEZs: marineregions.org"},highseas:{metadata:{"gfw:carto-sql":"SELECT *, lower(regionid) as region_id FROM highseas","gfw:popups":[{id:"regionid"},{id:"POLYGON_LAYERS_AREA"}]},type:"vector"},protectedplanet:{metadata:{"gfw:carto-sql":"SELECT * from protectedplanet","gfw:popups":[{id:"name"},{id:"wdpaid",label:"WDPA ID"},{id:"iucn_cat",label:"IUCN Category"},{id:"desig_eng",label:"Designation"},{id:"rep_area"},{id:"no_take"},{id:"status"},{id:"status_yr"},{id:"gov_type"},{id:"mang_auth"},{id:"verif"},{id:"iso3"}]},type:"vector",attribution:"MPAs: www.protectedplanet.net"},rfmo:{metadata:{"gfw:carto-sql":"SELECT the_geom, the_geom_webmercator, cartodb_id, 'rfmo:' || rfb as reporting_id, 'rfmo:' || rfb as region_id, rfb as reporting_name, rfb FROM rfmo","gfw:popups":[{id:"rfb"},{id:"POLYGON_LAYERS_AREA"}]},type:"vector"},falklands_conservation:{metadata:{"gfw:carto-sql":"SELECT * FROM falklands_conservation","gfw:popups":[{id:"full_name"},{id:"zone"},{id:"area_sqkm"}]},type:"vector"},encounters_ais:{type:"vector",tiles:["https://api-dot-skytruth-pelagos-production.appspot.com/v2/tilesets/gfw-task-673-encounters-v3/{z},{x},{y}"]},events_fishing:{type:"vector",tiles:["https://events-dot-world-fishing-827.appspot.com/datasets/indonesia/events/fishing/tiles/{z},{x},{y}"]},events_encounter:{type:"vector",tiles:["https://events-dot-world-fishing-827.appspot.com/datasets/indonesia/events/encounter/tiles/{z},{x},{y}"],metadata:{"gfw:popups":[{id:"event_id"}]}},events_gap:{type:"vector",tiles:["https://events-dot-world-fishing-827.appspot.com/datasets/indonesia/events/gap/tiles/{z},{x},{y}"],metadata:{"gfw:popups":[{id:"event_id"}]}},events_port:{type:"vector",tiles:["https://events-dot-world-fishing-827.appspot.com/datasets/indonesia/events/port/tiles/{z},{x},{y}"],metadata:{"gfw:popups":[{id:"event_id"}]}},events_encounter_vessel:{type:"geojson",cluster:!0,clusterMaxZoom:10,data:{type:"FeatureCollection",features:[]}},events_gap_vessel:{type:"geojson",cluster:!0,clusterMaxZoom:10,data:{type:"FeatureCollection",features:[]}},events_port_vessel:{type:"geojson",cluster:!0,clusterMaxZoom:10,data:{type:"FeatureCollection",features:[]}}},layers:[{id:"background",metadata:{"mapbox:group":"basemap-background"},type:"background",layout:{visibility:"visible"},paint:{"background-color":"#001436"}},{id:"satellite",metadata:{"mapbox:group":"basemap-background"},type:"raster",source:"satellite",layout:{visibility:"visible"}},{id:"north-star",metadata:{"mapbox:group":"basemap-background"},type:"raster",source:"north-star"},{id:"bathymetry",metadata:{"mapbox:group":"basemap-background"},type:"fill",source:"bathymetry","source-layer":"bathymetry",paint:{"fill-color":["step",["get","depth"],"#1e346c",1e3,"#1a2f63",2e3,"#142655",3e3,"#101f4a",4e3,"#0d1b43",5e3,"#0a163b",6e3,"#061132",7e3,"#030d2a",8e3,"#01081e"],"fill-outline-color":"hsla(0, 0%, 100%, 0)","fill-opacity":["interpolate",["linear"],["zoom"],3,0,4,1]}},{id:"mpant",metadata:{"mapbox:group":"static"},type:"fill",source:"mpant","source-layer":"mpant"},{id:"mpant-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"mpant","source-layer":"mpant",layout:{"text-field":"{name}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"mparu",metadata:{"mapbox:group":"static"},type:"fill",source:"mparu","source-layer":"mparu"},{id:"mparu-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"mparu","source-layer":"mparu",layout:{"text-field":"{name}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"eez",metadata:{"mapbox:group":"static"},type:"fill",source:"eez","source-layer":"eez"},{id:"eez-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"eez","source-layer":"eez",layout:{"text-field":"{name}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"highseas",metadata:{"mapbox:group":"static"},type:"fill",source:"highseas","source-layer":"highseas"},{id:"highseas-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"highseas","source-layer":"highseas",layout:{"text-field":"{regionid}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"rfmo",metadata:{"mapbox:group":"static"},type:"fill",source:"rfmo","source-layer":"rfmo"},{id:"rfmo-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"rfmo","source-layer":"rfmo",layout:{"text-field":"{reporting_name}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"6",metadata:{"mapbox:group":"static"},type:"fill",source:"6","source-layer":"6"},{id:"6-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"6","source-layer":"6",layout:{"text-field":"{nama}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"protectedplanet",metadata:{"mapbox:group":"static"},type:"fill",source:"protectedplanet","source-layer":"protectedplanet"},{id:"protectedplanet-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"protectedplanet","source-layer":"protectedplanet",layout:{"text-field":"{name}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"falklands_conservation",metadata:{"mapbox:group":"static"},type:"fill",source:"falklands_conservation","source-layer":"falklands_conservation"},{id:"falklands_conservation-labels",metadata:{"gfw:isLabel":!0,"mapbox:group":"static"},type:"symbol",source:"falklands_conservation","source-layer":"falklands_conservation",layout:{"text-field":"{full_name}","text-font":["Roboto Mono Light"],"text-size":10}},{id:"events_fishing",metadata:{"gfw:temporal":!0,"mapbox:group":"temporal"},type:"circle",source:"events_fishing","source-layer":"default",paint:{"circle-radius":3,"circle-color":"#FE81EB","circle-stroke-width":.5,"circle-stroke-color":"#000000"}},{id:"events_encounter",metadata:{"gfw:temporal":!0,"mapbox:group":"temporal"},type:"circle",source:"events_encounter","source-layer":"default",paint:{"circle-radius":3,"circle-color":"#E5647D","circle-stroke-width":.5,"circle-stroke-color":"#000000"}},{id:"encounters_ais",type:"circle",source:"encounters_ais","source-layer":"points",metadata:{"gfw:temporal":!0,"gfw:temporalField":"timeIndex","mapbox:group":"temporal"},paint:{"circle-color":"#e5647d","circle-radius":3,"circle-opacity":.9}},{id:"encounters_ais_outline",type:"circle",source:"encounters_ais","source-layer":"points",metadata:{"gfw:temporal":!0,"gfw:temporalField":"timeIndex","gfw:mainColorPaintProperty":"circle-stroke-color","mapbox:group":"temporal"},paint:{"circle-color":"hsla(0, 0%, 0%, 0)","circle-stroke-color":"#e5647d","circle-stroke-width":1,"circle-radius":6}},{id:"events_gap",type:"circle",source:"events_gap","source-layer":"default",metadata:{"gfw:temporal":!0,"mapbox:group":"temporal"},paint:{"circle-radius":3,"circle-color":"#FFE7A0","circle-stroke-width":.5,"circle-stroke-color":"#000000"}},{id:"events_port",type:"circle",source:"events_port","source-layer":"default",metadata:{"gfw:temporal":!0,"mapbox:group":"temporal"},paint:{"circle-radius":3,"circle-color":"#44A1B9","circle-stroke-width":.5,"circle-stroke-color":"#000000"}},{id:"events_encounter_vessel",source:"events_encounter_vessel",type:"symbol",metadata:{"mapbox:group":"temporal","gfw:styles":{highlighted:{"icon-image":["encounter_highlight","encounter"]}}},layout:{"icon-image":"encounter","icon-allow-overlap":!0}},{id:"events_encounter_vessel_number",source:"events_encounter_vessel",type:"symbol",metadata:{"mapbox:group":"temporal"},filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["Roboto Medium"],"text-size":12,"text-anchor":"bottom-left","text-offset":[.8,-.2]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":2}},{id:"events_gap_vessel",source:"events_gap_vessel",type:"symbol",metadata:{"mapbox:group":"temporal","gfw:styles":{highlighted:{"icon-image":["gap_highlight","gap"]}}},layout:{"icon-image":"gap","icon-allow-overlap":!0}},{id:"events_gap_vessel_number",source:"events_gap_vessel",type:"symbol",metadata:{"mapbox:group":"temporal"},filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["Roboto Medium"],"text-size":12,"text-anchor":"bottom-left","text-offset":[.8,-.2]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":2}},{id:"events_port_vessel",source:"events_port_vessel",type:"symbol",metadata:{"mapbox:group":"temporal","gfw:styles":{highlighted:{"icon-image":["port_highlight","port"]}}},layout:{"icon-image":"port","icon-allow-overlap":!0}},{id:"events_port_vessel_number",source:"events_port_vessel",type:"symbol",metadata:{"mapbox:group":"temporal"},filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["Roboto Medium"],"text-size":12,"text-anchor":"bottom-left","text-offset":[.8,-.2]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":2}},{id:"graticules-lines",metadata:{"mapbox:group":"basemap-foreground"},type:"line",source:"graticules","source-layer":"graticules",filter:["==","$type","LineString"],paint:{"line-color":"#174084","line-opacity":{base:1,stops:[[0,.7],[8,.7],[9,.2]]},"line-width":.5}},{id:"graticules-labels",metadata:{"mapbox:group":"basemap-foreground"},type:"symbol",source:"graticules","source-layer":"graticules",filter:["==","$type","LineString"],layout:{"text-field":"{degrees}\xba","text-font":["Roboto Medium Italic"],"symbol-placement":"line","symbol-spacing":{base:1,stops:[[3,500],[8,1e3]]},"text-size":{base:1,stops:[[3,7],[7,12]]},"text-letter-spacing":.2},paint:{"text-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-translate":[-1,1],"text-halo-color":"hsla(0, 0%, 68%, 0.49)","text-opacity":{base:1,stops:[[0,1],[8,1],[9,0]]}}},{id:"labels",metadata:{"mapbox:group":"basemap-foreground"},type:"raster",source:"labels"}]},tt=r(78),rt={id:S.string.isRequired,url:S.string,data:S.object,color:S.string,type:S.oneOf(["geojson",void 0]),layerTemporalExtents:S.arrayOf(S.arrayOf(S.number)),fitBoundsOnLoad:S.bool},nt={id:S.string.isRequired,tilesetId:S.string,subtype:S.string,visible:S.bool,hue:S.number,opacity:S.number,filters:S.arrayOf(S.shape({hue:S.number,filterValues:S.object})),header:S.shape({endpoints:S.object,isPBF:S.bool,colsByName:S.object,temporalExtents:S.arrayOf(S.arrayOf(S.number)),temporalExtentsLess:S.bool}).isRequired,interactive:S.bool},at={id:S.string,visible:S.bool},it={id:S.string.isRequired,visible:S.bool,selected:S.bool,selectedFeatures:S.shape({field:S.string,values:S.arrayOf(S.string)}),highlighted:S.bool,higlightedFeatures:S.shape({field:S.string,values:S.arrayOf(S.string)}),opacity:S.number,color:S.string,showLabels:S.bool,interactive:S.bool,filters:S.arrayOf(S.arrayOf(S.string)),isCustom:S.bool,subtype:S.oneOf([void 0,"geojson","raster"]),url:S.string,data:S.object,gl:S.object},ot={content:S.node,latitude:S.number.isRequired,longitude:S.number.isRequired},st={zoom:S.number,center:S.arrayOf(S.number)};function ut(e,t){return e===t}var ct=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=0,o=n.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var r=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}(n),u=e.apply(void 0,[function(){return i++,o.apply(null,arguments)}].concat(r)),c=e(function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return u.apply(null,e)});return c.resultFunc=o,c.dependencies=s,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut,r=null,n=null;return function(){return function(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}),lt=5,pt=1<<lt,ft=pt-1,ht={};function dt(e){e&&(e.value=!0)}function _t(){}function mt(e){return void 0===e.size&&(e.size=e.__iterate(gt)),e.size}function yt(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?mt(e)+t:t}function gt(){return!0}function bt(e,t,r){return(0===e&&!It(e)||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function vt(e,t){return Ot(e,t,0)}function St(e,t){return Ot(e,t,t)}function Ot(e,t,r){return void 0===e?r:It(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function It(e){return e<0||0===e&&1/e==-1/0}var Et="@@__IMMUTABLE_ITERABLE__@@";function Tt(e){return Boolean(e&&e[Et])}var wt="@@__IMMUTABLE_KEYED__@@";function At(e){return Boolean(e&&e[wt])}var Mt="@@__IMMUTABLE_INDEXED__@@";function Pt(e){return Boolean(e&&e[Mt])}function Lt(e){return At(e)||Pt(e)}var xt=function(e){return Tt(e)?e:nr(e)},Ct=function(e){function t(e){return At(e)?e:ar(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(xt),jt=function(e){function t(e){return Pt(e)?e:ir(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(xt),Rt=function(e){function t(e){return Tt(e)&&!Lt(e)?e:or(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(xt);xt.Keyed=Ct,xt.Indexed=jt,xt.Set=Rt;var kt="@@__IMMUTABLE_SEQ__@@";function Dt(e){return Boolean(e&&e[kt])}var Nt="@@__IMMUTABLE_RECORD__@@";function Ft(e){return Boolean(e&&e[Nt])}function Bt(e){return Tt(e)||Ft(e)}var Ut="@@__IMMUTABLE_ORDERED__@@";function Vt(e){return Boolean(e&&e[Ut])}var zt=0,Ht=1,Gt=2,qt="function"==typeof Symbol&&Symbol.iterator,Kt="@@iterator",$t=qt||Kt,Yt=function(e){this.next=e};function Wt(e,t,r,n){var a=0===e?t:1===e?r:[t,r];return n?n.value=a:n={value:a,done:!1},n}function Zt(){return{value:void 0,done:!0}}function Xt(e){return!!er(e)}function Jt(e){return e&&"function"==typeof e.next}function Qt(e){var t=er(e);return t&&t.call(e)}function er(e){var t=e&&(qt&&e[qt]||e[Kt]);if("function"==typeof t)return t}Yt.prototype.toString=function(){return"[Iterator]"},Yt.KEYS=zt,Yt.VALUES=Ht,Yt.ENTRIES=Gt,Yt.prototype.inspect=Yt.prototype.toSource=function(){return this.toString()},Yt.prototype[$t]=function(){return this};var tr=Object.prototype.hasOwnProperty;function rr(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var nr=function(e){function t(e){return null==e?pr():Bt(e)?e.toSeq():function(e){var t=dr(e);if(t)return t;if("object"==typeof e)return new ur(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var r=this._cache;if(r){for(var n=r.length,a=0;a!==n;){var i=r[t?n-++a:a++];if(!1===e(i[1],i[0],this))break}return a}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var r=this._cache;if(r){var n=r.length,a=0;return new Yt(function(){if(a===n)return{value:void 0,done:!0};var i=r[t?n-++a:a++];return Wt(e,i[0],i[1])})}return this.__iteratorUncached(e,t)},t}(xt),ar=function(e){function t(e){return null==e?pr().toKeyedSeq():Tt(e)?At(e)?e.toSeq():e.fromEntrySeq():Ft(e)?e.toSeq():fr(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(nr),ir=function(e){function t(e){return null==e?pr():Tt(e)?At(e)?e.entrySeq():e.toIndexedSeq():Ft(e)?e.toSeq().entrySeq():hr(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(nr),or=function(e){function t(e){return(Tt(e)&&!Lt(e)?e:ir(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(nr);nr.isSeq=Dt,nr.Keyed=ar,nr.Set=or,nr.Indexed=ir,nr.prototype[kt]=!0;var sr=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[yt(this,e)]:t},t.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length,a=0;a!==n;){var i=t?n-++a:a++;if(!1===e(r[i],i,this))break}return a},t.prototype.__iterator=function(e,t){var r=this._array,n=r.length,a=0;return new Yt(function(){if(a===n)return{value:void 0,done:!0};var i=t?n-++a:a++;return Wt(e,i,r[i])})},t}(ir),ur=function(e){function t(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return tr.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,a=n.length,i=0;i!==a;){var o=n[t?a-++i:i++];if(!1===e(r[o],o,this))break}return i},t.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,a=n.length,i=0;return new Yt(function(){if(i===a)return{value:void 0,done:!0};var o=n[t?a-++i:i++];return Wt(e,o,r[o])})},t}(ar);ur.prototype[Ut]=!0;var cr,lr=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=Qt(this._collection),n=0;if(Jt(r))for(var a;!(a=r.next()).done&&!1!==e(a.value,n++,this););return n},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=Qt(this._collection);if(!Jt(r))return new Yt(Zt);var n=0;return new Yt(function(){var t=r.next();return t.done?t:Wt(e,n++,t.value)})},t}(ir);function pr(){return cr||(cr=new sr([]))}function fr(e){var t=Array.isArray(e)?new sr(e):Xt(e)?new lr(e):void 0;if(t)return t.fromEntrySeq();if("object"==typeof e)return new ur(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function hr(e){var t=dr(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function dr(e){return rr(e)?new sr(e):Xt(e)?new lr(e):void 0}var _r="@@__IMMUTABLE_MAP__@@";function mr(e){return Boolean(e&&e[_r])}function yr(e){return mr(e)&&Vt(e)}function gr(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function br(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(gr(e)&&gr(t)&&e.equals(t))}var vr="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function Sr(e){return e>>>1&1073741824|3221225471&e}var Or=Object.prototype.valueOf;function Ir(e){switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return Sr(t)}(e);case"string":return e.length>xr?function(e){var t=Rr[e];return void 0===t&&(t=Er(e),jr===Cr&&(jr=0,Rr={}),jr++,Rr[e]=t),t}(e):Er(e);case"object":case"function":return null===e?1108378658:"function"==typeof e.hashCode?Sr(e.hashCode(e)):(e.valueOf!==Or&&"function"==typeof e.valueOf&&(e=e.valueOf(e)),function(e){var t;if(Mr&&void 0!==(t=Tr.get(e)))return t;if(void 0!==(t=e[Lr]))return t;if(!Ar){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Lr]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++Pr,1073741824&Pr&&(Pr=0),Mr)Tr.set(e,t);else{if(void 0!==wr&&!1===wr(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Ar)Object.defineProperty(e,Lr,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Lr]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Lr]=t}}return t}(e));case"undefined":return 1108378659;default:if("function"==typeof e.toString)return Er(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function Er(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return Sr(t)}var Tr,wr=Object.isExtensible,Ar=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Mr="function"==typeof WeakMap;Mr&&(Tr=new WeakMap);var Pr=0,Lr="__immutablehash__";"function"==typeof Symbol&&(Lr=Symbol(Lr));var xr=16,Cr=255,jr=0,Rr={},kr=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=Vr(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var r=this,n=Ur(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t,n){return e(t,n,r)},t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(ar);kr.prototype[Ut]=!0;var Dr=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return t&&mt(this),this._iter.__iterate(function(a){return e(a,t?r.size-++n:n++,r)},t)},t.prototype.__iterator=function(e,t){var r=this,n=this._iter.__iterator(Ht,t),a=0;return t&&mt(this),new Yt(function(){var i=n.next();return i.done?i:Wt(e,t?r.size-++a:a++,i.value,i)})},t}(ir),Nr=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(Ht,t);return new Yt(function(){var t=r.next();return t.done?t:Wt(e,t.value,t.value,t)})},t}(or),Fr=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){if(t){Xr(t);var n=Tt(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}},t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(Ht,t);return new Yt(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){Xr(n);var a=Tt(n);return Wt(e,a?n.get(0):n[0],a?n.get(1):n[1],t)}}})},t}(ar);function Br(e){var t=Qr(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=en,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return!1!==t(r,e,n)},r)},t.__iteratorUncached=function(t,r){if(t===Gt){var n=e.__iterator(t,r);return new Yt(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===Ht?zt:Ht,r)},t}function Ur(e,t,r){var n=Qr(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,a){var i=e.get(n,ht);return i===ht?a:t.call(r,i,n,e)},n.__iterateUncached=function(n,a){var i=this;return e.__iterate(function(e,a,o){return!1!==n(t.call(r,e,a,o),a,i)},a)},n.__iteratorUncached=function(n,a){var i=e.__iterator(Gt,a);return new Yt(function(){var a=i.next();if(a.done)return a;var o=a.value,s=o[0];return Wt(n,s,t.call(r,o[1],s,e),a)})},n}function Vr(e,t){var r=this,n=Qr(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Br(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=en,n.__iterate=function(r,n){var a=this,i=0;return n&&mt(e),e.__iterate(function(e,o){return r(e,t?o:n?a.size-++i:i++,a)},!n)},n.__iterator=function(n,a){var i=0;a&&mt(e);var o=e.__iterator(Gt,!a);return new Yt(function(){var e=o.next();if(e.done)return e;var s=e.value;return Wt(n,t?s[0]:a?r.size-++i:i++,s[1],e)})},n}function zr(e,t,r,n){var a=Qr(e);return n&&(a.has=function(n){var a=e.get(n,ht);return a!==ht&&!!t.call(r,a,n,e)},a.get=function(n,a){var i=e.get(n,ht);return i!==ht&&t.call(r,i,n,e)?i:a}),a.__iterateUncached=function(a,i){var o=this,s=0;return e.__iterate(function(e,i,u){if(t.call(r,e,i,u))return s++,a(e,n?i:s-1,o)},i),s},a.__iteratorUncached=function(a,i){var o=e.__iterator(Gt,i),s=0;return new Yt(function(){for(;;){var i=o.next();if(i.done)return i;var u=i.value,c=u[0],l=u[1];if(t.call(r,l,c,e))return Wt(a,n?c:s++,l,i)}})},a}function Hr(e,t,r,n){var a=e.size;if(bt(t,r,a))return e;var i=vt(t,a),o=St(r,a);if(i!=i||o!=o)return Hr(e.toSeq().cacheResult(),t,r,n);var s,u=o-i;u==u&&(s=u<0?0:u);var c=Qr(e);return c.size=0===s?s:e.size&&s||void 0,!n&&Dt(e)&&s>=0&&(c.get=function(t,r){return(t=yt(this,t))>=0&&t<s?e.get(t+i,r):r}),c.__iterateUncached=function(t,r){var a=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(t,r);var o=0,u=!0,c=0;return e.__iterate(function(e,r){if(!u||!(u=o++<i))return c++,!1!==t(e,n?r:c-1,a)&&c!==s}),c},c.__iteratorUncached=function(t,r){if(0!==s&&r)return this.cacheResult().__iterator(t,r);if(0===s)return new Yt(Zt);var a=e.__iterator(t,r),o=0,u=0;return new Yt(function(){for(;o++<i;)a.next();if(++u>s)return{value:void 0,done:!0};var e=a.next();return n||t===Ht||e.done?e:Wt(t,u-1,t===zt?void 0:e.value[1],e)})},c}function Gr(e,t,r,n){var a=Qr(e);return a.__iterateUncached=function(a,i){var o=this;if(i)return this.cacheResult().__iterate(a,i);var s=!0,u=0;return e.__iterate(function(e,i,c){if(!s||!(s=t.call(r,e,i,c)))return u++,a(e,n?i:u-1,o)}),u},a.__iteratorUncached=function(a,i){var o=this;if(i)return this.cacheResult().__iterator(a,i);var s=e.__iterator(Gt,i),u=!0,c=0;return new Yt(function(){var e,i,l;do{if((e=s.next()).done)return n||a===Ht?e:Wt(a,c++,a===zt?void 0:e.value[1],e);var p=e.value;i=p[0],l=p[1],u&&(u=t.call(r,l,i,o))}while(u);return a===Gt?e:Wt(a,i,l,e)})},a}function qr(e,t,r){var n=Qr(e);return n.__iterateUncached=function(a,i){if(i)return this.cacheResult().__iterate(a,i);var o=0,s=!1;return function e(u,c){u.__iterate(function(i,u){return(!t||c<t)&&Tt(i)?e(i,c+1):(o++,!1===a(i,r?u:o-1,n)&&(s=!0)),!s},i)}(e,0),o},n.__iteratorUncached=function(n,a){if(a)return this.cacheResult().__iterator(n,a);var i=e.__iterator(n,a),o=[],s=0;return new Yt(function(){for(;i;){var e=i.next();if(!1===e.done){var u=e.value;if(n===Gt&&(u=u[1]),t&&!(o.length<t)||!Tt(u))return r?e:Wt(n,s++,u,e);o.push(i),i=u.__iterator(n,a)}else i=o.pop()}return{value:void 0,done:!0}})},n}function Kr(e,t,r){t||(t=tn);var n=At(e),a=0,i=e.toSeq().map(function(t,n){return[n,t,a++,r?r(t,n,e):t]}).valueSeq().toArray();return i.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?ar(i):Pt(e)?ir(i):or(i)}function $r(e,t,r){if(t||(t=tn),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return Yr(t,e[1],r[1])?r:e});return n&&n[0]}return e.reduce(function(e,r){return Yr(t,e,r)?r:e})}function Yr(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function Wr(e,t,r,n){var a=Qr(e),i=new sr(r).map(function(e){return e.size});return a.size=n?i.max():i.min(),a.__iterate=function(e,t){for(var r,n=this.__iterator(Ht,t),a=0;!(r=n.next()).done&&!1!==e(r.value,a++,this););return a},a.__iteratorUncached=function(e,a){var i=r.map(function(e){return e=xt(e),Qt(a?e.reverse():e)}),o=0,s=!1;return new Yt(function(){var r;return s||(r=i.map(function(e){return e.next()}),s=n?r.every(function(e){return e.done}):r.some(function(e){return e.done})),s?{value:void 0,done:!0}:Wt(e,o++,t.apply(null,r.map(function(e){return e.value})))})},a}function Zr(e,t){return e===t?e:Dt(e)?t:e.constructor(t)}function Xr(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Jr(e){return At(e)?Ct:Pt(e)?jt:Rt}function Qr(e){return Object.create((At(e)?ar:Pt(e)?ir:or).prototype)}function en(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):nr.prototype.cacheResult.call(this)}function tn(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function rn(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),a=0;a<r;a++)n[a]=e[a+t];return n}function nn(e,t){if(!e)throw new Error(t)}function an(e){nn(e!==1/0,"Cannot perform this action with an infinite size.")}function on(e){if(rr(e)&&"string"!=typeof e)return e;if(Vt(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}function sn(e){return e&&("function"!=typeof e.constructor||"Object"===e.constructor.name)}function un(e){return"object"==typeof e&&(Bt(e)||Array.isArray(e)||sn(e))}function cn(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function ln(e,t,r){return Bt(e)?e.get(t,r):function(e,t){return Bt(e)?e.has(t):un(e)&&tr.call(e,t)}(e,t)?"function"==typeof e.get?e.get(t):e[t]:r}function pn(e){if(Array.isArray(e))return rn(e);var t={};for(var r in e)tr.call(e,r)&&(t[r]=e[r]);return t}function fn(e,t,r,n){n||(n=r,r=void 0);var a=function e(t,r,n,a,i,o){var s=r===ht;if(a===n.length){var u=s?i:r,c=o(u);return c===u?r:c}if(!s&&!un(r))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,a).map(cn)+"]: "+r);var l=n[a],p=s?ht:ln(r,l,ht),f=e(p===ht?t:Bt(p),p,n,a+1,i,o);return f===p?r:f===ht?function(e,t){if(!un(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(Bt(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!tr.call(e,t))return e;var r=pn(e);return Array.isArray(r)?r.splice(t,1):delete r[t],r}(r,l):function(e,t,r){if(!un(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(Bt(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,r)}if(tr.call(e,t)&&r===e[t])return e;var n=pn(e);return n[t]=r,n}(s?t?Hn():{}:r,l,f)}(Bt(e),e,on(t),0,r,n);return a===ht?r:a}function hn(e,t){return function(e,t,r){return fn(e,t,ht,function(){return r})}(this,e,t)}function dn(e){return function(e,t){return fn(e,t,function(){return ht})}(this,e)}function _n(e,t,r,n){return fn(e,[t],r,n)}function mn(e,t,r){return 1===arguments.length?e(this):_n(this,e,t,r)}function yn(e,t,r){return fn(this,e,t,r)}function gn(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return vn(this,e)}function bn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return vn(this,t,e)}function vn(e,t,r){for(var n=[],a=0;a<t.length;a++){var i=Ct(t[a]);0!==i.size&&n.push(i)}return 0===n.length?e:0!==e.toSeq().size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var t=r?function(t,n){_n(e,n,ht,function(e){return e===ht?t:r(e,t,n)})}:function(t,r){e.set(r,t)},a=0;a<n.length;a++)n[a].forEach(t)}):e.constructor(n[0])}function Sn(e,t,r){return On(e,t,function(e){return function t(r,n,a){return un(r)&&un(n)?On(r,[n],t):e?e(r,n,a):n}}(r))}function On(e,t,r){if(!un(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(Bt(e))return"function"==typeof r&&e.mergeWith?e.mergeWith.apply(e,[r].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var n=Array.isArray(e),a=e,i=n?jt:Ct,o=n?function(t){a===e&&(a=pn(a)),a.push(t)}:function(t,n){var i=tr.call(a,n),o=i&&r?r(a[n],t,n):t;i&&o===a[n]||(a===e&&(a=pn(a)),a[n]=o)},s=0;s<t.length;s++)i(t[s]).forEach(o);return a}function In(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Sn(this,e)}function En(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Sn(this,t,e)}function Tn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return fn(this,e,Hn(),function(e){return On(e,t)})}function wn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return fn(this,e,Hn(),function(e){return Sn(e,t)})}function An(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function Mn(){return this.__ownerID?this:this.__ensureOwner(new _t)}function Pn(){return this.__ensureOwner()}function Ln(){return this.__altered}Dr.prototype.cacheResult=kr.prototype.cacheResult=Nr.prototype.cacheResult=Fr.prototype.cacheResult=en;var xn=function(e){function t(t){return null==t?Hn():mr(t)&&!Vt(t)?t:Hn().withMutations(function(r){var n=e(t);an(n.size),n.forEach(function(e,t){return r.set(t,e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Hn().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return Gn(this,e,t)},t.prototype.remove=function(e){return Gn(this,e,ht)},t.prototype.deleteAll=function(e){var t=xt(e);return 0===t.size?this:this.withMutations(function(e){t.forEach(function(t){return e.remove(t)})})},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Hn()},t.prototype.sort=function(e){return _a(Kr(this,e))},t.prototype.sortBy=function(e,t){return _a(Kr(this,t,e))},t.prototype.map=function(e,t){return this.withMutations(function(r){r.forEach(function(n,a){r.set(a,e.call(t,n,a,r))})})},t.prototype.__iterator=function(e,t){return new Bn(this,e,t)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?zn(this.size,this._root,e,this.__hash):0===this.size?Hn():(this.__ownerID=e,this.__altered=!1,this)},t}(Ct);xn.isMap=mr;var Cn=xn.prototype;Cn[_r]=!0,Cn.delete=Cn.remove,Cn.removeAll=Cn.deleteAll,Cn.setIn=hn,Cn.removeIn=Cn.deleteIn=dn,Cn.update=mn,Cn.updateIn=yn,Cn.merge=Cn.concat=gn,Cn.mergeWith=bn,Cn.mergeDeep=In,Cn.mergeDeepWith=En,Cn.mergeIn=Tn,Cn.mergeDeepIn=wn,Cn.withMutations=An,Cn.wasAltered=Ln,Cn.asImmutable=Pn,Cn["@@transducer/init"]=Cn.asMutable=Mn,Cn["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},Cn["@@transducer/result"]=function(e){return e.asImmutable()};var jn=function(e,t){this.ownerID=e,this.entries=t};jn.prototype.get=function(e,t,r,n){for(var a=this.entries,i=0,o=a.length;i<o;i++)if(br(r,a[i][0]))return a[i][1];return n},jn.prototype.update=function(e,t,r,n,a,i,o){for(var s=a===ht,u=this.entries,c=0,l=u.length;c<l&&!br(n,u[c][0]);c++);var p=c<l;if(p?u[c][1]===a:s)return this;if(dt(o),(s||!p)&&dt(i),!s||1!==u.length){if(!p&&!s&&u.length>=Zn)return function(e,t,r,n){e||(e=new _t);for(var a=new Nn(e,Ir(r),[r,n]),i=0;i<t.length;i++){var o=t[i];a=a.update(e,0,void 0,o[0],o[1])}return a}(e,u,n,a);var f=e&&e===this.ownerID,h=f?u:rn(u);return p?s?c===l-1?h.pop():h[c]=h.pop():h[c]=[n,a]:h.push([n,a]),f?(this.entries=h,this):new jn(e,h)}};var Rn=function(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};Rn.prototype.get=function(e,t,r,n){void 0===t&&(t=Ir(r));var a=1<<((0===e?t:t>>>e)&ft),i=this.bitmap;return 0==(i&a)?n:this.nodes[Yn(i&a-1)].get(e+lt,t,r,n)},Rn.prototype.update=function(e,t,r,n,a,i,o){void 0===r&&(r=Ir(n));var s=(0===t?r:r>>>t)&ft,u=1<<s,c=this.bitmap,l=0!=(c&u);if(!l&&a===ht)return this;var p=Yn(c&u-1),f=this.nodes,h=l?f[p]:void 0,d=qn(h,e,t+lt,r,n,a,i,o);if(d===h)return this;if(!l&&d&&f.length>=Xn)return function(e,t,r,n,a){for(var i=0,o=new Array(pt),s=0;0!==r;s++,r>>>=1)o[s]=1&r?t[i++]:void 0;return o[n]=a,new kn(e,i+1,o)}(e,f,c,s,d);if(l&&!d&&2===f.length&&Kn(f[1^p]))return f[1^p];if(l&&d&&1===f.length&&Kn(d))return d;var _=e&&e===this.ownerID,m=l?d?c:c^u:c|u,y=l?d?Wn(f,p,d,_):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var a=new Array(n),i=0,o=0;o<n;o++)o===t&&(i=1),a[o]=e[o+i];return a}(f,p,_):function(e,t,r,n){var a=e.length+1;if(n&&t+1===a)return e[t]=r,e;for(var i=new Array(a),o=0,s=0;s<a;s++)s===t?(i[s]=r,o=-1):i[s]=e[s+o];return i}(f,p,d,_);return _?(this.bitmap=m,this.nodes=y,this):new Rn(e,m,y)};var kn=function(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};kn.prototype.get=function(e,t,r,n){void 0===t&&(t=Ir(r));var a=(0===e?t:t>>>e)&ft,i=this.nodes[a];return i?i.get(e+lt,t,r,n):n},kn.prototype.update=function(e,t,r,n,a,i,o){void 0===r&&(r=Ir(n));var s=(0===t?r:r>>>t)&ft,u=a===ht,c=this.nodes,l=c[s];if(u&&!l)return this;var p=qn(l,e,t+lt,r,n,a,i,o);if(p===l)return this;var f=this.count;if(l){if(!p&&--f<Jn)return function(e,t,r,n){for(var a=0,i=0,o=new Array(f),s=0,u=1,c=t.length;s<c;s++,u<<=1){var l=t[s];void 0!==l&&s!==n&&(a|=u,o[i++]=l)}return new Rn(e,a,o)}(e,c,0,s)}else f++;var h=e&&e===this.ownerID,d=Wn(c,s,p,h);return h?(this.count=f,this.nodes=d,this):new kn(e,f,d)};var Dn=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};Dn.prototype.get=function(e,t,r,n){for(var a=this.entries,i=0,o=a.length;i<o;i++)if(br(r,a[i][0]))return a[i][1];return n},Dn.prototype.update=function(e,t,r,n,a,i,o){void 0===r&&(r=Ir(n));var s=a===ht;if(r!==this.keyHash)return s?this:(dt(o),dt(i),$n(this,e,t,r,[n,a]));for(var u=this.entries,c=0,l=u.length;c<l&&!br(n,u[c][0]);c++);var p=c<l;if(p?u[c][1]===a:s)return this;if(dt(o),(s||!p)&&dt(i),s&&2===l)return new Nn(e,this.keyHash,u[1^c]);var f=e&&e===this.ownerID,h=f?u:rn(u);return p?s?c===l-1?h.pop():h[c]=h.pop():h[c]=[n,a]:h.push([n,a]),f?(this.entries=h,this):new Dn(e,this.keyHash,h)};var Nn=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};Nn.prototype.get=function(e,t,r,n){return br(r,this.entry[0])?this.entry[1]:n},Nn.prototype.update=function(e,t,r,n,a,i,o){var s=a===ht,u=br(n,this.entry[0]);return(u?a===this.entry[1]:s)?this:(dt(o),s?void dt(i):u?e&&e===this.ownerID?(this.entry[1]=a,this):new Nn(e,this.keyHash,[n,a]):(dt(i),$n(this,e,t,Ir(n),[n,a])))},jn.prototype.iterate=Dn.prototype.iterate=function(e,t){for(var r=this.entries,n=0,a=r.length-1;n<=a;n++)if(!1===e(r[t?a-n:n]))return!1},Rn.prototype.iterate=kn.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,a=r.length-1;n<=a;n++){var i=r[t?a-n:n];if(i&&!1===i.iterate(e,t))return!1}},Nn.prototype.iterate=function(e,t){return e(this.entry)};var Fn,Bn=function(e){function t(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Vn(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,a=void 0;if(r.entry){if(0===n)return Un(e,r.entry)}else if(r.entries){if(n<=(a=r.entries.length-1))return Un(e,r.entries[this._reverse?a-n:n])}else if(n<=(a=r.nodes.length-1)){var i=r.nodes[this._reverse?a-n:n];if(i){if(i.entry)return Un(e,i.entry);t=this._stack=Vn(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(Yt);function Un(e,t){return Wt(e,t[0],t[1])}function Vn(e,t){return{node:e,index:0,__prev:t}}function zn(e,t,r,n){var a=Object.create(Cn);return a.size=e,a._root=t,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}function Hn(){return Fn||(Fn=zn(0))}function Gn(e,t,r){var n,a;if(e._root){var i={value:!1},o={value:!1};if(n=qn(e._root,e.__ownerID,0,void 0,t,r,i,o),!o.value)return e;a=e.size+(i.value?r===ht?-1:1:0)}else{if(r===ht)return e;a=1,n=new jn(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=a,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?zn(a,n):Hn()}function qn(e,t,r,n,a,i,o,s){return e?e.update(t,r,n,a,i,o,s):i===ht?e:(dt(s),dt(o),new Nn(t,n,[a,i]))}function Kn(e){return e.constructor===Nn||e.constructor===Dn}function $n(e,t,r,n,a){if(e.keyHash===n)return new Dn(t,n,[e.entry,a]);var i,o=(0===r?e.keyHash:e.keyHash>>>r)&ft,s=(0===r?n:n>>>r)&ft,u=o===s?[$n(e,t,r+lt,n,a)]:(i=new Nn(t,n,a),o<s?[e,i]:[i,e]);return new Rn(t,1<<o|1<<s,u)}function Yn(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}function Wn(e,t,r,n){var a=n?e:rn(e);return a[t]=r,a}var Zn=pt/4,Xn=pt/2,Jn=pt/4,Qn="@@__IMMUTABLE_LIST__@@";function ea(e){return Boolean(e&&e[Qn])}var ta=function(e){function t(t){var r=ua();if(null==t)return r;if(ea(t))return t;var n=e(t),a=n.size;return 0===a?r:(an(a),a>0&&a<pt?sa(0,a,lt,null,new na(n.toArray())):r.withMutations(function(e){e.setSize(a),n.forEach(function(t,r){return e.set(r,t)})}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=yt(this,e))>=0&&e<this.size){var r=pa(this,e+=this._origin);return r&&r.array[e&ft]}return t},t.prototype.set=function(e,t){return function(e,t,r){if((t=yt(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?fa(e,t).set(0,r):fa(e,0,t+1).set(t,r)});t+=e._origin;var n=e._tail,a=e._root,i={value:!1};return t>=ha(e._capacity)?n=ca(n,e.__ownerID,0,t,r,i):a=ca(a,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=a,e._tail=n,e.__hash=void 0,e.__altered=!0,e):sa(e._origin,e._capacity,e._level,a,n):e}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=lt,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ua()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(r){fa(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},t.prototype.pop=function(){return fa(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){fa(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},t.prototype.shift=function(){return fa(this,1)},t.prototype.concat=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++){var a=t[n],i=e("string"!=typeof a&&Xt(a)?a:[a]);0!==i.size&&r.push(i)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){r.forEach(function(t){return t.forEach(function(t){return e.push(t)})})}):this.constructor(r[0])},t.prototype.setSize=function(e){return fa(this,0,e)},t.prototype.map=function(e,t){var r=this;return this.withMutations(function(n){for(var a=0;a<r.size;a++)n.set(a,e.call(t,n.get(a),a,n))})},t.prototype.slice=function(e,t){var r=this.size;return bt(e,t,r)?this:fa(this,vt(e,r),St(t,r))},t.prototype.__iterator=function(e,t){var r=t?this.size:0,n=oa(this,t);return new Yt(function(){var a=n();return a===ia?{value:void 0,done:!0}:Wt(e,t?--r:r++,a)})},t.prototype.__iterate=function(e,t){for(var r,n=t?this.size:0,a=oa(this,t);(r=a())!==ia&&!1!==e(r,t?--n:n++,this););return n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?sa(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?ua():(this.__ownerID=e,this.__altered=!1,this)},t}(jt);ta.isList=ea;var ra=ta.prototype;ra[Qn]=!0,ra.delete=ra.remove,ra.merge=ra.concat,ra.setIn=hn,ra.deleteIn=ra.removeIn=dn,ra.update=mn,ra.updateIn=yn,ra.mergeIn=Tn,ra.mergeDeepIn=wn,ra.withMutations=An,ra.wasAltered=Ln,ra.asImmutable=Pn,ra["@@transducer/init"]=ra.asMutable=Mn,ra["@@transducer/step"]=function(e,t){return e.push(t)},ra["@@transducer/result"]=function(e){return e.asImmutable()};var na=function(e,t){this.array=e,this.ownerID=t};na.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&ft;if(n>=this.array.length)return new na([],e);var a,i=0===n;if(t>0){var o=this.array[n];if((a=o&&o.removeBefore(e,t-lt,r))===o&&i)return this}if(i&&!a)return this;var s=la(this,e);if(!i)for(var u=0;u<n;u++)s.array[u]=void 0;return a&&(s.array[n]=a),s},na.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,a=r-1>>>t&ft;if(a>=this.array.length)return this;if(t>0){var i=this.array[a];if((n=i&&i.removeAfter(e,t-lt,r))===i&&a===this.array.length-1)return this}var o=la(this,e);return o.array.splice(a+1),n&&(o.array[a]=n),o};var aa,ia={};function oa(e,t){var r=e._origin,n=e._capacity,a=ha(n),i=e._tail;return function e(o,s,u){return 0===s?function(e,o){var s=o===a?i&&i.array:e&&e.array,u=o>r?0:r-o,c=n-o;return c>pt&&(c=pt),function(){if(u===c)return ia;var e=t?--c:u++;return s&&s[e]}}(o,u):function(a,i,o){var s,u=a&&a.array,c=o>r?0:r-o>>i,l=1+(n-o>>i);return l>pt&&(l=pt),function(){for(;;){if(s){var r=s();if(r!==ia)return r;s=null}if(c===l)return ia;var n=t?--l:c++;s=e(u&&u[n],i-lt,o+(n<<i))}}}(o,s,u)}(e._root,e._level,0)}function sa(e,t,r,n,a,i,o){var s=Object.create(ra);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=a,s.__ownerID=i,s.__hash=o,s.__altered=!1,s}function ua(){return aa||(aa=sa(0,0,lt))}function ca(e,t,r,n,a,i){var o,s=n>>>r&ft,u=e&&s<e.array.length;if(!u&&void 0===a)return e;if(r>0){var c=e&&e.array[s],l=ca(c,t,r-lt,n,a,i);return l===c?e:((o=la(e,t)).array[s]=l,o)}return u&&e.array[s]===a?e:(i&&dt(i),o=la(e,t),void 0===a&&s===o.array.length-1?o.array.pop():o.array[s]=a,o)}function la(e,t){return t&&e&&t===e.ownerID?e:new na(e?e.array.slice():[],t)}function pa(e,t){if(t>=ha(e._capacity))return e._tail;if(t<1<<e._level+lt){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&ft],n-=lt;return r}}function fa(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new _t,a=e._origin,i=e._capacity,o=a+t,s=void 0===r?i:r<0?i+r:a+r;if(o===a&&s===i)return e;if(o>=s)return e.clear();for(var u=e._level,c=e._root,l=0;o+l<0;)c=new na(c&&c.array.length?[void 0,c]:[],n),l+=1<<(u+=lt);l&&(o+=l,a+=l,s+=l,i+=l);for(var p=ha(i),f=ha(s);f>=1<<u+lt;)c=new na(c&&c.array.length?[c]:[],n),u+=lt;var h=e._tail,d=f<p?pa(e,s-1):f>p?new na([],n):h;if(h&&f>p&&o<i&&h.array.length){for(var _=c=la(c,n),m=u;m>lt;m-=lt){var y=p>>>m&ft;_=_.array[y]=la(_.array[y],n)}_.array[p>>>lt&ft]=h}if(s<i&&(d=d&&d.removeAfter(n,0,s)),o>=f)o-=f,s-=f,u=lt,c=null,d=d&&d.removeBefore(n,0,o);else if(o>a||f<p){for(l=0;c;){var g=o>>>u&ft;if(g!==f>>>u&ft)break;g&&(l+=(1<<u)*g),u-=lt,c=c.array[g]}c&&o>a&&(c=c.removeBefore(n,u,o-l)),c&&f<p&&(c=c.removeAfter(n,u,f-l)),l&&(o-=l,s-=l)}return e.__ownerID?(e.size=s-o,e._origin=o,e._capacity=s,e._level=u,e._root=c,e._tail=d,e.__hash=void 0,e.__altered=!0,e):sa(o,s,u,c,d)}function ha(e){return e<pt?0:e-1>>>lt<<lt}var da,_a=function(e){function t(e){return null==e?ya():yr(e)?e:ya().withMutations(function(t){var r=Ct(e);an(r.size),r.forEach(function(e,r){return t.set(r,e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ya()},t.prototype.set=function(e,t){return ga(this,e,t)},t.prototype.remove=function(e){return ga(this,e,ht)},t.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?ma(t,r,e,this.__hash):0===this.size?ya():(this.__ownerID=e,this._map=t,this._list=r,this)},t}(xn);function ma(e,t,r,n){var a=Object.create(_a.prototype);return a.size=e?e.size:0,a._map=e,a._list=t,a.__ownerID=r,a.__hash=n,a}function ya(){return da||(da=ma(Hn(),ua()))}function ga(e,t,r){var n,a,i=e._map,o=e._list,s=i.get(t),u=void 0!==s;if(r===ht){if(!u)return e;o.size>=pt&&o.size>=2*i.size?(n=(a=o.filter(function(e,t){return void 0!==e&&s!==t})).toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(n.__ownerID=a.__ownerID=e.__ownerID)):(n=i.remove(t),a=s===o.size-1?o.pop():o.set(s,void 0))}else if(u){if(r===o.get(s)[1])return e;n=i,a=o.set(s,[t,r])}else n=i.set(t,o.size),a=o.set(o.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=a,e.__hash=void 0,e):ma(n,a)}_a.isOrderedMap=yr,_a.prototype[Ut]=!0,_a.prototype.delete=_a.prototype.remove;var ba="@@__IMMUTABLE_STACK__@@";function va(e){return Boolean(e&&e[ba])}var Sa=function(e){function t(e){return null==e?Ta():va(e)?e:Ta().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var r=this._head;for(e=yt(this,e);r&&e--;)r=r.next;return r?r.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ea(t,r)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&va(t))return t;an(t.size);var r=this.size,n=this._head;return t.__iterate(function(e){r++,n={value:e,next:n}},!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ea(r,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ta()},t.prototype.slice=function(t,r){if(bt(t,r,this.size))return this;var n=vt(t,this.size);if(St(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var a=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=a,this._head=i,this.__hash=void 0,this.__altered=!0,this):Ea(a,i)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ea(this.size,this._head,e,this.__hash):0===this.size?Ta():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var r=this;if(t)return new sr(this.toArray()).__iterate(function(t,n){return e(t,n,r)},t);for(var n=0,a=this._head;a&&!1!==e(a.value,n++,this);)a=a.next;return n},t.prototype.__iterator=function(e,t){if(t)return new sr(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new Yt(function(){if(n){var t=n.value;return n=n.next,Wt(e,r++,t)}return{value:void 0,done:!0}})},t}(jt);Sa.isStack=va;var Oa,Ia=Sa.prototype;function Ea(e,t,r,n){var a=Object.create(Ia);return a.size=e,a._head=t,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}function Ta(){return Oa||(Oa=Ea(0))}Ia[ba]=!0,Ia.shift=Ia.pop,Ia.unshift=Ia.push,Ia.unshiftAll=Ia.pushAll,Ia.withMutations=An,Ia.wasAltered=Ln,Ia.asImmutable=Pn,Ia["@@transducer/init"]=Ia.asMutable=Mn,Ia["@@transducer/step"]=function(e,t){return e.unshift(t)},Ia["@@transducer/result"]=function(e){return e.asImmutable()};var wa="@@__IMMUTABLE_SET__@@";function Aa(e){return Boolean(e&&e[wa])}function Ma(e){return Aa(e)&&Vt(e)}function Pa(e,t){if(e===t)return!0;if(!Tt(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||At(e)!==At(t)||Pt(e)!==Pt(t)||Vt(e)!==Vt(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!Lt(e);if(Vt(e)){var n=e.entries();return t.every(function(e,t){var a=n.next().value;return a&&br(a[1],e)&&(r||br(a[0],t))})&&n.next().done}var a=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{a=!0;var i=e;e=t,t=i}var o=!0,s=t.__iterate(function(t,n){if(r?!e.has(t):a?!br(t,e.get(n,ht)):!br(e.get(n,ht),t))return o=!1,!1});return o&&e.size===s}function La(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function xa(e){if(!e||"object"!=typeof e)return e;if(!Tt(e)){if(!un(e))return e;e=nr(e)}if(At(e)){var t={};return e.__iterate(function(e,r){t[r]=xa(e)}),t}var r=[];return e.__iterate(function(e){r.push(xa(e))}),r}var Ca=function(e){function t(t){return null==t?Na():Aa(t)&&!Vt(t)?t:Na().withMutations(function(r){var n=e(t);an(n.size),n.forEach(function(e){return r.add(e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(Ct(e).keySeq())},t.intersect=function(e){return(e=xt(e).toArray()).length?Ra.intersect.apply(t(e.pop()),e):Na()},t.union=function(e){return(e=xt(e).toArray()).length?Ra.union.apply(t(e.pop()),e):Na()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return ka(this,this._map.set(e,e))},t.prototype.remove=function(e){return ka(this,this._map.remove(e))},t.prototype.clear=function(){return ka(this,this._map.clear())},t.prototype.map=function(e,t){var r=this,n=[],a=[];return this.forEach(function(i){var o=e.call(t,i,i,r);o!==i&&(n.push(i),a.push(o))}),this.withMutations(function(e){n.forEach(function(t){return e.remove(t)}),a.forEach(function(t){return e.add(t)})})},t.prototype.union=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return 0===(t=t.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(r){for(var n=0;n<t.length;n++)e(t[n]).forEach(function(e){return r.add(e)})}):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map(function(t){return e(t)});var n=[];return this.forEach(function(e){t.every(function(t){return t.includes(e)})||n.push(e)}),this.withMutations(function(e){n.forEach(function(t){e.remove(t)})})},t.prototype.subtract=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map(function(t){return e(t)});var n=[];return this.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.push(e)}),this.withMutations(function(e){n.forEach(function(t){e.remove(t)})})},t.prototype.sort=function(e){return ei(Kr(this,e))},t.prototype.sortBy=function(e,t){return ei(Kr(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t){return e(t,t,r)},t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(Rt);Ca.isSet=Aa;var ja,Ra=Ca.prototype;function ka(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Da(e,t){var r=Object.create(Ra);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Na(){return ja||(ja=Da(Hn()))}Ra[wa]=!0,Ra.delete=Ra.remove,Ra.merge=Ra.concat=Ra.union,Ra.withMutations=An,Ra.asImmutable=Pn,Ra["@@transducer/init"]=Ra.asMutable=Mn,Ra["@@transducer/step"]=function(e,t){return e.add(t)},Ra["@@transducer/result"]=function(e){return e.asImmutable()},Ra.__empty=Na,Ra.__make=Da;var Fa,Ba=function(e){function t(e,r,n){if(!(this instanceof t))return new t(e,r,n);if(nn(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<e&&(n=-n),this._start=e,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-e)/n-1)+1),0===this.size){if(Fa)return Fa;Fa=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+yt(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,r){return bt(e,r,this.size)?this:(e=vt(e,this.size),(r=St(r,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var r=this.size,n=this._step,a=t?this._start+(r-1)*n:this._start,i=0;i!==r&&!1!==e(a,t?r-++i:i++,this);)a+=t?-n:n;return i},t.prototype.__iterator=function(e,t){var r=this.size,n=this._step,a=t?this._start+(r-1)*n:this._start,i=0;return new Yt(function(){if(i===r)return{value:void 0,done:!0};var o=a;return a+=t?-n:n,Wt(e,t?r-++i:i++,o)})},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:Pa(this,e)},t}(ir);function Ua(e,t,r){for(var n=on(t),a=0;a!==n.length;)if((e=ln(e,n[a++],ht))===ht)return r;return e}function Va(e,t){return Ua(this,e,t)}function za(){an(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e}xt.isIterable=Tt,xt.isKeyed=At,xt.isIndexed=Pt,xt.isAssociative=Lt,xt.isOrdered=Vt,xt.Iterator=Yt,La(xt,{toArray:function(){an(this.size);var e=new Array(this.size||0),t=At(this),r=0;return this.__iterate(function(n,a){e[r++]=t?[a,n]:n}),e},toIndexedSeq:function(){return new Dr(this)},toJS:function(){return xa(this)},toKeyedSeq:function(){return new kr(this,!0)},toMap:function(){return xn(this.toKeyedSeq())},toObject:za,toOrderedMap:function(){return _a(this.toKeyedSeq())},toOrderedSet:function(){return ei(At(this)?this.valueSeq():this)},toSet:function(){return Ca(At(this)?this.valueSeq():this)},toSetSeq:function(){return new Nr(this)},toSeq:function(){return Pt(this)?this.toIndexedSeq():At(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Sa(At(this)?this.valueSeq():this)},toList:function(){return ta(At(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Zr(this,function(e,t){var r=At(e),n=[e].concat(t).map(function(e){return Tt(e)?r&&(e=Ct(e)):e=r?fr(e):hr(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===n.length)return e;if(1===n.length){var a=n[0];if(a===e||r&&At(a)||Pt(e)&&Pt(a))return a}var i=new sr(n);return r?i=i.toKeyedSeq():Pt(e)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=n.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),i}(this,e))},includes:function(e){return this.some(function(t){return br(t,e)})},entries:function(){return this.__iterator(Gt)},every:function(e,t){an(this.size);var r=!0;return this.__iterate(function(n,a,i){if(!e.call(t,n,a,i))return r=!1,!1}),r},filter:function(e,t){return Zr(this,zr(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return an(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){an(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""}),t},keys:function(){return this.__iterator(zt)},map:function(e,t){return Zr(this,Ur(this,e,t))},reduce:function(e,t,r){return Ka(this,e,t,r,arguments.length<2,!1)},reduceRight:function(e,t,r){return Ka(this,e,t,r,arguments.length<2,!0)},reverse:function(){return Zr(this,Vr(this,!0))},slice:function(e,t){return Zr(this,Hr(this,e,t,!0))},some:function(e,t){return!this.every(Wa(e),t)},sort:function(e){return Zr(this,Kr(this,e))},values:function(){return this.__iterator(Ht)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return mt(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=xn().asMutable();return e.__iterate(function(a,i){n.update(t.call(r,a,i,e),0,function(e){return e+1})}),n.asImmutable()}(this,e,t)},equals:function(e){return Pa(this,e)},entrySeq:function(){var e=this;if(e._cache)return new sr(e._cache);var t=e.toSeq().map(Ya).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Wa(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate(function(r,a,i){if(e.call(t,r,a,i))return n=[a,r],!1}),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(gt,null,e)},flatMap:function(e,t){return Zr(this,function(e,t,r){var n=Jr(e);return e.toSeq().map(function(a,i){return n(t.call(r,a,i,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return Zr(this,qr(this,e,!0))},fromEntrySeq:function(){return new Fr(this)},get:function(e,t){return this.find(function(t,r){return br(r,e)},void 0,t)},getIn:Va,groupBy:function(e,t){return function(e,t,r){var n=At(e),a=(Vt(e)?_a():xn()).asMutable();e.__iterate(function(i,o){a.update(t.call(r,i,o,e),function(e){return(e=e||[]).push(n?[o,i]:i),e})});var i=Jr(e);return a.map(function(t){return Zr(e,i(t))}).asImmutable()}(this,e,t)},has:function(e){return this.get(e,ht)!==ht},hasIn:function(e){return Ua(this,e,ht)!==ht},isSubset:function(e){return e="function"==typeof e.includes?e:xt(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:xt(e)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return br(t,e)})},keySeq:function(){return this.toSeq().map($a).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return $r(this,e)},maxBy:function(e,t){return $r(this,t,e)},min:function(e){return $r(this,e?Za(e):Ja)},minBy:function(e,t){return $r(this,t?Za(t):Ja,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return Zr(this,Gr(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Wa(e),t)},sortBy:function(e,t){return Zr(this,Kr(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return Zr(this,function(e,t,r){var n=Qr(e);return n.__iterateUncached=function(n,a){var i=this;if(a)return this.cacheResult().__iterate(n,a);var o=0;return e.__iterate(function(e,a,s){return t.call(r,e,a,s)&&++o&&n(e,a,i)}),o},n.__iteratorUncached=function(n,a){var i=this;if(a)return this.cacheResult().__iterator(n,a);var o=e.__iterator(Gt,a),s=!0;return new Yt(function(){if(!s)return{value:void 0,done:!0};var e=o.next();if(e.done)return e;var a=e.value,u=a[0],c=a[1];return t.call(r,c,u,i)?n===Gt?e:Wt(n,u,c,e):(s=!1,{value:void 0,done:!0})})},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Wa(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=Vt(e),r=At(e),n=t?1:0;return function(e,t){return t=vr(t,3432918353),t=vr(t<<15|t>>>-15,461845907),t=vr(t<<13|t>>>-13,5),t=vr((t=(t+3864292196|0)^e)^t>>>16,2246822507),Sr((t=vr(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+Qa(Ir(e),Ir(t))|0}:function(e,t){n=n+Qa(Ir(e),Ir(t))|0}:t?function(e){n=31*n+Ir(e)|0}:function(e){n=n+Ir(e)|0}),n)}(this))}});var Ha=xt.prototype;Ha[Et]=!0,Ha[$t]=Ha.values,Ha.toJSON=Ha.toArray,Ha.__toStringMapper=cn,Ha.inspect=Ha.toSource=function(){return this.toString()},Ha.chain=Ha.flatMap,Ha.contains=Ha.includes,La(Ct,{flip:function(){return Zr(this,Br(this))},mapEntries:function(e,t){var r=this,n=0;return Zr(this,this.toSeq().map(function(a,i){return e.call(t,[i,a],n++,r)}).fromEntrySeq())},mapKeys:function(e,t){var r=this;return Zr(this,this.toSeq().flip().map(function(n,a){return e.call(t,n,a,r)}).flip())}});var Ga=Ct.prototype;Ga[wt]=!0,Ga[$t]=Ha.entries,Ga.toJSON=za,Ga.__toStringMapper=function(e,t){return cn(t)+": "+cn(e)},La(jt,{toKeyedSeq:function(){return new kr(this,!1)},filter:function(e,t){return Zr(this,zr(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Zr(this,Vr(this,!1))},slice:function(e,t){return Zr(this,Hr(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=vt(e,e<0?this.count():this.size);var n=this.slice(0,e);return Zr(this,1===r?n:n.concat(rn(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Zr(this,qr(this,e,!1))},get:function(e,t){return(e=yt(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e},void 0,t)},has:function(e){return(e=yt(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Zr(this,function(e,t){var r=Qr(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var a=this,i=0;return e.__iterate(function(e){return(!i||!1!==r(t,i++,a))&&!1!==r(e,i++,a)},n),i},r.__iteratorUncached=function(r,n){var a,i=e.__iterator(Ht,n),o=0;return new Yt(function(){return(!a||o%2)&&(a=i.next()).done?a:o%2?Wt(r,o++,t):Wt(r,o++,a.value,a)})},r}(this,e))},interleave:function(){var e=[this].concat(rn(arguments)),t=Wr(this.toSeq(),ir.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Zr(this,r)},keySeq:function(){return Ba(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return Zr(this,Gr(this,e,t,!1))},zip:function(){return Zr(this,Wr(this,Xa,[this].concat(rn(arguments))))},zipAll:function(){return Zr(this,Wr(this,Xa,[this].concat(rn(arguments)),!0))},zipWith:function(e){var t=rn(arguments);return t[0]=this,Zr(this,Wr(this,e,t))}});var qa=jt.prototype;function Ka(e,t,r,n,a,i){return an(e.size),e.__iterate(function(e,i,o){a?(a=!1,r=e):r=t.call(n,r,e,i,o)},i),r}function $a(e,t){return t}function Ya(e,t){return[t,e]}function Wa(e){return function(){return!e.apply(this,arguments)}}function Za(e){return function(){return-e.apply(this,arguments)}}function Xa(){return rn(arguments)}function Ja(e,t){return e<t?1:e>t?-1:0}function Qa(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}qa[Mt]=!0,qa[Ut]=!0,La(Rt,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),Rt.prototype.has=Ha.includes,Rt.prototype.contains=Rt.prototype.includes,La(ar,Ct.prototype),La(ir,jt.prototype),La(or,Rt.prototype);var ei=function(e){function t(e){return null==e?ai():Ma(e)?e:ai().withMutations(function(t){var r=Rt(e);an(r.size),r.forEach(function(e){return t.add(e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(Ct(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(Ca);ei.isOrderedSet=Ma;var ti,ri=ei.prototype;function ni(e,t){var r=Object.create(ri);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function ai(){return ti||(ti=ni(ya()))}ri[Ut]=!0,ri.zip=qa.zip,ri.zipWith=qa.zipWith,ri.__empty=ai,ri.__make=ni;var ii=function(e,t){var r,n=function n(i){var o=this;if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var s=Object.keys(e),u=a._indices={};a._name=t,a._keys=s,a._defaultValues=e;for(var c=0;c<s.length;c++){var l=s[c];u[l]=c,a[l]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+ui(this)+' with property "'+l+'" since that property name is part of the Record API.'):li(a,l)}}this.__ownerID=void 0,this._values=ta().withMutations(function(e){e.setSize(o._keys.length),Ct(i).forEach(function(t,r){e.set(o._indices[r],t===o._defaultValues[r]?void 0:t)})})},a=n.prototype=Object.create(oi);return a.constructor=n,t&&(n.displayName=t),n};ii.prototype.toString=function(){for(var e,t=ui(this)+" { ",r=this._keys,n=0,a=r.length;n!==a;n++)t+=(n?", ":"")+(e=r[n])+": "+cn(this.get(e));return t+" }"},ii.prototype.equals=function(e){return this===e||e&&this._keys===e._keys&&ci(this).equals(ci(e))},ii.prototype.hashCode=function(){return ci(this).hashCode()},ii.prototype.has=function(e){return this._indices.hasOwnProperty(e)},ii.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return void 0===n?this._defaultValues[e]:n},ii.prototype.set=function(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(r!==this._values&&!this.__ownerID)return si(this,r)}return this},ii.prototype.remove=function(e){return this.set(e)},ii.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:si(this,e)},ii.prototype.wasAltered=function(){return this._values.wasAltered()},ii.prototype.toSeq=function(){return ci(this)},ii.prototype.toJS=function(){return xa(this)},ii.prototype.entries=function(){return this.__iterator(Gt)},ii.prototype.__iterator=function(e,t){return ci(this).__iterator(e,t)},ii.prototype.__iterate=function(e,t){return ci(this).__iterate(e,t)},ii.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?si(this,t,e):(this.__ownerID=e,this._values=t,this)},ii.isRecord=Ft,ii.getDescriptiveName=ui;var oi=ii.prototype;function si(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function ui(e){return e.constructor.displayName||e.constructor.name||"Record"}function ci(e){return fr(e._keys.map(function(t){return[t,e.get(t)]}))}function li(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){nn(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}function pi(e,t){return function e(t,r,n,a,i,o){var s=Array.isArray(n)?ir:sn(n)?ar:null;if(s){if(~t.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");t.push(n),i&&""!==a&&i.push(a);var u=r.call(o,a,s(n).map(function(a,o){return e(t,r,a,o,i,n)}),i&&i.slice());return t.pop(),i&&i.pop(),u}return n}([],t||fi,e,"",t&&t.length>2?[]:void 0,{"":e})}function fi(e,t){return At(t)?t.toMap():t.toList()}function hi(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}oi[Nt]=!0,oi.delete=oi.remove,oi.deleteIn=oi.removeIn=dn,oi.getIn=Va,oi.hasIn=Ha.hasIn,oi.merge=gn,oi.mergeWith=bn,oi.mergeIn=Tn,oi.mergeDeep=In,oi.mergeDeepWith=En,oi.mergeDeepIn=wn,oi.setIn=hn,oi.update=mn,oi.updateIn=yn,oi.withMutations=An,oi.asMutable=Mn,oi.asImmutable=Pn,oi[$t]=oi.entries,oi.toJSON=oi.toObject=Ha.toObject,oi.inspect=oi.toSource=function(){return this.toString()},Math.PI,Math.PI;var di=function(e){return e.map.module.temporalExtent},_i=function(e){return e.map.module.highlightTemporalExtent},mi=ct(function(e){return e.map.tracks.data},function(e){return e.filter(function(e){return"geojson"===e.type})}),yi=ct(mi,function(e){return e.filter(function(e){return void 0!==e.data})}),gi=function(e,t){return{sources:Object(h.l)({},e.sources,t.sources),layers:[].concat(Object(h.m)(e.layers),Object(h.m)(t.layers))}},bi=function(e,t){var r=t.start,n=t.end;if(!e||!e.features)return null;var a=e.features.reduce(function(e,t){if(t.properties.coordinateProperties.times&&t.properties.coordinateProperties.times.length>0){var a=t.geometry.coordinates.reduce(function(e,a,i){var o=t.properties.coordinateProperties.times[i];return o>=r&&o<=n&&(e.coordinates.push(a),e.times.push(o)),e},{coordinates:[],times:[]});if(!a.coordinates.length)return e;var i=Object(h.l)({},t,{geometry:Object(h.l)({},t.geometry,{coordinates:a.coordinates}),properties:Object(h.l)({},t.properties,{coordinateProperties:{times:a.times}})});e.push(i)}return e},[]);return Object(h.l)({},e,{features:a})},vi=ct([di,yi],function(e,t){var r=e&&e.length>0,n=t&&t.length>0;if(!r||!n)return null;var a={start:e[0].getTime(),end:e[1].getTime()};return t.reduce(function(e,t){if(!t.data)return e;var r="".concat(t.id,"Track"),n={sources:Object(h.i)({},r,{type:"geojson",data:bi(t.data,a)}),layers:[{id:"".concat(t.id,"Lines"),source:r,type:"line",paint:{"line-width":1,"line-color":t.color}},{id:"".concat(t.id,"Points"),source:r,type:"circle",filter:["match",["geometry-type"],["","Point"],!0,!1],paint:{"circle-radius":4,"circle-color":t.color}}]};return gi(e,n)},{sources:{},layers:[]})}),Si=ct([_i,yi],function(e,t){var r=e&&e.length>0,n=t&&t.length>0;if(!r||!n)return null;var a={start:e[0].getTime(),end:e[1].getTime()};return t.reduce(function(e,t){if(!t.data)return e;var r="".concat(t.id,"HighlightedTrack"),n={sources:Object(h.i)({},r,{type:"geojson",data:bi(t.data,a)}),layers:[{id:"".concat(t.id,"HighlightedLines"),source:r,type:"line",paint:{"line-width":1,"line-color":"#fff"}}]};return gi(e,n)},{sources:{},layers:[]})}),Oi=ct([vi,Si],function(e,t){return t?gi(e,t):e}),Ii=Object(h.a)(function(e,t){function r(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function n(e,t,n){return void 0===n&&(n={}),r({type:"Point",coordinates:e},t,n)}function a(e,t,n){void 0===n&&(n={});for(var a=0,i=e;a<i.length;a++){var o=i[a];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,n)}function i(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,n)}function o(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function s(e,t,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:e},t,n)}function u(e,t,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:e},t,n)}function c(e,t,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:e},t,n)}function l(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function p(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function f(e){return e%(2*Math.PI)*180/Math.PI}function h(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=r,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return n(t).geometry;case"LineString":return i(t).geometry;case"Polygon":return a(t).geometry;case"MultiPoint":return u(t).geometry;case"MultiLineString":return s(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=n,t.points=function(e,t,r){return void 0===r&&(r={}),o(e.map(function(e){return n(e,t)}),r)},t.polygon=a,t.polygons=function(e,t,r){return void 0===r&&(r={}),o(e.map(function(e){return a(e,t)}),r)},t.lineString=i,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),o(e.map(function(e){return i(e,t)}),r)},t.featureCollection=o,t.multiLineString=s,t.multiPoint=u,t.multiPolygon=c,t.geometryCollection=function(e,t,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:e},t,n)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=l,t.lengthToRadians=p,t.lengthToDegrees=function(e,t){return f(p(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=f,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return l(p(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var a=t.areaFactors[r];if(!a)throw new Error("invalid original units");var i=t.areaFactors[n];if(!i)throw new Error("invalid final units");return e/a*i},t.isNumber=h,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!h(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}});Object(h.b)(Ii),Ii.earthRadius,Ii.factors,Ii.unitsFactors,Ii.areaFactors,Ii.feature,Ii.geometry,Ii.point,Ii.points,Ii.polygon,Ii.polygons,Ii.lineString,Ii.lineStrings,Ii.featureCollection,Ii.multiLineString,Ii.multiPoint,Ii.multiPolygon,Ii.geometryCollection,Ii.round,Ii.radiansToLength,Ii.lengthToRadians,Ii.lengthToDegrees,Ii.bearingToAzimuth,Ii.radiansToDegrees,Ii.degreesToRadians,Ii.convertLength,Ii.convertArea,Ii.isNumber,Ii.isObject,Ii.validateBBox,Ii.validateId,Ii.radians2degrees,Ii.degrees2radians,Ii.distanceToDegrees,Ii.distanceToRadians,Ii.radiansToDistance,Ii.bearingToAngle,Ii.convertDistance;var Ei=Object(h.a)(function(e,t){function r(e,t,n){if(null!==e)for(var a,i,o,s,u,c,l,p,f=0,h=0,d=e.type,_="FeatureCollection"===d,m="Feature"===d,y=_?e.features.length:1,g=0;g<y;g++){u=(p=!!(l=_?e.features[g].geometry:m?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<u;b++){var v=0,S=0;if(null!==(s=p?l.geometries[b]:l)){c=s.coordinates;var O=s.type;switch(f=!n||"Polygon"!==O&&"MultiPolygon"!==O?0:1,O){case null:break;case"Point":if(!1===t(c,h,g,v,S))return!1;h++,v++;break;case"LineString":case"MultiPoint":for(a=0;a<c.length;a++){if(!1===t(c[a],h,g,v,S))return!1;h++,"MultiPoint"===O&&v++}"LineString"===O&&v++;break;case"Polygon":case"MultiLineString":for(a=0;a<c.length;a++){for(i=0;i<c[a].length-f;i++){if(!1===t(c[a][i],h,g,v,S))return!1;h++}"MultiLineString"===O&&v++,"Polygon"===O&&S++}"Polygon"===O&&v++;break;case"MultiPolygon":for(a=0;a<c.length;a++){for(S=0,i=0;i<c[a].length;i++){for(o=0;o<c[a][i].length-f;o++){if(!1===t(c[a][i][o],h,g,v,S))return!1;h++}S++}v++}break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===r(s.geometries[a],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function i(e,t){var r,n,a,i,o,s,u,c,l,p,f=0,h="FeatureCollection"===e.type,d="Feature"===e.type,_=h?e.features.length:1;for(r=0;r<_;r++){for(s=h?e.features[r].geometry:d?e.geometry:e,c=h?e.features[r].properties:d?e.properties:{},l=h?e.features[r].bbox:d?e.bbox:void 0,p=h?e.features[r].id:d?e.id:void 0,o=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,a=0;a<o;a++)if(null!==(i=u?s.geometries[a]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,f,c,l,p))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],f,c,l,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,f,c,l,p))return!1;f++}}function o(e,t){i(e,function(e,r,n,a,i){var o,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(Ii.feature(e,n,{bbox:a,id:i}),r,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var u=0;u<e.coordinates.length;u++){var c={type:o,coordinates:e.coordinates[u]};if(!1===t(Ii.feature(c,n),r,u))return!1}})}function s(e,t){o(e,function(e,n,a){var i=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,u=0,c=0,l=0;return!1!==r(e,function(r,o,p,f,h){if(void 0===s||n>u||f>c||h>l)return s=r,u=n,c=f,l=h,void(i=0);var d=Ii.lineString([s,r],e.properties);if(!1===t(d,n,a,h,i))return!1;i++,s=r})&&void 0}}})}function u(e,t){if(!e)throw new Error("geojson is required");o(e,function(e,r,n){if(null!==e.geometry){var a=e.geometry.type,i=e.geometry.coordinates;switch(a){case"LineString":if(!1===t(e,r,n,0,0))return!1;break;case"Polygon":for(var o=0;o<i.length;o++)if(!1===t(Ii.lineString(i[o],e.properties),r,n,o))return!1}}})}Object.defineProperty(t,"__esModule",{value:!0}),t.coordEach=r,t.coordReduce=function(e,t,n,a){var i=n;return r(e,function(e,r,a,o,s){i=0===r&&void 0===n?e:t(i,e,r,a,o,s)},a),i},t.propEach=n,t.propReduce=function(e,t,r){var a=r;return n(e,function(e,n){a=0===n&&void 0===r?e:t(a,e,n)}),a},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,a){n=0===a&&void 0===r?e:t(n,e,a)}),n},t.coordAll=function(e){var t=[];return r(e,function(e){t.push(e)}),t},t.geomEach=i,t.geomReduce=function(e,t,r){var n=r;return i(e,function(e,a,i,o,s){n=0===a&&void 0===r?e:t(n,e,a,i,o,s)}),n},t.flattenEach=o,t.flattenReduce=function(e,t,r){var n=r;return o(e,function(e,a,i){n=0===a&&0===i&&void 0===r?e:t(n,e,a,i)}),n},t.segmentEach=s,t.segmentReduce=function(e,t,r){var n=r,a=!1;return s(e,function(e,i,o,s,u){n=!1===a&&void 0===r?e:t(n,e,i,o,s,u),a=!0}),n},t.lineEach=u,t.lineReduce=function(e,t,r){var n=r;return u(e,function(e,a,i,o){n=0===a&&void 0===r?e:t(n,e,a,i,o)}),n},t.findSegment=function(e,t){if(t=t||{},!Ii.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,a=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),Ii.lineString([u[o],u[o+1]],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),Ii.lineString([u[i][o],u[i][o+1]],s,t);case"MultiLineString":return a<0&&(a=u.length+a),o<0&&(o=u[a].length+o-1),Ii.lineString([u[a][o],u[a][o+1]],s,t);case"MultiPolygon":return a<0&&(a=u.length+a),i<0&&(i=u[a].length+i),o<0&&(o=u[a][i].length-o-1),Ii.lineString([u[a][i][o],u[a][i][o+1]],s,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!Ii.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,a=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return Ii.point(u,s,t);case"MultiPoint":return a<0&&(a=u.length+a),Ii.point(u[a],s,t);case"LineString":return o<0&&(o=u.length+o),Ii.point(u[o],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),Ii.point(u[i][o],s,t);case"MultiLineString":return a<0&&(a=u.length+a),o<0&&(o=u[a].length+o),Ii.point(u[a][o],s,t);case"MultiPolygon":return a<0&&(a=u.length+a),i<0&&(i=u[a].length+i),o<0&&(o=u[a][i].length-o),Ii.point(u[a][i][o],s,t)}throw new Error("geojson is invalid")}});Object(h.b)(Ei),Ei.coordEach,Ei.coordReduce,Ei.propEach,Ei.propReduce,Ei.featureEach,Ei.featureReduce,Ei.coordAll,Ei.geomEach,Ei.geomReduce,Ei.flattenEach,Ei.flattenReduce,Ei.segmentEach,Ei.segmentReduce,Ei.lineEach,Ei.lineReduce,Ei.findSegment,Ei.findPoint;var Ti=Object(h.b)(Object(h.a)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=6378137;function n(e){var t=0;if(e&&e.length>0){t+=Math.abs(a(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(a(e[r]))}return t}function a(e){var t,n,a,o,s,u,c=0,l=e.length;if(l>2){for(u=0;u<l;u++)u===l-2?(a=l-2,o=l-1,s=0):u===l-1?(a=l-1,o=0,s=1):(a=u,o=u+1,s=u+2),t=e[a],n=e[o],c+=(i(e[s][0])-i(t[0]))*Math.sin(i(n[1]));c=c*r*r/2}return c}function i(e){return e*Math.PI/180}t.default=function(e){return Ei.geomReduce(e,function(e,t){return e+function(e){var t,r=0;switch(e.type){case"Polygon":return n(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)r+=n(e.coordinates[t]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}})),wi="SET_MAP_CURSOR",Ai=function(e,t,r){var n=t.style.mapStyle.toJS().sources[e];return void 0===n&&console.warn("Couldnt find source when looking for fields of layer",e),"geojson"!==n.type?void 0===n.metadata||void 0===n.metadata["gfw:popups"]?null:n.metadata["gfw:popups"]:0===Object.keys(r.properties).length?null:Object.keys(r.properties).map(function(e){return{id:e}})},Mi=function(e){return void 0!==e.layer.metadata&&e.layer.metadata["gfw:id"]||e.layer.source},Pi=function(e){if(void 0!==e&&e.length)for(var t=0;t<e.length;t++){var r=e[t],n=Mi(r);if(void 0!==n)return{feature:r,staticLayerId:n}}},Li=function(){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(h.d)(this,e),this.stage=new PIXI.particles.ParticleContainer(Ge.eb,{scale:!0,alpha:!0,position:!0,uvs:!0}),!1===a&&(this.stage.blendMode=PIXI.BLEND_MODES.SCREEN),this.spritesPool=[];var i=new PIXI.Rectangle(0,0,2*Ge.fb,2*Ge.fb);this.mainVesselTexture=new PIXI.Texture(t,i),this._setTextureFrame(r,n),this.clearSpriteProps()}return Object(h.g)(e,[{key:"clearSpriteProps",value:function(){this.spritesProps={x:new Float32Array(Ge.eb),y:new Float32Array(Ge.eb),a:new Float32Array(Ge.eb),s:new Float32Array(Ge.eb)},this.spritesPropsCount=0}},{key:"pushSpriteProps",value:function(e,t,r,n){this.spritesProps.x[this.spritesPropsCount]=e,this.spritesProps.y[this.spritesPropsCount]=t,this.spritesProps.a[this.spritesPropsCount]=r,this.spritesProps.s[this.spritesPropsCount]=n,this.spritesPropsCount++}},{key:"setRenderingStyleIndex",value:function(e){this._setTextureFrame(e)}},{key:"destroy",value:function(){this.spritesPool=null,this.stage.destroy({children:!0})}},{key:"_setTextureFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.mainVesselTexture.frame.clone();if(null!==e&&(r.x=2*Ge.fb*e+e),null!==t){var n=function(e){return Math.round(e/360*30)}(t);30===n&&(n=0),r.y=n*Ge.fb*2,n>0&&(r.y+=n)}this.mainVesselTexture.frame=r,this.mainVesselTexture.update()}},{key:"render",value:function(){var e=this.spritesPropsCount;this.resizeSpritesPool();for(var t=0;t<e;t++){var r=this.stage.children[t],n=this.spritesProps.s[t];r.setTransform(this.spritesProps.x[t],this.spritesProps.y[t],n,n),r.alpha=this.spritesProps.a[t]}for(var a=this.stage.children.length,i=e;i<a;i++)this.stage.children[i].x=-100}},{key:"resizeSpritesPool",value:function(){var e=this.spritesPropsCount-this.stage.children.length;if(e<-4999)for(var t=Math.min(100,-e),r=0;r<t;r++)this.stage.removeChildAt(0);if(e>0){var n=Math.max(5e3,e);this._addSprites(n)}}},{key:"_addSprites",value:function(e){for(var t=0;t<e;t++){var r=new PIXI.Sprite(this.mainVesselTexture);r.anchor.x=.5,r.anchor.y=.5,r.x=-100,this.stage.addChild(r)}}}]),e}(),xi=function(e,t,r){return[1/1.5*(r[0]*e+r[4]*t+r[12]),1/1.5*(r[5]*t+r[13])]},Ci=function(e){function t(){return Object(h.d)(this,t),Object(h.e)(this,Object(h.f)(t).apply(this,arguments))}return Object(h.c)(t,e),Object(h.g)(t,[{key:"componentDidMount",value:function(){this._build()}},{key:"componentWillUnmount",value:function(){this._destroy()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"componentWillReceiveProps",value:function(e){e.useRadialGradientStyle!==this.props.useRadialGradientStyle&&this.setBrushZoomRenderingStyle(e.useRadialGradientStyle)}},{key:"_build",value:function(){var e=this.props,t=e.layer,r=e.rootStage,n=e.useRadialGradientStyle,a=e.customRenderingStyle;this.subLayers={},this.renderingStyle=t.header&&t.header.rendering?t.header.rendering:a,this.setBrushRenderingStyle(this.renderingStyle.style),this.setBrushZoomRenderingStyle(n),this.stage=new $e.Container,r.addChild(this.stage)}},{key:"setBrushRenderingStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge.gb.NORMAL;this.brushRenderingStyle="string"==typeof e?Ge.gb[e.toUpperCase()]:e,this._setBrushRenderingStyleIndex()}},{key:"setBrushZoomRenderingStyle",value:function(e){this.brushZoomRenderingStyle=!0===e?Ge.hb.RADIAL_GRADIENT:Ge.hb.CIRCLE,this._setBrushRenderingStyleIndex()}},{key:"_setBrushRenderingStyleIndex",value:function(){var e=this,t=this.brushRenderingStyle===Ge.gb.NORMAL?this.brushZoomRenderingStyle:0,r=this.brushRenderingStyle+t;r!==this.renderingStyleIndex&&(this.renderingStyleIndex=r,Object.values(this.subLayers).forEach(function(t){t.setRenderingStyleIndex(e.renderingStyleIndex)}))}},{key:"_redraw",value:function(){var e=this,t=this.props,r=t.filters,n=t.baseTexture,a=t.layer;if(null!=a&&void 0!==a.tiles&&!1!==a.visible){this.stage.visible=!0,this.stage.alpha=a.opacity;for(var i=a.tiles,o=a.hue,s=void 0!==r&&r.length?r.filter(function(e){return!0!==e.pass}).map(function(e){return void 0===e.hue?"0":e.hue.toString()}):[o.toString()],u=Object.keys(this.subLayers),c=Object(Ge.ib)(s.concat(u)),l=0;l<c.length;l++){var p=c[l];-1!==s.indexOf(p)?(-1===u.indexOf(p)&&(this.subLayers[p]=this._createSublayer(n,this.renderingStyleIndex,p)),this.subLayers[p].clearSpriteProps()):(this._destroySubLayer(this.subLayers[p]),delete this.subLayers[p])}s.length&&(i.forEach(function(t){e._setSubLayersSpritePropsForTile({data:t.data,numFilters:r.length,defaultHue:o})}),s.forEach(function(t){e.subLayers[t].render()}))}else this.stage.visible=!1}},{key:"_setSubLayersSpritePropsForTile",value:function(e){var t=e.data,r=e.numFilters,n=e.defaultHue;if(t)for(var a=this.props,i=a.startIndex,o=a.endIndex,s=a.viewport,u=a.filters,c=a.viewportLeft,l=a.viewportRight,p=i;p<o;p++){var f=t[p];if(f)for(var d=0,_=f.worldX.length;d<_;d++){var m=void 0;void 0!==u&&u.length||(m=n);for(var y=0;y<r;y++){var g=u[y];if(Object(Ge.jb)(f,d,g.filterValues)){m=g.hue;break}}if(void 0!==m){var b=f.worldX[d];c>0&&b<c?b+=512:c<0&&b>l&&(b-=512);var v=b*s.scale,S=f.worldY[d]*s.scale,O=s.pixelProjectionMatrix,I=0===s.pitch?xi(v,S,O):Object(Ge.kb)([v,S],O),E=Object(h.h)(I,2),T=E[0],w=E[1];T>-10&&T<s.width+10&&w>-10&&w<s.height+10&&this.subLayers[m].pushSpriteProps(T,w,f.opacity?f.opacity[d]:this.renderingStyle.defaultOpacity,f.radius?f.radius[d]:this.renderingStyle.defaultSize)}}}}},{key:"_createSublayer",value:function(e,t,r){var n=new Li(e,t,r,this.brushRenderingStyle===Ge.gb.BULLSEYE);return this.stage.addChild(n.stage),n}},{key:"_destroy",value:function(){Object.values(this.subLayers).forEach(this._destroySubLayer.bind(this)),this.stage.destroy({children:!0}),this.props.rootStage.removeChild(this.stage)}},{key:"_destroySubLayer",value:function(e){this.stage.removeChild(e.stage),e.destroy()}},{key:"render",value:function(){return null}}]),t}(_.a.Component);Ci.propTypes={layer:S.object,rootStage:S.object,viewport:S.object,startIndex:S.number,endIndex:S.number,filters:S.array,baseTexture:S.object,useRadialGradientStyle:S.bool,customRenderingStyle:S.object,viewportLeft:S.number,viewportRight:S.number};var ji=function(e){function t(){return Object(h.d)(this,t),Object(h.e)(this,Object(h.f)(t).apply(this,arguments))}return Object(h.c)(t,e),Object(h.g)(t,[{key:"componentDidMount",value:function(){this._build()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_build",value:function(){var e=this.props.rootStage;this.stage=new PIXI.Graphics,this.stage.nativeLines=!0,e.addChild(this.stage)}},{key:"clear",value:function(){this.stage.clear()}},{key:"_redraw",value:function(){var e=this,t=this.props,r=t.tracks,n=t.zoom,a=t.startIndex,i=t.endIndex,o=t.highlightTemporalExtentIndexes;if(this.clear(),r.length){var s=null===o?void 0:[Math.max(a,o[0]),Math.min(i,o[1])],u=s&&s[1]-s[0]>0?s:void 0,c=n>Ge.lb,l=1+.5*(n-Ge.lb),p=void 0!==u&&u[0]>0&&u[1]>0;r.forEach(function(t){e._drawTrack({data:t.data,startIndex:a,endIndex:i,drawFishingCircles:c,fishingCirclesRadius:l,color:"0x".concat(t.color.substr(1)),lineThickness:1,lineOpacity:1}),!0===p&&e._drawTrack({data:t.data,startIndex:o[0],endIndex:o[1],drawFishingCircles:c,fishingCirclesRadius:l,color:"0xFFFFFF",lineThickness:2,lineOpacity:1})})}}},{key:"_drawTrack",value:function(e){var t,r,n,a=this,i=e.data,o=e.startIndex,s=e.endIndex,u=e.drawFishingCircles,c=e.fishingCirclesRadius,l=e.color,p=e.lineThickness,f=e.lineOpacity,d=e.worldOffset,_=void 0===d?0:d,m=this.props.viewport,y=0,g={x:[],y:[]};this.stage.lineStyle(p,l,f);for(var b=!1,v=o;v<s;v++){var S=i[v];if(S)for(var O=0,I=S.series.length;O<I;O++){var E=S.series[O];y++;var T=S.worldX[O]+_,w=S.worldY[O],A=Object(Ge.kb)([T*m.scale,w*m.scale],m.pixelProjectionMatrix),M=Object(h.h)(A,2),P=M[0],L=M[1];if(t!==E&&this.stage.moveTo(P,L),r&&Math.abs(T-r)>256){0===_&&(b=!0);var x=n+(w-n)/2,C=T-r<0,j=_+(512-1e-6),R=C?_:j,k=Object(Ge.kb)([(C?j:_)*m.scale,x*m.scale],m.pixelProjectionMatrix),D=Object(h.h)(k,2),N=D[0],F=D[1];this.stage.lineTo(N,F);var B=Object(Ge.kb)([R*m.scale,x*m.scale],m.pixelProjectionMatrix),U=Object(h.h)(B,2),V=U[0],z=U[1];this.stage.moveTo(V,z)}this.stage.lineTo(P,L),u&&!0===S.hasFishing[O]&&(g.x.push(P),g.y.push(L)),r=T,n=w,t=E}}if(u){this.stage.lineStyle(0),this.stage.beginFill(l,1);for(var H=0,G=g.x.length;H<G;H++)this.stage.drawCircle(g.x[H],g.y[H],c);this.stage.endFill()}return!0===b&&[-512,512].forEach(function(e){a._drawTrack({worldOffset:e,data:i,startIndex:o,endIndex:s,drawFishingCircles:u,fishingCirclesRadius:c,color:l,lineThickness:p,lineOpacity:f})}),y}},{key:"render",value:function(){return null}}]),t}(_.a.Component);ji.propTypes={zoom:S.number,rootStage:S.object,viewport:S.object,startIndex:S.number,endIndex:S.number,highlightTemporalExtentIndexes:S.array,tracks:S.array};var Ri=function(e){function t(){var e,r;Object(h.d)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Object(h.e)(this,(e=Object(h.f)(t)).call.apply(e,[this].concat(a))),Object(h.i)(Object(h.j)(r),"state",{pixiReady:!1}),Object(h.i)(Object(h.j)(r),"onTouchStart",function(e){e.touches.length&&r.queryCoords(e.touches[0].clientX,e.touches[0].clientY)}),Object(h.i)(Object(h.j)(r),"onMouseMove",function(e){r.queryCoords(e.clientX,e.clientY)}),Object(h.i)(Object(h.j)(r),"_onTick",function(){!0===r.heatmapFadingIn&&r.heatmapStage.alpha<1&&r._heatmapFadeinStep()}),r}return Object(h.c)(t,Ke.a),Object(h.g)(t,[{key:"componentDidMount",value:function(){this._build(),this.setState({pixiReady:!0})}},{key:"componentWillReceiveProps",value:function(e){this.props.exportNativeViewport(this._context.viewport),e.viewport.width===this.props.viewport.width&&e.viewport.height===this.props.viewport.height||this._updateViewportSize(e.viewport.width,e.viewport.height)}},{key:"_build",value:function(){var e=this.props.viewport,t=e.width,r=e.height;this.pixi=new $e.Application({width:t,height:r,transparent:!0,antialias:!0}),this.renderer=this.pixi.renderer,this.canvas=this.pixi.view,this.canvas.style.position="absolute",this.container.appendChild(this.canvas),this.stage=this.pixi.stage;var n=function(e,t){var r=document.createElement("canvas"),n=r.getContext("2d"),a=2*e;r.width=3*a+2,r.height=31*a+31;for(var i=0;i<31;i++){var o=a*i+i,s=o+e,u=e,c=n.createRadialGradient(u,s,e*t,u,s,e),l=Je(i),p=Ze(l);c.addColorStop(0,p);var f=Ye(Qe(l+30),80,100);c.addColorStop(1,"rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", 0)")),n.fillStyle=c,n.fillRect(0,o,a,a),u+=a+1,n.beginPath(),n.arc(u,s,e,0,2*Math.PI,!1),n.fillStyle=p,n.fill(),u+=a+1,n.beginPath(),n.arc(u,s,.4*e,0,2*Math.PI,!1),n.fillStyle=p,n.fill(),n.beginPath(),n.arc(u,s,.95*e,0,2*Math.PI,!1),n.lineWidth=1,n.strokeStyle=p,n.stroke()}return r}(Ge.fb,Ge.mb);this.baseTexture=$e.Texture.fromCanvas(n),this.heatmapStage=new $e.Container,this.stage.addChild(this.heatmapStage),this.pixi.ticker.add(this._onTick)}},{key:"_updateViewportSize",value:function(e,t){this.renderer.resize(e,t)}},{key:"toggleHeatmapDimming",value:function(e){void 0!==this.heatmapStage&&(!0===e&&(this.heatmapFadingIn=!1),this.heatmapStage.alpha=!0===e?Ge.nb:1)}},{key:"queryCoords",value:function(e,t){if(!this.props.heatmapLayers.every(function(e){return!0!==e.interactive})){var r=this._context.viewport,n=r.unproject([e,t]),a=Object(h.h)(n,2),i=a[0],o=a[1],s=i;s>180?s-=360:s<-180&&(s+=360);var u=Object(Ge.ob)([s,o],1),c=Object(h.h)(u,2),l=c[0],p=c[1],f=Ge.pb/r.scale;this.props.queryHeatmapVessels({longitude:s,latitude:o,worldX:l,worldY:p,toleranceRadiusInWorldUnits:f},this.props.temporalExtentIndexes)}}},{key:"_startHeatmapFadein",value:function(){this.heatmapFadingIn=!0,this.heatmapFadeinStartTimestamp=void 0}},{key:"_heatmapFadeinStep",value:function(){void 0===this.heatmapFadeinStartTimestamp&&(this.heatmapFadeinStartTimestamp=Date.now());var e=(Date.now()-this.heatmapFadeinStartTimestamp)/1e3,t=this.heatmapStage.alpha+(1-this.heatmapStage.alpha)*e;t>=1&&(t=1,this.heatmapFadingIn=!1),this.heatmapStage.alpha=t}},{key:"_getHighlightData",value:function(e,t,r){var n=Ge.qb,a={id:"__HIGHLIGHT__",visible:!0,opacity:1,hue:Ge.qb},i=[];if(void 0!==e&&void 0!==e.layer&&void 0!==e.foundVessels&&!0!==e.isEmpty){var o=r.find(function(t){return t.id===e.layer.id});a=Object(h.l)({highlightLayerData:a},o),i=e.foundVessels.map(function(e){return{hue:n,filterValues:{series:[e.series]}}})}else if(null!==t){var s=r.find(function(e){return e.id===t.layer.id});a=Object(h.l)({highlightLayerData:a},s),i=[{hue:n,filterValues:{series:[t.seriesgroup]}}]}return{highlightLayerData:a,highlightFilters:i}}},{key:"_render",value:function(){var e=this,t=this.props,r=t.zoom,n=t.heatmapLayers,a=t.temporalExtentIndexes,i=t.highlightTemporalExtentIndexes,o=t.highlightedVessels,s=t.highlightedClickedVessel,u=t.tracks,c=t.leftWorldScaled,l=t.rightWorldScaled,p=this._context.viewport,f=this.state.pixiReady,h=a[0],m=a[1],y=r<Ge.rb;if(!0!==o.isEmpty&&this.toggleHeatmapDimming(!0),!0===o.isEmpty&&0===u.length&&this._startHeatmapFadein(),this.renderer){var g=this.renderer.gl.getError();0!==g&&console.log(g)}var b=this._getHighlightData(o,s,n),v=b.highlightLayerData,S=b.highlightFilters;return _.a.createElement("div",{ref:function(t){e.container=t},style:{position:"absolute"},onMouseMove:this.onMouseMove,onTouchStart:this.onTouchStart},!0===f&&_.a.createElement(d.Fragment,null,n.map(function(t){return _.a.createElement(Ci,{key:t.id,layer:t,filters:t.filters||[],viewport:p,startIndex:h,endIndex:m,baseTexture:e.baseTexture,rootStage:e.heatmapStage,useRadialGradientStyle:y,customRenderingStyle:{},viewportLeft:c,viewportRight:l})}),void 0!==this.stage&&_.a.createElement(Ci,{key:"highlighted",layer:v,filters:S,viewport:p,startIndex:h,endIndex:m,baseTexture:this.baseTexture,rootStage:this.heatmapStage,useRadialGradientStyle:y,customRenderingStyle:{defaultOpacity:1,defaultSize:1},viewportLeft:c,viewportRight:l}),void 0!==this.stage&&_.a.createElement(ji,{tracks:u,viewport:p,zoom:r,startIndex:h,endIndex:m,highlightTemporalExtentIndexes:i,rootStage:this.stage})))}}]),t}();Ri.propTypes={zoom:S.number,heatmapLayers:S.array,temporalExtentIndexes:S.array,highlightTemporalExtentIndexes:S.array,highlightedVessels:S.object,highlightedClickedVessel:S.object,tracks:S.array,queryHeatmapVessels:S.func,exportNativeViewport:S.func,leftWorldScaled:S.number,rightWorldScaled:S.number},Ri.contextTypes={viewport:S.object};var ki=ct([function(e){return e.map.heatmap.heatmapLayers}],function(e){return Object.keys(e).map(function(t){return Object(h.l)({},e[t])})}),Di=ct([function(e){return e.map.tracks.data}],function(e){return e.filter(function(e){return"geojson"!==e.type}).filter(function(e){return void 0!==e.data})}),Ni=ct([di],function(e){var t=e[0].getTime(),r=Math.max(e[1].getTime(),e[0].getTime()+Ge.sb);return[Ge.tb.getOffsetedTimeAtPrecision(t),Ge.tb.getOffsetedTimeAtPrecision(r)]}),Fi=ct([_i],function(e){if(null==e||!e.length)return null;var t=e[0].getTime(),r=e[1].getTime();return[Ge.tb.getOffsetedTimeAtPrecision(t),Ge.tb.getOffsetedTimeAtPrecision(r)]}),Bi=Object(ze.b)(function(e){return{highlightedVessels:e.map.heatmap.highlightedVessels,highlightedClickedVessel:e.map.heatmap.highlightedClickedVessel,viewport:e.map.viewport.viewport,zoom:e.map.viewport.viewport.zoom,heatmapLayers:ki(e),tracks:Di(e),leftWorldScaled:e.map.viewport.leftWorldScaled,rightWorldScaled:e.map.viewport.rightWorldScaled,temporalExtentIndexes:Ni(e),highlightTemporalExtentIndexes:Fi(e)}},function(e,t){return{queryHeatmapVessels:function(t,r){e(Object(Ge.ub)(t,r))},exportNativeViewport:function(t){e(Object(Ge.vb)(t))}}})(Ri);!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".map_map__-6udN {\n  bottom: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 100%;\n  z-index: 5;\n}\n\n.mapboxgl-ctrl-logo {\n  display: none;\n}\n\n/* Popup */\n\n.mapboxgl-popup-content {\n  background: none !important;\n  padding: 0 !important;\n}\n\n.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,\n.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip,\n.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip {\n  border-top-color: #2b4f93 !important;\n}\n\n.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,\n.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip,\n.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip {\n  border-bottom-color: #2b4f93 !important;\n}\n\n.mapboxgl-popup-anchor-left .mapboxgl-popup-tip {\n  border-right-color: #2b4f93 !important;\n}\n\n.mapboxgl-popup-anchor-right .mapboxgl-popup-tip {\n  border-left-color: #2b4f93 !important;\n}\n\n.mapboxgl-popup-close-button {\n  z-index: 1;\n  right: -18px;\n  top: 2px;\n  background-color: #fff;\n  border-radius: 50%;\n  cursor: pointer;\n  display: inline-block;\n  height: 20px;\n  position: absolute;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  width: 20px;\n  color: #294480;\n  padding-bottom: 2px;\n  line-height: 0;\n  font-size: 16px;\n}\n\n.mapboxgl-popup-close-button:hover {\n  background-color: #fff;\n}\n\n.mapboxgl-popup-close-button:focus {\n  outline: none;\n}\n\n/* override Mapbox GL JS style to always show compact style */\n.mapboxgl-ctrl-attrib {\n  padding-top: 2px !important;\n  padding-bottom: 2px !important;\n  margin: 0 10px 10px 10px !important;\n  position: relative;\n  padding-right: 24px !important;\n  background-color: #fff !important;\n  border-radius: 3px 12px 12px 3px;\n  visibility: hidden;\n  z-index: 999;\n}\n\n.mapboxgl-ctrl-attrib:hover {\n  visibility: visible;\n}\n\n.mapboxgl-ctrl-attrib::after {\n  content: '';\n  cursor: pointer;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%09%3Cpath%20fill%3D%27%23333333%27%20fill-rule%3D%27evenodd%27%20d%3D%27M4%2C10a6%2C6%200%201%2C0%2012%2C0a6%2C6%200%201%2C0%20-12%2C0%20M9%2C7a1%2C1%200%201%2C0%202%2C0a1%2C1%200%201%2C0%20-2%2C0%20M9%2C10a1%2C1%200%201%2C1%202%2C0l0%2C3a1%2C1%200%201%2C1%20-2%2C0%27%20%2F%3E%0D%0A%3C%2Fsvg%3E');\n  background-color: rgba(255, 255, 255, 0.5);\n  width: 24px;\n  height: 24px;\n  box-sizing: border-box;\n  visibility: visible;\n  border-radius: 12px;\n}\n\n@media screen and (min-width: 768px) {\n  .mapboxgl-ctrl-attrib,\n  .mapboxgl-ctrl-attrib::after {\n    display: none; /* use attribution of the footer */\n  }\n}\n\n.map_googleLogo__foP96 {\n  position: absolute;\n  left: 5px;\n  bottom: 5px;\n  width: 66px;\n  height: 26px;\n  cursor: pointer;\n  background-image: url('https://maps.gstatic.com/mapfiles/api-3/images/google4_hdpi.png');\n  background-size: cover;\n}\n");var Ui=function(e){var t=e.latitude,r=e.longitude,n=e.children,a=e.closeButton,i=e.onClose;return _.a.createElement(Ke.c,{latitude:t,longitude:r,closeButton:a,onClose:i,anchor:"bottom",offsetTop:-10,tipSize:4,closeOnClick:!1},n)};Ui.propTypes={latitude:S.number.isRequired,longitude:S.number.isRequired,children:S.node.isRequired,closeButton:S.bool.isRequired,onClose:S.func},Ui.defaultProps={onClose:function(){}};var Vi=function(e){function t(e){var r;return Object(h.d)(this,t),r=Object(h.e)(this,Object(h.f)(t).call(this,e)),Object(h.i)(Object(h.j)(r),"_resize",function(){if(null!==r._mapContainerRef){var e=window.getComputedStyle(r._mapContainerRef),t=parseInt(e.width,10),n=parseInt(e.height,10)+1;t===r.props.viewport.width&&n===r.props.viewport.height||r.props.setViewport(Object(h.l)({},r.props.viewport,{width:t,height:n}))}else console.warn("Cant set viewport on a map that hasnt finished intanciating yet")}),Object(h.i)(Object(h.j)(r),"onViewportChange",function(e){r.props.setViewport(e)}),Object(h.i)(Object(h.j)(r),"onMapInteraction",function(e,t){var n="hover"===t?r.props.mapHover:r.props.mapClick;if(void 0!==r.glMap&&void 0!==e.features&&e.features.length){var a=e.features[0];if(!0===a.properties.cluster){var i=a.properties.cluster_id,o=a.source,s=r.glMap.getSource(o);return void s.getClusterExpansionZoom(i,function(t,r){s.getClusterLeaves(i,99,0,function(a,i){t||a||n(e.lngLat[1],e.lngLat[0],e.features,{zoom:r,children:i})})})}}n(e.lngLat[1],e.lngLat[0],e.features)}),Object(h.i)(Object(h.j)(r),"onHover",function(e){r.onMapInteraction(e,"hover")}),Object(h.i)(Object(h.j)(r),"onClick",function(e){r.onMapInteraction(e,"click")}),Object(h.i)(Object(h.j)(r),"getRef",function(e){null!==e&&(r.glMap=e.getMap())}),Object(h.i)(Object(h.j)(r),"getCursor",function(e){var t=e.isDragging,n=r.props.cursor;return null===n?t?"grabbing":"grab":n}),Object(h.i)(Object(h.j)(r),"transformRequest",function(e,t){var n=r.props.token;if(null!==n&&"Tile"===t&&e.match(Ge.wb))return{url:e,headers:{Authorization:"Bearer "+n}}}),r.state={mouseOver:!0},r._mapContainerRef=null,r}return Object(h.c)(t,e),Object(h.g)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this._resize),this._resize(),window.setTimeout(function(){return e._resize()},1),window.setTimeout(function(){return e._resize()},1e4)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resize)}},{key:"render",value:function(){var e=this,t=this.props,r=t.viewport,n=t.transitions,a=t.maxZoom,i=t.minZoom,o=t.transitionEnd,s=t.mapStyle,u=t.onClosePopup,c=t.clickPopup,l=t.hoverPopup,p=t.markers,f=t.interactiveLayerIds;return _.a.createElement("div",{id:"map",className:"map_map__-6udN",ref:function(t){e._mapContainerRef=t},onMouseLeave:function(){e.setState({mouseOver:!1})},onMouseEnter:function(){e.setState({mouseOver:!0})}},_.a.createElement(Ke.d,Object(h.k)({},r,n,{ref:this.getRef,transformRequest:this.transformRequest,onTransitionEnd:o,onHover:this.onHover,onClick:this.onClick,getCursor:this.getCursor,mapStyle:s,maxZoom:a,minZoom:i,onViewportChange:this.onViewportChange,interactiveLayerIds:f}),_.a.createElement(Bi,null),null!=c&&_.a.createElement(Ui,{latitude:c.latitude,longitude:c.longitude,closeButton:!0,onClose:u},c.content),!0===this.state.mouseOver&&null!=l&&_.a.createElement(Ui,{latitude:l.latitude,longitude:l.longitude,closeButton:!1},l.content),null!==p&&p.length&&p.map(function(e,t){return _.a.createElement(Ke.b,{key:t,latitude:e.latitude,longitude:e.longitude},e.content)})),_.a.createElement("div",{className:"map_googleLogo__foP96"}))}}]),t}(_.a.Component);Vi.propTypes={token:S.string,transitions:S.object.isRequired,viewport:S.object.isRequired,mapStyle:S.object.isRequired,clickPopup:S.object,hoverPopup:S.object,maxZoom:S.number.isRequired,minZoom:S.number.isRequired,setViewport:S.func.isRequired,mapHover:S.func,mapClick:S.func,onClosePopup:S.func,transitionEnd:S.func,cursor:S.string,markers:S.array,interactiveLayerIds:S.arrayOf(S.string)},Vi.defaultProps={token:null,clickPopup:null,hoverPopup:null,mapHover:function(){},mapClick:function(){},onClosePopup:function(){},transitionEnd:function(){},cursor:null,markers:null,interactiveLayerIds:null};var zi,Hi=ct([function(e){return e.map.style.staticLayers}],function(e){return e.filter(function(e){return!0===e.interactive&&!0===e.visible}).map(function(e){return e.id})}),Gi=ct([function(e){return e.map.style.mapStyle},Oi],function(e,t){if(!t)return e;var r=e.toJS().layers.filter(function(e){return void 0!==e.metadata}).map(function(e){return e.metadata["mapbox:group"]}).lastIndexOf(Ge.xb)+1,n=e.mergeIn(["sources"],t.sources),a=e.get("layers");return t.layers.forEach(function(e,t){a=a.insert(r+t,pi(e))}),n.set("layers",a)}),qi={},Ki={transitionDuration:300,transitionEasing:hi,transitionInterpolator:new qe.a},$i=Object(ze.b)(function(e,t){return{viewport:e.map.viewport.viewport,transitions:!0===t.transitionsEnabled?Ki:qi,maxZoom:e.map.viewport.maxZoom,minZoom:e.map.viewport.minZoom,cursor:e.map.interaction.cursor,token:e.map.module.token,mapStyle:Gi(e),interactiveLayerIds:Hi(e)}},function(e){return{setViewport:function(t){e(Object(Ge.yb)(t))},mapHover:function(t,r,n,a){e(function(e,t,r,n){return function(a,i){var o=i().map,s=o.heatmap.highlightedVessels,u=s.layer,c=s.isEmpty,l=s.foundVessels,p=null,f={type:null};if(!0===c){var d=Pi(r);if(void 0!==d){f.type="static",f.cluster=n,f.layer={id:d.staticLayerId};var _=d.feature.properties;f.target={properties:_},p="pointer";var m=Ai(d.staticLayerId,o,d.feature);if(null!==m){var y=(m.find(function(e){return e.id&&"name"===e.id.toLowerCase()})||m.find(function(e){return e.id&&"id"===e.id.toLowerCase()})||m.find(function(e){return e.id&&null!==_[e.id]&&"null"!==_[e.id]&&void 0!==_[e.id]})).id,g=_[y];f.target.featureTitle=g}}}else if(!0!==c){var b=void 0===l||l.length>1;p=b?"zoom-in":"pointer",f.type="activity",f.layer=u,f.target={objects:l,isCluster:b}}p!==o.interaction.cursor&&a({type:wi,payload:p}),o.module.onHover&&o.module.onHover(Object(h.l)({},f,{latitude:e,longitude:t}))}}(t,r,n,a))},mapClick:function(t,r,n,a){e(function(e,t,r,n){return function(a,i){var o=i().map;a(Object(Ge.C)());var s=o.heatmap.highlightedVessels,u=s.layer,c=s.isEmpty,l=s.clickableCluster,p=s.foundVessels,f={type:null};if(!0===c){var d=Pi(r);if(void 0!==d){var _,m=Ai(d.staticLayerId,o,d.feature),y=d.feature.properties;null!==m&&(_=m.map(function(e){var t,r=e.id||e,n=r===Ge.bb?(t=d.feature,(Math.pow(10,-6)*Ti(t.geometry)).toLocaleString("en-US",{maximumFractionDigits:0})):y[r];return{title:e.label||e.id,isLink:e.isLink,value:n}})),f.type="static",f.cluster=n,f.layer={id:d.staticLayerId},f.target={fields:_,properties:y}}}else f.type="activity",f.layer=u,!0===l?(a(Object(Ge.cb)(e,t)),a(Object(Ge.db)()),f.target={isCluster:!0}):f.target=p[0];o.module.onClick&&o.module.onClick(Object(h.l)({},f,{latitude:e,longitude:t}))}}(t,r,n,a))},transitionEnd:function(){e(Object(Ge.zb)())},onClosePopup:function(){e(Object(Ge.b)())}}})(Vi),Yi=[{gl:"line",geoJSON:["LineString","MultiLineString"]},{gl:"fill",geoJSON:["Polygon","MultiPolygon"]},{gl:"circle",geoJSON:["Point","MultiPoint"]}],Wi="INIT_MAP_STYLE",Zi="SET_MAP_STYLE",Xi="MARK_CARTO_LAYERS_AS_INSTANCIATED",Ji="SET_STATIC_LAYERS",Qi="SET_BASEMAP_LAYERS",eo=function(e){return{type:Zi,payload:e}},to=function(e,t,r){var n=e.toJS().layers,a=e,i=n.findIndex(function(e){return e.id===t}),o=n.find(function(e){return e.id===t});if(a=function(e,t,r){var n=!0===t.visible?"visible":"none";return e.setIn(["layers",r,"layout","visibility"],n)}(a,r,i),!0===r.isBasemap)return a;var s=et.layers.find(function(e){return e.id===t}),u=void 0===r.opacity?1:r.opacity;switch(o.type){case"fill":a=a.setIn(["layers",i,"paint","fill-opacity"],u).setIn(["layers",i,"paint","fill-outline-color"],r.color).setIn(["layers",i,"paint","fill-color"],Ge.e);break;case"line":a=a.setIn(["layers",i,"paint","line-opacity"],u).setIn(["layers",i,"paint","line-color"],r.color);break;case"symbol":if(o.metadata&&!0===o.metadata["gfw:isLabel"]){var c="visible"===a.getIn(["layers",i,"layout","visibility"])&&!0===r.showLabels?"visible":"none";if(a=a.setIn(["layers",i,"layout","visibility"],c),!0!==r.showLabels)break}a=a.setIn(["layers",i,"paint","text-opacity"],u),void 0!==r.color&&(a=a.setIn(["layers",i,"paint","text-color"],r.color));break;case"circle":var l=void 0!==s?s.paint:(r.gl.layers.find(function(e){return e.id===t})||{}).paint;if(a=a.setIn(["layers",i,"paint","circle-opacity"],u).setIn(["layers",i,"paint","circle-stroke-opacity"],u),l&&(l["circle-radius"]&&(a=a.setIn(["layers",i,"paint","circle-radius"],l["circle-radius"])),l["circle-stroke-color"]&&(a=a.setIn(["layers",i,"paint","circle-stroke-color"],l["circle-stroke-color"])),l["circle-stroke-width"]&&(a=a.setIn(["layers",i,"paint","circle-stroke-width"],l["circle-stroke-width"]))),void 0!==r.color){var p=o.metadata["gfw:mainColorPaintProperty"]||"circle-color";a=a.setIn(["layers",i,"paint",p],r.color)}break;case"raster":a=a.setIn(["layers",i,"paint","raster-opacity"],u)}return function(e,t,r,n){var a=e,i=e.toJS(),o=r.type,s=i.metadata["gfw:styles"],u=r.metadata;return["selected","highlighted"].forEach(function(e){var i=t["".concat(e,"Features")],c=null!=i&&i.values.length>0,l=t[e],p=s[e][o]||{},f=u&&u["gfw:styles"]&&u["gfw:styles"][e]||{},d=Object(h.l)({},p,f);Object.keys(d).length&&Object.keys(d).forEach(function(e){var o,s=d[e][0],u=d[e][1],p=["icon-size","icon-image"].includes(e)?"layout":"paint";if(!1===c&&!0!==l&&!1!==l){var f=et.layers.find(function(e){return e.id===r.id});o=void 0!==f?r.metadata&&r.metadata["gfw:mainColorPaintProperty"]===e?null:f[p][e]:null}else if(!0===l||!1===l)o=!0===l?s:u;else{var h="";if(null!==t.color&&void 0!==t.color){var _=Xe(t.color);h="".concat(_.r,",").concat(_.g,",").concat(_.b)}o=["match",["get",i.field],i.values,"string"!=typeof s?s:s.replace("$REFLAYER_COLOR_RGB",h),"string"!=typeof u?u:u.replace("$REFLAYER_COLOR_RGB",h)]}null!=o&&(a=a.setIn(["layers",n,p,e],o))})}),a}(a,r,o,i)},ro=function(e,t){return function(r,n){r({type:Ji,payload:e}),r({type:Qi,payload:t});var a=[].concat(Object(h.m)(e),Object(h.m)(t.map(function(e){return Object(h.l)({},e,{isBasemap:!0})}))),i=n().map.style.mapStyle.toJS().sources,o=a.filter(function(e){return void 0!==e.gl});o.length&&r(function(e){return function(t,r){var n=r().map.style.mapStyle;e.forEach(function(e){var t=e.id,r=e.gl,a=pi(r.source);n=n.setIn(["sources",t],a);var i=[],o=n.get("layers").toJS().map(function(e){return e.id});r.layers.filter(function(e){return!o.includes(e.id)}).forEach(function(e){var r=Object(h.l)({},e,{source:t},"vector"===e.type&&{"source-layer":t});i.push(r)});var s=pi(i);n=n.set("layers",n.get("layers").concat(s))}),t(eo(n))}}(o));var s=a.filter(function(e){return!0===e.isCustom&&void 0===i[e.id]});s.length&&s.forEach(function(e){r(function(e,t,r,n){return function(a,i){var o=i().map.style.mapStyle,s=o.toJS();if(void 0===s.sources[t]){var u={type:e};e===Ge.c.geojson?u.data=n:e===Ge.c.raster&&(u.tiles=[r],u.tileSize=256),o=o.setIn(["sources",t],pi(u))}if(void 0===s.layers.find(function(e){return e.id===t})){var c=e===Ge.c.geojson?function(e){var t=e.features.map(function(e){var t=e.geometry;return void 0===t?null:t.type}),r=Yi.map(function(e){var r=0;return t.forEach(function(t){e.geoJSON.indexOf(t)>-1&&r++}),{gl:e.gl,num:r}}),n="fill",a=0;return r.forEach(function(e){e.num>a&&(n=e.gl,a=e.num)}),n}(n):e,l=pi({id:t,source:t,type:c,layout:{},paint:{}}),p=e===Ge.c.raster?s.layers.length-1-s.layers.filter(function(e){return"labels"!==e.id}).reverse().findIndex(function(e){return"raster"===e.type}):s.layers.length-1;o=o.set("layers",o.get("layers").splice(p,0,l))}a(eo(o))}}(e.subtype,e.id,e.url,e.data))});var u=n().map.style,c=u.mapStyle,l=c.toJS(),p=l.layers,f=l.sources,d=[];e.forEach(function(e){var t=e.id;if(void 0!==i[t]&&(void 0!==e.data&&(c=c.setIn(["sources",t,"data"],pi(e.data))),void 0!==e.url)){var r=i[t].tiles,n=void 0!==r&&r.length>0?Object(Ge.ib)([e.url].concat(Object(h.m)(r))):[e.url];c=c.setIn(["sources",t,"tiles"],pi(n))}});for(var _=function(e){var t=p[e],r=t.source,n=f[r],i=void 0!==t.metadata&&t.metadata["gfw:id"]||r,o=a.find(function(e){return e.id===i});if(void 0===o)return t.type,"continue";var s=void 0!==n.metadata&&n.metadata["gfw:carto-sql"];if(!1!==s&&void 0!==s){var l=u.cartoLayersInstanciated.indexOf(r)>-1;return!0!==o.visible||l||d.find(function(e){return e.sourceId===r})||d.push({sourceId:r,sourceCartoSQL:s,refLayer:o}),"continue"}c=to(c,t.id,o)},m=0;m<p.length;m++)_(m);d.length&&r(function(e){return function(t,r){t({type:Xi,payload:e.map(function(e){return e.sourceId})});var n=e.map(function(e){return r=(t=e).sourceId,n=t.sourceCartoSQL,a={layers:[{id:r,options:{sql:n}}]},i=encodeURIComponent(JSON.stringify(a)),o=Ge.f.replace("$MAPCONFIG",i),new Promise(function(e){fetch(o).then(function(e){return e.status>=400?(console.warn("loading of layer failed ".concat(r)),Promise.reject(),null):e.json()}).then(function(t){e({layergroupid:t.layergroupid,sourceId:r})}).catch(function(e){console.warn(e)})});var t,r,n,a,i,o});Promise.all(n.map(function(e){return e.catch(function(e){return e})})).then(function(n){var a=r().map.style.mapStyle,i=a.toJS();n.forEach(function(t){var r=Ge.d.replace("$LAYERGROUPID",t.layergroupid),n="".concat(t.sourceId,"-instanciated");a=a.setIn(["sources",n],pi({type:"vector",tiles:[r]})),i.layers.forEach(function(r,i){if(r.source===t.sourceId){a=(a=a.setIn(["layers",i,"source"],n)).setIn(["layers",i,"metadata","gfw:id"],t.sourceId);var o=e.find(function(e){return e.refLayer.id===t.sourceId}).refLayer;a=to(a,r.id,o)}})}),t(eo(a))}).catch(function(e){console.warn(e)})}}(d)),r(eo(c))}},no=Object(h.b)(Object(h.a)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[1/0,1/0,-1/0,-1/0];return Ei.coordEach(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}})),ao="ADD_TRACK",io="UPDATE_TRACK",oo=function(e){var t=no(e);return{minLat:t[3],minLng:t[0],maxLat:t[1],maxLng:t[2]}},so=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t,r){var n=r().map.tracks.data;e&&e.forEach(function(e){var r,a=e.id,i=n.find(function(e){return e.id===a});void 0===i?t((r=e,function(e,t){var n=r.id,a=r.url,i=r.type,o=r.fitBoundsOnLoad,s=r.layerTemporalExtents,u=r.color,c=r.data,l=t();if(!l.map.tracks.data.find(function(e){return e.id===n})){var p={id:n,url:a,type:i,color:u,fitBoundsOnLoad:o},f=void 0!==r.data&&null!==r.data,d=null!=a&&""!==a;if(f&&(p.data=c,p.geoBounds=oo(c)),e({type:ao,payload:p}),!f&&d){var _=Object(Ge.g)(e,l);if("geojson"!==i){var m=l.map.module.token,y=Object(Ge.h)(a,m,s,{seriesgroup:n});Promise.all(y.map(function(e){return e.catch(function(e){return e})})).then(function(t){var r=Object(Ge.i)(t);if(r.length){var a=Object(Ge.j)(r,["latitude","longitude","datetime","series","weight","sigma"]),i=Object(Ge.k)(a),o=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={start:1/0,end:0},n={minLat:1/0,maxLat:-1/0,minLng:1/0,maxLng:-1/0},a=0,i=e.datetime.length;a<i;a++){var o=e.datetime[a];o<r.start?r.start=o:o>r.end&&(r.end=o);var s=e.latitude[a];s<n.minLat?n.minLat=s:s>n.maxLat&&(n.maxLat=s);var u=e.longitude[a];!0===t&&u<0&&(u+=360),u<n.minLng?n.minLng=u:u>n.maxLng&&(n.maxLng=u)}return n.maxLng-n.minLng>350&&!1===t?Object(h.i)(e,!0):{time:[r.start,r.end],geo:n}}(a);e({type:io,payload:{id:n,data:Object(Ge.l)(i),geoBounds:o.geo,timelineBounds:o.time}}),e(Object(Ge.m)(_))}})}else fetch(a).then(function(e){if(e.status>=400)throw new Error(e.statusText);return e.json()}).then(function(t){var r=function(e){var t={start:1/0,end:0};return e&&e.features&&e.features.forEach(function(e){e.properties.coordinateProperties.times&&e.properties.coordinateProperties.times.length>0&&e.properties.coordinateProperties.times.forEach(function(e){e<t.start?t.start=e:e>t.end&&(t.end=e)})}),{geojson:e,timelineBounds:[t.start,t.end]}}(t),a=r.geojson,i=r.timelineBounds,s=oo(t);e({type:io,payload:{id:n,data:a,geoBounds:s,timelineBounds:i}}),o&&Object(Ge.n)(n)}).catch(function(e){return console.warn(e)}).finally(function(){return e(Object(Ge.m)(_))})}}})):i.color!==e.color&&t({type:io,payload:{id:e.id,color:e.color}})}),n.forEach(function(r){e&&e.find(function(e){return e.id===r.id})||t({type:"REMOVE_TRACK",payload:{trackId:r.id}})})}},uo={loaders:null,token:void 0,temporalExtent:[new Date(1970),new Date],highlightTemporalExtent:null,onViewportChange:void 0,onHover:void 0,onClick:void 0,onLoadStart:void 0,onLoadComplete:void 0,onClosePopup:void 0,onAttributionsChange:void 0},co=(S.arrayOf(S.number),S.string,S.arrayOf(S.instanceOf(Date)),S.func,S.func,S.func,S.func,S.func,S.func,S.func,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge.o:return Object(h.l)({},e,t.payload);case Ge.p:return Object(h.l)({},e,{temporalExtent:t.payload});case Ge.q:return Object(h.l)({},e,{highlightTemporalExtent:t.payload});case Ge.r:var r=null!==e.loaders?Object(h.m)(e.loaders):[];return r.push(t.payload),Object(h.l)({},e,{loaders:r});case Ge.s:var n=Object(h.m)(e.loaders),a=n.findIndex(function(e){return e===t.payload});return n.splice(a,1),Object(h.l)({},e,{loaders:n});default:return e}}),lo={data:[]},po=(S.arrayOf(S.exact(Object(h.l)({},rt,{data:S.object,timelineBounds:S.array,geoBounds:S.exact({minLat:S.number,minLng:S.number,maxLat:S.number,maxLng:S.number})}))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ao:var r=[].concat(Object(h.m)(e.data),[t.payload]);return Object(h.l)({},e,{data:r});case io:var n=t.payload,a=e.data.map(function(e){return e.id!==n.id?e:Object(h.l)({},e,n)});return Object(h.l)({},e,{data:a});case"REMOVE_TRACK":var i=t.payload.trackId,o=e.data.filter(function(e){return e.id!==i});return Object(h.l)({},e,{data:o});default:return e}}),fo={heatmapLayers:{},referenceTiles:[],highlightedVessels:{isEmpty:!0},highlightedClickedVessel:null},ho={currentVisibleTiles:[],currentLoadedTiles:[],currentToLoadTileUids:[],currentToReleaseTileUids:[]},_o={transitionDuration:500,transitionInterpolator:new tt.a,transitionEasing:hi},mo={viewport:{latitude:0,longitude:0,zoom:3,bearing:0,pitch:0,width:1e3,height:800},maxZoom:Ge.R,minZoom:Ge.S,prevZoom:3,currentTransition:null},yo=Object(Ge.ib)(Object.keys(et.sources).map(function(e){return et.sources[e].attribution}).filter(function(e){return void 0!==e})),go={mapStyle:pi((zi=et,zi.layers.forEach(function(e){if(void 0===e.layout&&(e.layout={}),void 0===e.paint&&(e.paint={}),e.metadata&&!0===e.metadata["gfw:temporal"]){var t=void 0===e.metadata["gfw:temporalField"]?"timestamp":e.metadata["gfw:temporalField"];e.filter=["all",[">",t,0],["<",t,999999999999]]}"visible"!==e.layout.visibility&&(e.layout.visibility="none")}),zi)),cartoLayersInstanciated:[],staticLayers:[],basemapLayers:[],attributions:yo},bo={cursor:"progress"},vo=Object(He.c)({module:co,tracks:po,heatmap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge.t:return Object.assign({},e,{heatmapLayers:t.payload});case Ge.u:var r=e.heatmapLayers,n=r[t.payload.layerId].visibleTemporalExtentsIndices;return n=Object(Ge.ib)(n.concat(t.payload.indicesAdded)),r[t.payload.layerId].visibleTemporalExtentsIndices=n,Object.assign({},e,r);case Ge.v:var a=Object.assign({},e.heatmapLayers,Object(h.i)({},t.payload.id,Object(h.l)({tiles:[]},t.payload)));return Object.assign({},e,{heatmapLayers:a});case Ge.w:var i=t.payload,o=Object(h.l)({},e.heatmapLayers[i.id],i),s=Object(h.l)({},e.heatmapLayers,Object(h.i)({},i.id,o));return Object(h.l)({},e,{heatmapLayers:s});case Ge.x:var u=Object.assign({},e.heatmapLayers);return delete u[t.payload.layerId],Object.assign({},e,{heatmapLayers:u});case Ge.y:return Object.assign({},e,{referenceTiles:[].concat(Object(h.m)(e.referenceTiles),[t.payload])});case Ge.z:var c=t.payload.layerId,l=t.payload.tile,p=Object(h.l)({},e.heatmapLayers[c]),f=Object(h.m)(p.tiles),d=f.findIndex(function(e){return e.uid===l.uid});-1===d?f.push(l):f=[f.slice(0,d),l,f.slice(d+1)],p.tiles=f;var _=Object(h.l)({},e.heatmapLayers,Object(h.i)({},c,p));return Object(h.l)({},e,{heatmapLayers:_});case Ge.A:var m=t.payload,y=Object.keys(e.heatmapLayers),g=Object(h.l)({},e.heatmapLayers);y.forEach(function(e){var t=Object(h.l)({},g[e]);m.forEach(function(e){var r=t.tiles.findIndex(function(t){return t.uid===e});r>-1&&t.tiles.splice(r,1)})});var b=Object(h.m)(e.referenceTiles);return m.forEach(function(e){var t=b.findIndex(function(t){return t.uid===e});t>-1&&(b=[].concat(Object(h.m)(b.slice(0,t)),Object(h.m)(b.slice(t+1))))}),Object(h.l)({},e,{heatmapLayers:g,referenceTiles:b});case Ge.B:var v=Object(h.l)({},e.heatmapLayers);return Object(h.l)({},e,{heatmapLayers:v});case Ge.a:return Object.assign({},e,{highlightedVessels:t.payload});case Ge.D:return Object(h.l)({},e,{highlightedClickedVessel:t.payload});case Ge.E:return Object(h.l)({},e,{highlightedClickedVessel:null});default:return e}},heatmapTiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge.F:var r=[].concat(t.payload);return Object(h.l)({},e,{currentVisibleTiles:r});case Ge.G:var n=[].concat(t.payload);return Object(h.l)({},e,{currentLoadedTiles:n});case Ge.H:var a=Object(Ge.ib)(e.currentToLoadTileUids.concat(t.payload.tilesToLoadUids)),i=Object(Ge.ib)(e.currentToReleaseTileUids.concat(t.payload.tilesToReleaseUids)),o=a.filter(function(e){return-1===i.indexOf(e)});return Object(h.l)({},e,{currentToLoadTileUids:o,currentToReleaseTileUids:i});case Ge.I:var s=e.currentToLoadTileUids,u=t.payload,c=s.filter(function(e){return-1===u.indexOf(e)});return Object(h.l)({},e,{currentToLoadTileUids:c});case Ge.J:return Object(h.l)({},e,{currentToReleaseTileUids:[]});default:return e}},style:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:go,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wi:var r=e.mapStyle.setIn(["glyphs"],t.payload.glyphsPath);return Object(h.l)({},e,{mapStyle:r});case Zi:return Object(h.l)({},e,{mapStyle:t.payload});case Ji:return Object(h.l)({},e,{staticLayers:t.payload});case Qi:return Object(h.l)({},e,{basemapLayers:t.payload});case Xi:var n=[].concat(Object(h.m)(e.cartoLayersInstanciated),Object(h.m)(t.payload));return Object(h.l)({},e,{cartoLayersInstanciated:n});default:return e}},viewport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge.K:return Object(h.l)({},e,{viewport:t.payload,canZoomIn:t.payload.zoom<e.maxZoom,canZoomOut:t.payload.zoom>e.minZoom,prevZoom:e.viewport.zoom});case Ge.L:var r=Object(h.l)({},e.viewport,t.payload);return Object(h.l)({},e,{viewport:r,prevZoom:r.zoom});case Ge.M:var n=e.viewport.zoom,a=Math.min(e.maxZoom,t.payload.zoom||n+t.payload.increment),i=Object(h.l)({},e.viewport,_o,{zoom:a,latitude:null===t.payload.latitude?e.viewport.latitude:t.payload.latitude,longitude:null===t.payload.longitude?e.viewport.longitude:t.payload.longitude});return Object(h.l)({},e,{viewport:i,canZoomIn:a<e.maxZoom,canZoomOut:a>e.minZoom,prevZoom:e.viewport.zoom,currentTransition:Ge.N.ZOOM});case Ge.O:return Object(h.l)({},e,{mouseLatLong:t.payload});case Ge.P:return Object(h.l)({},e,{currentTransition:null});case Ge.Q:return Object(h.l)({},e,t.payload);default:return e}},interaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wi:return Object(h.l)({},e,{cursor:t.payload});default:return e}}}),So=Object(He.c)({map:vo});Ge.T.replaceReducer(So);var Oo=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Object(Ve.b)(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Object(Ve.a)(e,t,{leading:n,maxWait:t,trailing:a})}(function(e){Ge.T.dispatch(function(e){return function(t,r){for(var n=r().map.style.mapStyle,a=n.toJS().layers,i=Math.round(e[0].getTime()/1e3),o=Math.round(e[1].getTime()/1e3),s=Ge.tb.getOffsetedTimeAtPrecision(e[0].getTime()),u=Ge.tb.getOffsetedTimeAtPrecision(e[1].getTime()),c=0;c<a.length;c++){var l=a[c];if(void 0!==l.metadata&&!0===l.metadata["gfw:temporal"]){var p=n.getIn(["layers",c,"filter"]).toJS();if(null===p)throw new Error("filter must be preset on style.json for temporal layer: ",l.id);var f=l.metadata&&"timeIndex"===l.metadata["gfw:temporalField"];p[1][2]=f?s:i,p[2][2]=f?u:o,n=n.setIn(["layers",c,"filter"],pi(p))}}t(eo(n))}}(e)),Ge.T.dispatch(Object(Ge.U)(e))},16),Io=function(e){Ge.T.dispatch(Object(Ge.ab)({latitude:e.center[0],longitude:e.center[1],zoom:e.zoom}))},Eo=function(e){function t(){var e,r;Object(h.d)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Object(h.e)(this,(e=Object(h.f)(t)).call.apply(e,[this].concat(a))),Object(h.i)(Object(h.j)(r),"state",{initialized:!1,error:null,errorInfo:null}),r}return Object(h.c)(t,e),Object(h.g)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.setState({error:e,errorInfo:t})}},{key:"componentDidMount",value:function(){var e;void 0!==this.props.viewport&&Io(this.props.viewport),null!==this.props.glyphsPath&&Ge.T.dispatch((e={glyphsPath:this.props.glyphsPath},{type:Wi,payload:{glyphsPath:e.glyphsPath}})),void 0!==this.props.onAttributionsChange&&this.props.onAttributionsChange(Ge.T.getState().map.style.attributions),Ge.T&&void 0===Ge.T.getState().map.module.token&&Ge.T.dispatch(Object(Ge.V)({token:this.props.token,onViewportChange:this.props.onViewportChange,onHover:this.props.onHover,onClick:this.props.onClick,onLoadStart:this.props.onLoadStart,onLoadComplete:this.props.onLoadComplete,onClosePopup:this.props.onClosePopup,onAttributionsChange:this.props.onAttributionsChange})),null!==this.props.highlightTemporalExtent&&this.props.highlightTemporalExtent.length&&Ge.T.dispatch(Object(Ge.W)(this.props.highlightTemporalExtent)),(null!==this.props.basemapLayers&&this.props.basemapLayers.length||null!==this.props.staticLayers&&this.props.staticLayers.length)&&Ge.T.dispatch(ro(this.props.staticLayers||[],this.props.basemapLayers||[])),null!==this.props.tracks&&Ge.T.dispatch(so(this.props.tracks)),null!==this.props.temporalExtent&&this.props.temporalExtent.length&&Oo(this.props.temporalExtent),this.setState({initialized:!0}),null!==this.props.heatmapLayers&&Ge.T.dispatch(Object(Ge.X)(this.props.heatmapLayers,this.props.loadTemporalExtent))}},{key:"componentDidUpdate",value:function(e){this.props.tracks!==e.tracks&&Ge.T.dispatch(so(this.props.tracks)),this.props.heatmapLayers!==e.heatmapLayers&&Ge.T.dispatch(Object(Ge.X)(this.props.heatmapLayers,this.props.loadTemporalExtent)),(null!==this.props.basemapLayers&&this.props.basemapLayers.length||null!==this.props.staticLayers&&this.props.staticLayers.length)&&Ge.T.dispatch(ro(this.props.staticLayers||[],this.props.basemapLayers||[])),null!==this.props.loadTemporalExtent&&this.props.loadTemporalExtent.length&&(null!==e.loadTemporalExtent&&e.loadTemporalExtent.length&&this.props.loadTemporalExtent[0].getTime()===e.loadTemporalExtent[0].getTime()&&this.props.loadTemporalExtent[1].getTime()===e.loadTemporalExtent[1].getTime()||Ge.T.dispatch(Object(Ge.Y)(this.props.loadTemporalExtent))),null!==this.props.temporalExtent&&this.props.temporalExtent.length&&(null!==e.temporalExtent&&e.temporalExtent.length&&this.props.temporalExtent[0].getTime()===e.temporalExtent[0].getTime()&&this.props.temporalExtent[1].getTime()===e.temporalExtent[1].getTime()||Oo(this.props.temporalExtent)),null!==this.props.highlightTemporalExtent&&this.props.highlightTemporalExtent.length?null!==e.highlightTemporalExtent&&e.highlightTemporalExtent.length&&this.props.highlightTemporalExtent[0].getTime()===e.highlightTemporalExtent[0].getTime()&&this.props.highlightTemporalExtent[1].getTime()===e.highlightTemporalExtent[1].getTime()||Ge.T.dispatch(Object(Ge.W)(this.props.highlightTemporalExtent)):this.props.highlightTemporalExtent!==e.highlightTemporalExtent&&Ge.T.dispatch(Object(Ge.W)(this.props.highlightTemporalExtent));var t=Ge.T.getState().map.viewport.viewport;void 0!==this.props.viewport&&null===Ge.T.getState().map.viewport.currentTransition&&(t.latitude===this.props.viewport.center[0]&&t.longitude===this.props.viewport.center[1]&&t.zoom===this.props.viewport.zoom||(1===Math.abs(t.zoom-this.props.viewport.zoom)?Ge.T.dispatch(Object(Ge.Z)(this.props.viewport.zoom)):Io(this.props.viewport)))}},{key:"render",value:function(){return null!==this.state.error?(console.log(this.state.error),_.a.createElement("div",null,_.a.createElement("h2",null,"Map component crashed!"),_.a.createElement("p",{className:"red"},this.state.error&&this.state.error.toString()),_.a.createElement("div",null,"Component Stack Error Details:"),_.a.createElement("p",{className:"red"},this.state.errorInfo.componentStack))):!0!==this.state.initialized?null:_.a.createElement(ze.a,{store:Ge.T},_.a.createElement($i,this.props))}}]),t}(_.a.Component);Eo.propTypes={token:S.string,transitionsEnabled:S.bool,viewport:S.shape(st).isRequired,tracks:S.arrayOf(S.exact(rt)),heatmapLayers:S.arrayOf(S.shape(nt)),temporalExtent:S.arrayOf(S.instanceOf(Date)),highlightTemporalExtent:S.arrayOf(S.instanceOf(Date)),loadTemporalExtent:S.arrayOf(S.instanceOf(Date)),basemapLayers:S.arrayOf(S.shape(at)),staticLayers:S.arrayOf(S.shape(it)),hoverPopup:S.shape(ot),clickPopup:S.shape(ot),glyphsPath:S.string,onViewportChange:S.func,onLoadStart:S.func,onLoadComplete:S.func,onClick:S.func,onHover:S.func,onAttributionsChange:S.func,onClosePopup:S.func},Eo.defaultProps={token:null,transitionsEnabled:!1,glyphsPath:null,highlightTemporalExtent:null,tracks:null,hoverPopup:null,clickPopup:null,heatmapLayers:null,temporalExtent:null,loadTemporalExtent:null,basemapLayers:null,staticLayers:null,onViewportChange:function(){},onLoadStart:function(){},onLoadComplete:function(){},onClick:function(){},onHover:function(){},onAttributionsChange:function(){},onClosePopup:function(){}};et.metadata["gfw:basemap-layers"];var To=r(58),wo=r(145),Ao=r(146),Mo=r(249),Po=r(81),Lo=r(85),xo=r.n(Lo),Co=[Le],jo=Ue()({distance:0},1e3),Ro=function(e,t){var r=e.data.features[0].properties.coordinateProperties;return r?r.times.findIndex(function(e){return e===t}):-1},ko=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.data.features[0].geometry.coordinates,a=Ro(e,t);return n[a+r]?n[a+r]:n[a]},Do=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.rounded,a=void 0!==n&&n,i=r.final,o=void 0!==i&&i,s=Object(Po.bearingToAzimuth)(Object(To.a)(Object(Po.point)(e),Object(Po.point)(t),{final:o}));return a?Math.round(s):s},No=function(e,t,r){var a=Object(n.useMemo)(function(){return ko(e,t)},[t,e]),i=Object(n.useMemo)(function(){return ko(e,t,1)},[t,e]),o=Object(n.useMemo)(function(){return function(e,t,r){var n=Ro(e,t),a=e.data.features[0].geometry.coordinates,i=a[n],o=a[n+1],s=Object(wo.a)(a[0],i,e.data.features[0]),u=Object(Ao.a)(s),c=Object(wo.a)(i,o,e.data.features[0]);return u+Object(Ao.a)(c)*r/100}(e,t,r)},[e,r,t]),s=Object(n.useRef)(o),u=Object(n.useMemo)(function(){return Do(a,i,{rounded:!0})},[a,i]),c=Object(n.useState)({center:a,bearing:u,currentDistance:o}),l=Object(f.a)(c,2),p=l[0],h=l[1];return Object(n.useEffect)(function(){s.current=p.currentDistance,jo.set({distance:o})},[t]),Object(n.useEffect)(function(){window.requestAnimationFrame(function(){var t=p.currentDistance<o;if(p.currentDistance!==o){var r=function(e){var t=jo.distance,r=Object(Mo.a)(e.data.features[0],t),n=r&&r.geometry&&r.geometry.coordinates||null;return{center:null!==n?n:null,nextDistance:t}}(e),n=r.center,a=r.nextDistance;null!==n&&h(function(e){var r=Do(e.center,n,{rounded:!0});return{center:n,bearing:t?r:r-180,currentDistance:a}})}})},[o,i,p.currentDistance,t,e]),Object(P.a)({},p)},Fo={zoom:8,center:[-3,109]},Bo=function(e){var t=e.timestamp,r=e.percentage,i=No(Le,t,r),o=i.center,s=i.bearing;Fo.center[0]=o[1],Fo.center[1]=o[0];var u=Object(n.useMemo)(function(){return{latitude:o[1],longitude:o[0],content:a.a.createElement("span",{className:xo.a.arrow,style:{transform:"translate(-50%, -50%) rotate(".concat(s,"deg)")}})}},[s,o]),c=Object(n.useMemo)(function(){return Re.event.map(function(e){var t=e.id,r=ko(Le,t),n=r[0]===o[0]&&r[1]===o[1];return{latitude:r[1],longitude:r[0],content:a.a.createElement("span",{className:Ae()(xo.a.event,Object(R.a)({},xo.a.eventActive,n))})}})},[o]),l=Object(n.useMemo)(function(){return c.concat(u)},[c,u]);return a.a.createElement("div",{className:xo.a.mapContainer},a.a.createElement(Eo,{viewport:Fo,tracks:Co,markers:l,transitionsEnabled:!1}))},Uo=function(){var e=function(e){var t=e.data.features[0].properties.coordinateProperties.times,r=Object(n.useState)({step:33,percentage:0}),a=Object(f.a)(r,2),i=a[0],o=a[1],s=i.step,u=i.percentage;return Object(n.useEffect)(function(){var t=e.data.features[0].geometry.coordinates,r=function(e){e.preventDefault(),"ArrowUp"===e.key?(e.stopPropagation(),o(u<90?{step:s,percentage:u+10}:{step:s+1,percentage:0})):"ArrowDown"===e.key?(e.stopPropagation(),o(u>0?{step:s,percentage:u-10}:{step:s-1,percentage:90})):"ArrowRight"===e.key?(e.stopPropagation(),s<t.length-1&&o({step:s+1,percentage:0})):"ArrowLeft"===e.key&&(e.stopPropagation(),s>0&&o({step:s-1,percentage:0}))};return window.addEventListener("keydown",r,!0),function(){window.removeEventListener("keydown",r,!0)}},[u,s,e.data.features]),{timestamp:t[s],percentage:u}}(Le),t=e.timestamp,r=e.percentage;return a.a.createElement(Bo,{timestamp:t,percentage:r})},Vo=r(241),zo=r.n(Vo),Ho=Re,Go=function(){var e,t=Object(n.useState)((e=0,Le.data.features[0].properties.coordinateProperties.times[e])),r=Object(f.a)(t,2),i=r[0],o=r[1],s=Object(n.useCallback)(function(e){e&&o(e)},[]);return a.a.createElement(n.Fragment,null,a.a.createElement("div",{className:"top"},"top"),a.a.createElement("div",{className:"page"},a.a.createElement("div",{className:"map"},a.a.createElement(Bo,{timestamp:i,percentage:0})),a.a.createElement("div",{className:"profile"},a.a.createElement(zo.a,{top:60,activeClass:"profileSticky",innerZ:10},a.a.createElement("div",{className:"profileHeader"},a.a.createElement("h2",null,a.a.createElement(E,{iso:"IDN"}),"Vessel name"),a.a.createElement("button",null,"\u24d8"))),a.a.createElement("ul",null,a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"),a.a.createElement("li",null,"info: data"))),a.a.createElement(De,{events:Ho.event,rfmos:Ho.rfmo,onEventClick:s,onChange:s})))},qo=function(){return a.a.createElement(s.b,null,a.a.createElement(l,{path:"".concat("/pcp-prototypes","/"),default:!0}),a.a.createElement(Ie,{path:"".concat("/pcp-prototypes","/search")}),a.a.createElement(Fe,{path:"".concat("/pcp-prototypes","/scrolling")}),a.a.createElement(Uo,{path:"".concat("/pcp-prototypes","/map-navigation")}),a.a.createElement(Go,{path:"".concat("/pcp-prototypes","/map-scrolling")}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(qo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},49:function(e,t,r){e.exports={container:"multi-select_container__30fY9",selectionsContainer:"multi-select_selectionsContainer__10emW",selectionItem:"multi-select_selectionItem__3L-va",selectionItemRemoveBtn:"multi-select_selectionItemRemoveBtn__3MPcp",inputText:"multi-select_inputText__3jLz4",toggleBtn:"multi-select_toggleBtn__35nKM",listContainer:"multi-select_listContainer__3_z51"}},85:function(e,t,r){e.exports={mapContainer:"map_mapContainer__24fBb",arrow:"map_arrow__SYZ2Y",event:"map_event__1HuGv",eventActive:"map_eventActive__dZTuz"}}},[[250,1,2]]]);
//# sourceMappingURL=main.bb15038a.chunk.js.map