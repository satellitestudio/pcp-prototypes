{"version":3,"sources":["components/search/search.tsx","components/search/search.hooks.ts","data/data.js","data/rfmos.js","data/flags.js","components/search/search.container.tsx","app.tsx","serviceWorker.ts","index.tsx","components/search/search.module.css"],"names":["Search","props","itemToString","initialInputValue","onChange","onKeyDown","stateReducer","items","onStateChange","loading","react_default","a","createElement","downshift_esm","defaultHighlightedIndex","downshift","getInputProps","getMenuProps","getItemProps","isOpen","selectedItem","highlightedIndex","className","styles","searchContainer","Object","assign","searchInput","placeholder","undefined","event","optionList","index_esm","height","itemSize","itemCount","length","outerElementType","_ref","index","style","item","key","id","objectSpread","backgroundColor","color","type","loadingContainer","searchTypes","asyncFields","parseSearchFieldsInput","input","selectedItems","cursorPosition","selectedItemTypes","map","i","selectedItemLabels","label","existingSearchTypes","searchFields","replace","split","replaceWithNormalSpaces","filter","v","includes","currentTypeEndIndex","currentTypeStartIndex","currentType","slice","push","getItemsFiltered","selectedItemIds","itemsNotSelected","reduce","acc","cleanValue","matchSorter","keys","data","concat","toConsumableArray","r","breakingSpaceRegex","RegExp","string","SearchContainer","_useResultsFiltered","staticData","initialValue","initialState","search","results","_useReducer","useReducer","state","action","payload","_useReducer2","slicedToArray","dispatch","useEffect","searchFieldsTypes","f","needsRequest","some","searchQuery","join","asyncNeeded","controller","AbortController","searchUrl","fetch","signal","then","response","status","Promise","resolve","reject","Error","statusText","json","apiResults","entries","d","name","vesselId","catch","err","console","error","abort","useResultsFiltered","initialSearch","_useResultsFiltered2","handleStateChange","useCallback","changes","downshiftState","hasOwnProperty","_downshiftState$input","inputValue","inputValueString","handleConfirmSelection","lastCharacter","arguments","currentItems","find","selections","selectionsLength","values","parseSelectionToInput","selection","defineProperty","getSelectedItemsByInput","currentSelection","inputValuesParsed","s","_s$split","_s$split2","labels","l","parseInputToFields","p","Downshift","stateChangeTypes","keyDownEnter","clickItem","changeInput","Math","max","currentLabelEndIndex","currentLabelStartIndex","currentLabel","handleChangeInput","customKeyDownHandler","setState","hasValue","isSpace","isComma","hasOneOptions","nativeEvent","preventDownshiftDefault","search_search","App","query","useMemo","qs","parse","window","location","handleChange","url","origin","pathname","history","replaceState","search_container","Boolean","hostname","match","ReactDOM","render","src_app","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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CJgB,MAAO,UDnBAH,IAAI,SAAC4B,GAAD,OAAA3D,OAAAmB,EAAA,EAAAnB,CAAA,GAAa2D,EAAb,CAAgBrC,KAAM,YADrCtB,OAAA0D,EAAA,EAAA1D,CEHe,CACb,CACEkB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,oBAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,wBAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,kBAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,uCAET,CACEhB,GAAI,MACJgB,MAAO,uBAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,0BAET,CACEhB,GAAI,MACJgB,MAAO,uBAET,CACEhB,GAAI,MACJgB,MAAO,gDAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,yBAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,4BAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,2BAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,yBAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,oBAET,CACEhB,GAAI,MACJgB,MAAO,kBAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,sBAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,kBAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,oBAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,kBAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,qBAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,qCAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,kCAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,yBAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,oBAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,4BAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,kBAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,oBAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,oBAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,oBAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,0BAET,CACEhB,GAAI,MACJgB,MAAO,mBAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,6BAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,kCAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,4BAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,QAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,eAET,CACEhB,GAAI,MACJgB,MAAO,SAET,CACEhB,GAAI,MACJgB,MAAO,uBAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,YAET,CACEhB,GAAI,MACJgB,MAAO,UAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,wCAET,CACEhB,GAAI,MACJgB,MAAO,WAET,CACEhB,GAAI,MACJgB,MAAO,iBAET,CACEhB,GAAI,MACJgB,MAAO,cAET,CACEhB,GAAI,MACJgB,MAAO,gBAET,CACEhB,GAAI,MACJgB,MAAO,oCAET,CACEhB,GAAI,MACJgB,MAAO,aAET,CACEhB,GAAI,MACJgB,MAAO,0BAET,CACEhB,GAAI,MACJgB,MAAO,gCAET,C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","file":"static/js/main.ecbd29ce.chunk.js","sourcesContent":["import React from 'react'\nimport styles from './search.module.css'\nimport Downshift, { DownshiftState, StateChangeOptions } from 'downshift'\nimport { FixedSizeList } from 'react-window'\nimport { DataItem } from '../../types/data'\n\ninterface SearchProps {\n  items: DataItem[]\n  loading?: boolean\n  initialInputValue: string\n  itemToString(obj: DataItem): string\n  onChange?(selectedItems: DataItem[], downshiftState: any): void\n  onKeyDown?(\n    event: React.KeyboardEvent<HTMLInputElement>,\n    downshiftState: DownshiftState<DataItem[]>\n  ): void\n  stateReducer(\n    state: DownshiftState<DataItem[]>,\n    changes: StateChangeOptions<DataItem[]>\n  ): StateChangeOptions<DataItem[]>\n  onStateChange(\n    changes: StateChangeOptions<DataItem[]>,\n    downshiftState: DownshiftState<DataItem[]>\n  ): void\n}\n\nconst Search: React.FC<SearchProps> = (props) => {\n  const {\n    itemToString,\n    initialInputValue,\n    onChange,\n    onKeyDown,\n    stateReducer,\n    items,\n    onStateChange,\n    loading,\n  } = props\n  return (\n    <Downshift\n      onChange={onChange}\n      initialInputValue={initialInputValue}\n      stateReducer={stateReducer}\n      itemToString={itemToString}\n      onStateChange={onStateChange}\n      defaultHighlightedIndex={0}\n    >\n      {(downshift) => {\n        const {\n          getInputProps,\n          getMenuProps,\n          getItemProps,\n          isOpen,\n          selectedItem,\n          highlightedIndex,\n        } = downshift\n        return (\n          <div className={styles.searchContainer}>\n            <div>\n              <input\n                className={styles.searchInput}\n                {...getInputProps({\n                  placeholder: 'Start searching',\n                  onKeyDown:\n                    onKeyDown !== undefined ? (event) => onKeyDown(event, downshift) : undefined,\n                })}\n              />\n            </div>\n            {!isOpen ? null : (\n              <div className={styles.optionList}>\n                <FixedSizeList\n                  height={300}\n                  itemSize={20}\n                  itemCount={items.length}\n                  outerElementType=\"ul\"\n                  {...getMenuProps()}\n                >\n                  {({ index, style }) => {\n                    const item = items[index]\n                    return (\n                      <li\n                        key={item.id}\n                        {...getItemProps({\n                          item,\n                          index,\n                        })}\n                        style={{\n                          ...style,\n                          backgroundColor: highlightedIndex === index ? '#ccc' : 'transparent',\n                          color: selectedItem === item ? '#0f0f0f' : '#000',\n                        }}\n                      >\n                        {item.type}: {itemToString(item)}\n                      </li>\n                    )\n                  }}\n                </FixedSizeList>\n                {loading === true && <span className={styles.loadingContainer}> loading...</span>}\n              </div>\n            )}\n          </div>\n        )\n      }}\n    </Downshift>\n  )\n}\n\nexport default Search\n","import { useEffect, useReducer } from 'react'\nimport matchSorter from 'match-sorter'\nimport { DataItem } from '../../types/data'\nimport { VesselAPIEntry, VesselAPIResult } from '../../types/api'\nimport { replaceWithNormalSpaces } from './search.container'\n\nexport const searchTypes = ['flag', 'rfmo', 'vessel']\nexport const asyncFields = ['vessel']\n\nconst parseSearchFieldsInput = (\n  input: string,\n  selectedItems: DataItem[],\n  cursorPosition: number\n) => {\n  const selectedItemTypes = (selectedItems && selectedItems.map((i) => i.type)) || []\n  const selectedItemLabels = (selectedItems && selectedItems.map((i) => i.label)) || []\n  const existingSearchTypes: { [type: string]: boolean } = {}\n\n  const searchFields = input\n    .replace(/:/gi, ' ')\n    .replace(/,/gi, ' ')\n    .split(' ')\n    // Space replacement needs to be done after splitting by regular spaces\n    .map(replaceWithNormalSpaces)\n    .filter((v: any) => {\n      if (!v || v === '') return false\n      if (selectedItemTypes.includes(v)) {\n        // Needed when search by type with a current type filter added\n        if (!existingSearchTypes[v]) {\n          existingSearchTypes[v] = true\n          return false\n        } else {\n          return true\n        }\n      }\n      return !selectedItemLabels.includes(v)\n    })\n  const isLastSpace = input[cursorPosition] === ' '\n  if (!isLastSpace) {\n    let currentTypeEndIndex = 0\n    let currentTypeStartIndex = 0\n    for (let i = cursorPosition; i > 0; i--) {\n      if (input[i] === ':') {\n        currentTypeEndIndex = i\n      } else if (input[i] === ' ') {\n        currentTypeStartIndex = i + 1\n        break\n      }\n    }\n    const currentType = input.slice(currentTypeStartIndex, currentTypeEndIndex)\n    if (currentType) {\n      searchFields.push(currentType)\n    }\n  }\n  return searchFields\n}\n\nconst getItemsFiltered = (\n  items: DataItem[],\n  input: string,\n  selectedItems: DataItem[],\n  cursorPosition: number\n): DataItem[] => {\n  if (!input) return items\n  let selectedItemIds = (selectedItems && selectedItems.map((i) => i.id)) || []\n\n  const searchFields = parseSearchFieldsInput(input, selectedItems, cursorPosition)\n  const itemsNotSelected =\n    selectedItemIds.length > 0 ? items.filter((i) => !selectedItemIds.includes(i.id)) : items\n\n  return searchFields.reduce((acc, cleanValue) => {\n    return matchSorter(acc, cleanValue, { keys: ['label', 'type'] })\n  }, itemsNotSelected)\n}\n\ninterface ResultsAction {\n  type: 'inputChange' | 'startSearch' | 'endSearch'\n  payload?: any\n}\n\ninterface ResultsState {\n  loading: boolean\n  staticData: DataItem[]\n  selectedItem: DataItem[]\n  cursorPosition: number\n  search: string\n  results: DataItem[]\n}\n\nexport const useResultsFiltered = (staticData: DataItem[], initialValue?: string): any => {\n  const initialState: ResultsState = {\n    loading: false,\n    staticData,\n    selectedItem: [],\n    cursorPosition: 0,\n    search: initialValue || '',\n    results: staticData,\n  }\n  const resultsReducer = (state: ResultsState, action: ResultsAction): ResultsState => {\n    switch (action.type) {\n      case 'inputChange':\n        return { ...state, ...action.payload }\n      case 'startSearch': {\n        const { staticData, search, selectedItem, cursorPosition } = state\n        return {\n          ...state,\n          results: getItemsFiltered(staticData, search, selectedItem, cursorPosition),\n          loading: action.payload,\n        }\n      }\n      case 'endSearch': {\n        return {\n          ...state,\n          results: [...state.results, ...action.payload],\n          loading: false,\n        }\n      }\n      default:\n        return state\n    }\n  }\n  const [state, dispatch] = useReducer(resultsReducer, initialState)\n  const { search, selectedItem, cursorPosition } = state\n  useEffect(() => {\n    const searchFields = parseSearchFieldsInput(search, selectedItem, cursorPosition)\n    const searchFieldsTypes = searchFields.filter((f) => searchTypes.includes(f))\n    const needsRequest =\n      searchFieldsTypes.length === 0 || searchFieldsTypes.some((r) => asyncFields.includes(r))\n    const selectedItemIds = selectedItem.map((i: DataItem) => i.id)\n    const selectedItemLabels = selectedItem.map((i: DataItem) => i.label)\n    const searchQuery = searchFields\n      .filter((f) => !selectedItemLabels.includes(f) && !searchTypes.includes(f))\n      .join(',')\n    const asyncNeeded = needsRequest && searchQuery !== ''\n    dispatch({ type: 'startSearch', payload: asyncNeeded })\n    if (asyncNeeded) {\n      const controller = new AbortController()\n      const searchUrl = `https://vessels-dot-world-fishing-827.appspot.com/datasets/indonesia/vessels?query=${searchQuery}&offset=0`\n\n      fetch(searchUrl, { signal: controller.signal })\n        .then((response) =>\n          response.status >= 200 && response.status < 300\n            ? Promise.resolve(response)\n            : Promise.reject(new Error(response.statusText))\n        )\n        .then((response) => response.json())\n        .then((data: VesselAPIResult) => {\n          const apiResults = data.entries\n            .filter((d: VesselAPIEntry) => d.name)\n            .map((d: VesselAPIEntry) => ({ id: d.vesselId, label: d.name, type: 'vessel' }))\n            .filter((d: DataItem) => !selectedItemIds.includes(d.id))\n          dispatch({ type: 'endSearch', payload: apiResults })\n        })\n        .catch((err) => {\n          if (err.name !== 'AbortError') {\n            console.error('Oops!', err)\n          }\n          dispatch({ type: 'endSearch', payload: [] })\n        })\n      return () => controller.abort()\n    }\n  }, [search])\n  return [state, dispatch]\n}\n","import rfmos from './rfmos'\nimport flags from './flags'\n\nexport default [\n  ...rfmos.map((r) => ({ ...r, type: 'rfmo' })),\n  ...flags.map((r) => ({ ...r, type: 'flag' })),\n]\n","export default [\n  {\n    id: 'ICCAT',\n    label: 'ICCAT',\n  },\n  {\n    id: 'IOTC',\n    label: 'IOTC',\n  },\n  {\n    id: 'WCPFC',\n    label: 'WCPFC',\n  },\n  {\n    id: 'IATTC',\n    label: 'IATTC',\n  },\n  {\n    id: 'AIDCP',\n    label: 'AIDCP',\n  },\n  {\n    id: 'CCSBT',\n    label: 'CCSBT',\n  },\n]\n","export default [\n  {\n    id: 'ABW',\n    label: 'Aruba',\n  },\n  {\n    id: 'AFG',\n    label: 'Afghanistan',\n  },\n  {\n    id: 'AGO',\n    label: 'Angola',\n  },\n  {\n    id: 'AIA',\n    label: 'Anguilla',\n  },\n  {\n    id: 'ALA',\n    label: 'Åland Islands',\n  },\n  {\n    id: 'ALB',\n    label: 'Albania',\n  },\n  {\n    id: 'AND',\n    label: 'Andorra',\n  },\n  {\n    id: 'ARE',\n    label: 'United Arab Emirates',\n  },\n  {\n    id: 'ARG',\n    label: 'Argentina',\n  },\n  {\n    id: 'ARM',\n    label: 'Armenia',\n  },\n  {\n    id: 'ASM',\n    label: 'American Samoa',\n  },\n  {\n    id: 'ATA',\n    label: 'Antarctica',\n  },\n  {\n    id: 'ATF',\n    label: 'French Southern and Antarctic Lands',\n  },\n  {\n    id: 'ATG',\n    label: 'Antigua and Barbuda',\n  },\n  {\n    id: 'AUS',\n    label: 'Australia',\n  },\n  {\n    id: 'AUT',\n    label: 'Austria',\n  },\n  {\n    id: 'AZE',\n    label: 'Azerbaijan',\n  },\n  {\n    id: 'BDI',\n    label: 'Burundi',\n  },\n  {\n    id: 'BEL',\n    label: 'Belgium',\n  },\n  {\n    id: 'BEN',\n    label: 'Benin',\n  },\n  {\n    id: 'BFA',\n    label: 'Burkina Faso',\n  },\n  {\n    id: 'BGD',\n    label: 'Bangladesh',\n  },\n  {\n    id: 'BGR',\n    label: 'Bulgaria',\n  },\n  {\n    id: 'BHR',\n    label: 'Bahrain',\n  },\n  {\n    id: 'BHS',\n    label: 'Bahamas',\n  },\n  {\n    id: 'BIH',\n    label: 'Bosnia and Herzegovina',\n  },\n  {\n    id: 'BLM',\n    label: 'Saint Barthélemy',\n  },\n  {\n    id: 'SHN',\n    label: 'Saint Helena, Ascension and Tristan da Cunha',\n  },\n  {\n    id: 'BLR',\n    label: 'Belarus',\n  },\n  {\n    id: 'BLZ',\n    label: 'Belize',\n  },\n  {\n    id: 'BMU',\n    label: 'Bermuda',\n  },\n  {\n    id: 'BOL',\n    label: 'Bolivia',\n  },\n  {\n    id: 'BES',\n    label: 'Caribbean Netherlands',\n  },\n  {\n    id: 'BRA',\n    label: 'Brazil',\n  },\n  {\n    id: 'BRB',\n    label: 'Barbados',\n  },\n  {\n    id: 'BRN',\n    label: 'Brunei',\n  },\n  {\n    id: 'BTN',\n    label: 'Bhutan',\n  },\n  {\n    id: 'BVT',\n    label: 'Bouvet Island',\n  },\n  {\n    id: 'BWA',\n    label: 'Botswana',\n  },\n  {\n    id: 'CAF',\n    label: 'Central African Republic',\n  },\n  {\n    id: 'CAN',\n    label: 'Canada',\n  },\n  {\n    id: 'CCK',\n    label: 'Cocos (Keeling) Islands',\n  },\n  {\n    id: 'CHE',\n    label: 'Switzerland',\n  },\n  {\n    id: 'CHL',\n    label: 'Chile',\n  },\n  {\n    id: 'CHN',\n    label: 'China',\n  },\n  {\n    id: 'CIV',\n    label: 'Ivory Coast',\n  },\n  {\n    id: 'CMR',\n    label: 'Cameroon',\n  },\n  {\n    id: 'COD',\n    label: 'DR Congo',\n  },\n  {\n    id: 'COG',\n    label: 'Republic of the Congo',\n  },\n  {\n    id: 'COK',\n    label: 'Cook Islands',\n  },\n  {\n    id: 'COL',\n    label: 'Colombia',\n  },\n  {\n    id: 'COM',\n    label: 'Comoros',\n  },\n  {\n    id: 'CPV',\n    label: 'Cape Verde',\n  },\n  {\n    id: 'CRI',\n    label: 'Costa Rica',\n  },\n  {\n    id: 'CUB',\n    label: 'Cuba',\n  },\n  {\n    id: 'CUW',\n    label: 'Curaçao',\n  },\n  {\n    id: 'CXR',\n    label: 'Christmas Island',\n  },\n  {\n    id: 'CYM',\n    label: 'Cayman Islands',\n  },\n  {\n    id: 'CYP',\n    label: 'Cyprus',\n  },\n  {\n    id: 'CZE',\n    label: 'Czechia',\n  },\n  {\n    id: 'DEU',\n    label: 'Germany',\n  },\n  {\n    id: 'DJI',\n    label: 'Djibouti',\n  },\n  {\n    id: 'DMA',\n    label: 'Dominica',\n  },\n  {\n    id: 'DNK',\n    label: 'Denmark',\n  },\n  {\n    id: 'DOM',\n    label: 'Dominican Republic',\n  },\n  {\n    id: 'DZA',\n    label: 'Algeria',\n  },\n  {\n    id: 'ECU',\n    label: 'Ecuador',\n  },\n  {\n    id: 'EGY',\n    label: 'Egypt',\n  },\n  {\n    id: 'ERI',\n    label: 'Eritrea',\n  },\n  {\n    id: 'ESH',\n    label: 'Western Sahara',\n  },\n  {\n    id: 'ESP',\n    label: 'Spain',\n  },\n  {\n    id: 'EST',\n    label: 'Estonia',\n  },\n  {\n    id: 'ETH',\n    label: 'Ethiopia',\n  },\n  {\n    id: 'FIN',\n    label: 'Finland',\n  },\n  {\n    id: 'FJI',\n    label: 'Fiji',\n  },\n  {\n    id: 'FLK',\n    label: 'Falkland Islands',\n  },\n  {\n    id: 'FRA',\n    label: 'France',\n  },\n  {\n    id: 'FRO',\n    label: 'Faroe Islands',\n  },\n  {\n    id: 'FSM',\n    label: 'Micronesia',\n  },\n  {\n    id: 'GAB',\n    label: 'Gabon',\n  },\n  {\n    id: 'GBR',\n    label: 'United Kingdom',\n  },\n  {\n    id: 'GEO',\n    label: 'Georgia',\n  },\n  {\n    id: 'GGY',\n    label: 'Guernsey',\n  },\n  {\n    id: 'GHA',\n    label: 'Ghana',\n  },\n  {\n    id: 'GIB',\n    label: 'Gibraltar',\n  },\n  {\n    id: 'GIN',\n    label: 'Guinea',\n  },\n  {\n    id: 'GLP',\n    label: 'Guadeloupe',\n  },\n  {\n    id: 'GMB',\n    label: 'Gambia',\n  },\n  {\n    id: 'GNB',\n    label: 'Guinea-Bissau',\n  },\n  {\n    id: 'GNQ',\n    label: 'Equatorial Guinea',\n  },\n  {\n    id: 'GRC',\n    label: 'Greece',\n  },\n  {\n    id: 'GRD',\n    label: 'Grenada',\n  },\n  {\n    id: 'GRL',\n    label: 'Greenland',\n  },\n  {\n    id: 'GTM',\n    label: 'Guatemala',\n  },\n  {\n    id: 'GUF',\n    label: 'French Guiana',\n  },\n  {\n    id: 'GUM',\n    label: 'Guam',\n  },\n  {\n    id: 'GUY',\n    label: 'Guyana',\n  },\n  {\n    id: 'HKG',\n    label: 'Hong Kong',\n  },\n  {\n    id: 'HMD',\n    label: 'Heard Island and McDonald Islands',\n  },\n  {\n    id: 'HND',\n    label: 'Honduras',\n  },\n  {\n    id: 'HRV',\n    label: 'Croatia',\n  },\n  {\n    id: 'HTI',\n    label: 'Haiti',\n  },\n  {\n    id: 'HUN',\n    label: 'Hungary',\n  },\n  {\n    id: 'IDN',\n    label: 'Indonesia',\n  },\n  {\n    id: 'IMN',\n    label: 'Isle of Man',\n  },\n  {\n    id: 'IND',\n    label: 'India',\n  },\n  {\n    id: 'IOT',\n    label: 'British Indian Ocean Territory',\n  },\n  {\n    id: 'IRL',\n    label: 'Ireland',\n  },\n  {\n    id: 'IRN',\n    label: 'Iran',\n  },\n  {\n    id: 'IRQ',\n    label: 'Iraq',\n  },\n  {\n    id: 'ISL',\n    label: 'Iceland',\n  },\n  {\n    id: 'ISR',\n    label: 'Israel',\n  },\n  {\n    id: 'ITA',\n    label: 'Italy',\n  },\n  {\n    id: 'JAM',\n    label: 'Jamaica',\n  },\n  {\n    id: 'JEY',\n    label: 'Jersey',\n  },\n  {\n    id: 'JOR',\n    label: 'Jordan',\n  },\n  {\n    id: 'JPN',\n    label: 'Japan',\n  },\n  {\n    id: 'KAZ',\n    label: 'Kazakhstan',\n  },\n  {\n    id: 'KEN',\n    label: 'Kenya',\n  },\n  {\n    id: 'KGZ',\n    label: 'Kyrgyzstan',\n  },\n  {\n    id: 'KHM',\n    label: 'Cambodia',\n  },\n  {\n    id: 'KIR',\n    label: 'Kiribati',\n  },\n  {\n    id: 'KNA',\n    label: 'Saint Kitts and Nevis',\n  },\n  {\n    id: 'KOR',\n    label: 'South Korea',\n  },\n  {\n    id: 'UNK',\n    label: 'Kosovo',\n  },\n  {\n    id: 'KWT',\n    label: 'Kuwait',\n  },\n  {\n    id: 'LAO',\n    label: 'Laos',\n  },\n  {\n    id: 'LBN',\n    label: 'Lebanon',\n  },\n  {\n    id: 'LBR',\n    label: 'Liberia',\n  },\n  {\n    id: 'LBY',\n    label: 'Libya',\n  },\n  {\n    id: 'LCA',\n    label: 'Saint Lucia',\n  },\n  {\n    id: 'LIE',\n    label: 'Liechtenstein',\n  },\n  {\n    id: 'LKA',\n    label: 'Sri Lanka',\n  },\n  {\n    id: 'LSO',\n    label: 'Lesotho',\n  },\n  {\n    id: 'LTU',\n    label: 'Lithuania',\n  },\n  {\n    id: 'LUX',\n    label: 'Luxembourg',\n  },\n  {\n    id: 'LVA',\n    label: 'Latvia',\n  },\n  {\n    id: 'MAC',\n    label: 'Macau',\n  },\n  {\n    id: 'MAF',\n    label: 'Saint Martin',\n  },\n  {\n    id: 'MAR',\n    label: 'Morocco',\n  },\n  {\n    id: 'MCO',\n    label: 'Monaco',\n  },\n  {\n    id: 'MDA',\n    label: 'Moldova',\n  },\n  {\n    id: 'MDG',\n    label: 'Madagascar',\n  },\n  {\n    id: 'MDV',\n    label: 'Maldives',\n  },\n  {\n    id: 'MEX',\n    label: 'Mexico',\n  },\n  {\n    id: 'MHL',\n    label: 'Marshall Islands',\n  },\n  {\n    id: 'MKD',\n    label: 'Macedonia',\n  },\n  {\n    id: 'MLI',\n    label: 'Mali',\n  },\n  {\n    id: 'MLT',\n    label: 'Malta',\n  },\n  {\n    id: 'MMR',\n    label: 'Myanmar',\n  },\n  {\n    id: 'MNE',\n    label: 'Montenegro',\n  },\n  {\n    id: 'MNG',\n    label: 'Mongolia',\n  },\n  {\n    id: 'MNP',\n    label: 'Northern Mariana Islands',\n  },\n  {\n    id: 'MOZ',\n    label: 'Mozambique',\n  },\n  {\n    id: 'MRT',\n    label: 'Mauritania',\n  },\n  {\n    id: 'MSR',\n    label: 'Montserrat',\n  },\n  {\n    id: 'MTQ',\n    label: 'Martinique',\n  },\n  {\n    id: 'MUS',\n    label: 'Mauritius',\n  },\n  {\n    id: 'MWI',\n    label: 'Malawi',\n  },\n  {\n    id: 'MYS',\n    label: 'Malaysia',\n  },\n  {\n    id: 'MYT',\n    label: 'Mayotte',\n  },\n  {\n    id: 'NAM',\n    label: 'Namibia',\n  },\n  {\n    id: 'NCL',\n    label: 'New Caledonia',\n  },\n  {\n    id: 'NER',\n    label: 'Niger',\n  },\n  {\n    id: 'NFK',\n    label: 'Norfolk Island',\n  },\n  {\n    id: 'NGA',\n    label: 'Nigeria',\n  },\n  {\n    id: 'NIC',\n    label: 'Nicaragua',\n  },\n  {\n    id: 'NIU',\n    label: 'Niue',\n  },\n  {\n    id: 'NLD',\n    label: 'Netherlands',\n  },\n  {\n    id: 'NOR',\n    label: 'Norway',\n  },\n  {\n    id: 'NPL',\n    label: 'Nepal',\n  },\n  {\n    id: 'NRU',\n    label: 'Nauru',\n  },\n  {\n    id: 'NZL',\n    label: 'New Zealand',\n  },\n  {\n    id: 'OMN',\n    label: 'Oman',\n  },\n  {\n    id: 'PAK',\n    label: 'Pakistan',\n  },\n  {\n    id: 'PAN',\n    label: 'Panama',\n  },\n  {\n    id: 'PCN',\n    label: 'Pitcairn Islands',\n  },\n  {\n    id: 'PER',\n    label: 'Peru',\n  },\n  {\n    id: 'PHL',\n    label: 'Philippines',\n  },\n  {\n    id: 'PLW',\n    label: 'Palau',\n  },\n  {\n    id: 'PNG',\n    label: 'Papua New Guinea',\n  },\n  {\n    id: 'POL',\n    label: 'Poland',\n  },\n  {\n    id: 'PRI',\n    label: 'Puerto Rico',\n  },\n  {\n    id: 'PRK',\n    label: 'North Korea',\n  },\n  {\n    id: 'PRT',\n    label: 'Portugal',\n  },\n  {\n    id: 'PRY',\n    label: 'Paraguay',\n  },\n  {\n    id: 'PSE',\n    label: 'Palestine',\n  },\n  {\n    id: 'PYF',\n    label: 'French Polynesia',\n  },\n  {\n    id: 'QAT',\n    label: 'Qatar',\n  },\n  {\n    id: 'REU',\n    label: 'Réunion',\n  },\n  {\n    id: 'ROU',\n    label: 'Romania',\n  },\n  {\n    id: 'RUS',\n    label: 'Russia',\n  },\n  {\n    id: 'RWA',\n    label: 'Rwanda',\n  },\n  {\n    id: 'SAU',\n    label: 'Saudi Arabia',\n  },\n  {\n    id: 'SDN',\n    label: 'Sudan',\n  },\n  {\n    id: 'SEN',\n    label: 'Senegal',\n  },\n  {\n    id: 'SGP',\n    label: 'Singapore',\n  },\n  {\n    id: 'SGS',\n    label: 'South Georgia',\n  },\n  {\n    id: 'SJM',\n    label: 'Svalbard and Jan Mayen',\n  },\n  {\n    id: 'SLB',\n    label: 'Solomon Islands',\n  },\n  {\n    id: 'SLE',\n    label: 'Sierra Leone',\n  },\n  {\n    id: 'SLV',\n    label: 'El Salvador',\n  },\n  {\n    id: 'SMR',\n    label: 'San Marino',\n  },\n  {\n    id: 'SOM',\n    label: 'Somalia',\n  },\n  {\n    id: 'SPM',\n    label: 'Saint Pierre and Miquelon',\n  },\n  {\n    id: 'SRB',\n    label: 'Serbia',\n  },\n  {\n    id: 'SSD',\n    label: 'South Sudan',\n  },\n  {\n    id: 'STP',\n    label: 'São Tomé and Príncipe',\n  },\n  {\n    id: 'SUR',\n    label: 'Suriname',\n  },\n  {\n    id: 'SVK',\n    label: 'Slovakia',\n  },\n  {\n    id: 'SVN',\n    label: 'Slovenia',\n  },\n  {\n    id: 'SWE',\n    label: 'Sweden',\n  },\n  {\n    id: 'SWZ',\n    label: 'Eswatini',\n  },\n  {\n    id: 'SXM',\n    label: 'Sint Maarten',\n  },\n  {\n    id: 'SYC',\n    label: 'Seychelles',\n  },\n  {\n    id: 'SYR',\n    label: 'Syria',\n  },\n  {\n    id: 'TCA',\n    label: 'Turks and Caicos Islands',\n  },\n  {\n    id: 'TCD',\n    label: 'Chad',\n  },\n  {\n    id: 'TGO',\n    label: 'Togo',\n  },\n  {\n    id: 'THA',\n    label: 'Thailand',\n  },\n  {\n    id: 'TJK',\n    label: 'Tajikistan',\n  },\n  {\n    id: 'TKL',\n    label: 'Tokelau',\n  },\n  {\n    id: 'TKM',\n    label: 'Turkmenistan',\n  },\n  {\n    id: 'TLS',\n    label: 'Timor-Leste',\n  },\n  {\n    id: 'TON',\n    label: 'Tonga',\n  },\n  {\n    id: 'TTO',\n    label: 'Trinidad and Tobago',\n  },\n  {\n    id: 'TUN',\n    label: 'Tunisia',\n  },\n  {\n    id: 'TUR',\n    label: 'Turkey',\n  },\n  {\n    id: 'TUV',\n    label: 'Tuvalu',\n  },\n  {\n    id: 'TWN',\n    label: 'Taiwan',\n  },\n  {\n    id: 'TZA',\n    label: 'Tanzania',\n  },\n  {\n    id: 'UGA',\n    label: 'Uganda',\n  },\n  {\n    id: 'UKR',\n    label: 'Ukraine',\n  },\n  {\n    id: 'UMI',\n    label: 'United States Minor Outlying Islands',\n  },\n  {\n    id: 'URY',\n    label: 'Uruguay',\n  },\n  {\n    id: 'USA',\n    label: 'United States',\n  },\n  {\n    id: 'UZB',\n    label: 'Uzbekistan',\n  },\n  {\n    id: 'VAT',\n    label: 'Vatican City',\n  },\n  {\n    id: 'VCT',\n    label: 'Saint Vincent and the Grenadines',\n  },\n  {\n    id: 'VEN',\n    label: 'Venezuela',\n  },\n  {\n    id: 'VGB',\n    label: 'British Virgin Islands',\n  },\n  {\n    id: 'VIR',\n    label: 'United States Virgin Islands',\n  },\n  {\n    id: 'VNM',\n    label: 'Vietnam',\n  },\n  {\n    id: 'VUT',\n    label: 'Vanuatu',\n  },\n  {\n    id: 'WLF',\n    label: 'Wallis and Futuna',\n  },\n  {\n    id: 'WSM',\n    label: 'Samoa',\n  },\n  {\n    id: 'YEM',\n    label: 'Yemen',\n  },\n  {\n    id: 'ZAF',\n    label: 'South Africa',\n  },\n  {\n    id: 'ZMB',\n    label: 'Zambia',\n  },\n  {\n    id: 'ZWE',\n    label: 'Zimbabwe',\n  },\n]\n","import React, { useCallback } from 'react'\nimport SearchComponent from './search'\nimport { DataValue, DataSelection, DataSelectionGrouped } from './search.types'\nimport Downshift, { DownshiftState, StateChangeOptions } from 'downshift'\nimport { useResultsFiltered, asyncFields } from './search.hooks'\n\nimport data from '../../data/data'\nimport { DataItem } from '../../types/data'\n\n// Hack to look like spaces but be able to identify between input spaces and label spaces\nconst breakingSpaceCharacter = '\\u00a0'\nconst breakingSpaceRegex = new RegExp(breakingSpaceCharacter, 'g')\nexport const replaceWithBreakingSpaces = (string: string) =>\n  string.replace(/\\s/gi, breakingSpaceCharacter)\nexport const replaceWithNormalSpaces = (string: string) => string.replace(breakingSpaceRegex, ' ')\n\nconst groupSelectionsByType = (selections: DataItem[]): DataSelectionGrouped => {\n  return selections.reduce((acc: DataSelectionGrouped, selection: DataItem) => {\n    const { type, id, label } = selection\n    const existingType = acc[type]\n    if (existingType) {\n      acc[type].values.push({ id, label })\n      return acc\n    }\n    return {\n      ...acc,\n      [type]: { type, values: [{ id, label }] },\n    }\n  }, {})\n}\n\nconst parseSelectionToInput = (selections: DataSelectionGrouped, lastCharacter: string = ' ') => {\n  const selectionsLength = Object.values(selections).length - 1\n  return Object.values(selections).reduce(\n    (acc: string, item: DataSelection, index: number) =>\n      `${acc !== '' ? `${acc} ` : ''}${item.type}:${item.values\n        .map((v: DataValue) => replaceWithBreakingSpaces(v.label))\n        .join(',')}${index === selectionsLength ? lastCharacter : ''}`,\n    ''\n  )\n}\n\ninterface SearchContainerProps {\n  initialSearch: string\n  onChange(selectedItems: DataItem[], inputValue: string): void\n}\n\nconst SearchContainer: React.FC<SearchContainerProps> = (props) => {\n  let cursorPosition = 0\n  const [state, dispatch] = useResultsFiltered(data, props.initialSearch)\n  const { results, loading } = state\n\n  const handleStateChange = useCallback(\n    (changes: StateChangeOptions<DataItem[]>, downshiftState: DownshiftState<DataItem[]>) => {\n      if (changes.hasOwnProperty('inputValue')) {\n        const { inputValue = '', selectedItem } = downshiftState\n        const inputValueString = inputValue || ''\n        if (selectedItem !== null) {\n          props.onChange(selectedItem, inputValueString)\n          if (inputValue) {\n            dispatch({\n              type: 'inputChange',\n              payload: { search: inputValueString, selectedItem, cursorPosition },\n            })\n          }\n        }\n      }\n    },\n    []\n  )\n\n  const handleConfirmSelection = (\n    state: DownshiftState<any>,\n    changes: StateChangeOptions<any>,\n    lastCharacter: string = ' '\n  ): StateChangeOptions<any> => {\n    const currentItems = state.selectedItem || []\n    const alreadySelected = currentItems.find(\n      (item: DataItem) => item.id === changes.selectedItem.id\n    )\n    const selectedItem = alreadySelected ? currentItems : [...currentItems, changes.selectedItem]\n    const groupedSelections = groupSelectionsByType(selectedItem)\n    // Adding a space at the end to start with a clean search when press enter\n    const inputValue = parseSelectionToInput(groupedSelections, lastCharacter)\n    return { ...changes, selectedItem, inputValue }\n  }\n\n  const parseInputToFields = (input: string): { type: string; labels: string[] }[] => {\n    return input\n      .split(' ')\n      .filter((s) => s)\n      .map((s) => {\n        const [type, labels] = s.split(':')\n        return {\n          type,\n          labels: labels\n            ? labels\n                .split(',')\n                .map(replaceWithNormalSpaces)\n                .filter((l) => l)\n            : [],\n        }\n      })\n  }\n\n  const getSelectedItemsByInput = (input: string, currentSelection: DataItem[]): DataItem[] => {\n    const inputValuesParsed = input ? parseInputToFields(input) : null\n    return inputValuesParsed !== null\n      ? currentSelection.filter(\n          (i: DataItem) =>\n            inputValuesParsed.find(\n              (p) => p.type === i.type && p.labels !== undefined && p.labels.includes(i.label)\n            ) !== undefined\n        )\n      : []\n  }\n\n  const handleChangeInput = (\n    state: DownshiftState<DataItem[]>,\n    changes: StateChangeOptions<DataItem[]>\n  ): StateChangeOptions<DataItem[]> => {\n    cursorPosition = 0\n    if (changes.inputValue && state.inputValue) {\n      const length = Math.max(state.inputValue.length, changes.inputValue.length)\n      for (let i = 0; i < length; i++) {\n        if (changes.inputValue[i] === undefined) {\n          cursorPosition -= 1\n        } else if (state.inputValue[i] === changes.inputValue[i]) {\n          cursorPosition += 1\n        }\n      }\n    }\n    const inputValue = changes.inputValue || ''\n    let selectedItem = getSelectedItemsByInput(inputValue, state.selectedItem || [])\n    if (inputValue) {\n      // Remove from current when cursor is in last character to suggest\n      let currentLabelEndIndex = cursorPosition + 1\n      let currentLabelStartIndex = 0\n      for (let i = cursorPosition; i > 0; i--) {\n        if (inputValue[i] === ':' || inputValue[i] === ',') {\n          currentLabelStartIndex = i + 1\n          break\n        }\n      }\n      const currentLabel = replaceWithNormalSpaces(\n        inputValue.slice(currentLabelStartIndex, currentLabelEndIndex)\n      )\n      const currentSelection = selectedItem.find((i: DataItem) => i.label === currentLabel)\n      // Removes the current selected when cursor is in last character to suggest properly\n      // but don't do it when async as would need another fetch\n      if (currentSelection && !asyncFields.includes(currentSelection.type)) {\n        selectedItem = selectedItem.filter((item: DataItem) => item.id !== currentSelection.id)\n      }\n    }\n\n    return { ...changes, selectedItem, isOpen: inputValue !== '' }\n  }\n\n  const stateReducer = useCallback(\n    (\n      state: DownshiftState<DataItem[]>,\n      changes: StateChangeOptions<DataItem[]>\n    ): StateChangeOptions<DataItem[]> => {\n      switch (changes.type as any) {\n        case Downshift.stateChangeTypes.keyDownEnter:\n        case Downshift.stateChangeTypes.clickItem: {\n          return handleConfirmSelection(state, changes)\n        }\n        case 'keyDownComa': {\n          return handleConfirmSelection(state, changes, '')\n        }\n        case Downshift.stateChangeTypes.changeInput: {\n          return handleChangeInput(state, changes)\n        }\n        default:\n          // Avoids warning on uncontrolled input value\n          return { ...changes, inputValue: changes.inputValue || state.inputValue || '' }\n      }\n    },\n    []\n  )\n\n  const customKeyDownHandler = useCallback(\n    (event: React.KeyboardEvent<HTMLInputElement>, downshift: any) => {\n      const { highlightedIndex, inputValue, setState } = downshift\n      const hasValue = inputValue !== '' && inputValue !== ' '\n      const isSpace = event.key === ' '\n      const isComma = event.key === ','\n      const hasOneOptions = results.length === 1\n      if (hasValue && ((isSpace || isComma) && hasOneOptions)) {\n        ;(event as any).nativeEvent.preventDownshiftDefault = true\n        if (highlightedIndex !== null && highlightedIndex >= 0) {\n          const selectedItem = results[highlightedIndex]\n          if (selectedItem) {\n            setState({\n              type: 'keyDownComa',\n              selectedItem,\n              inputValue,\n            })\n          }\n        }\n      }\n    },\n    [results]\n  )\n\n  const itemToString = useCallback((i: DataItem): string => {\n    return i ? i.label : ''\n  }, [])\n\n  return (\n    <SearchComponent\n      items={results}\n      loading={loading}\n      itemToString={itemToString}\n      stateReducer={stateReducer}\n      initialInputValue={props.initialSearch}\n      onKeyDown={customKeyDownHandler}\n      onStateChange={handleStateChange}\n    />\n  )\n}\n\nexport default SearchContainer\n","import React, { useMemo, useCallback } from 'react'\nimport './app.css'\nimport Search from './components/search/search.container'\nimport qs from 'qs'\nimport { DataItem } from './types/data'\n\nconst App: React.FC = (): React.ReactElement => {\n  const query = useMemo(() => {\n    const query = qs.parse(window.location.search.replace('?', ''))\n    return (query && query.search) || ''\n  }, [])\n\n  const handleChange = useCallback((selectedItems: DataItem[], inputValue) => {\n    const url = window.location.origin + window.location.pathname + '?search=' + inputValue\n    window.history.replaceState(window.history.state, '', url)\n  }, [])\n\n  return (\n    <div className=\"app\">\n      <Search initialSearch={query} onChange={handleChange} />\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './app'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchContainer\":\"search_searchContainer__MIOBX\",\"searchInput\":\"search_searchInput__3QW9t\",\"optionList\":\"search_optionList__2xo8Z\",\"loadingContainer\":\"search_loadingContainer__1zcWl\"};"],"sourceRoot":""}