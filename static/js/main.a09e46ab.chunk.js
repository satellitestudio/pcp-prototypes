(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(a,e,l){a.exports=l(23)},17:function(a,e,l){},18:function(a,e,l){},23:function(a,e,l){"use strict";l.r(e);var i=l(0),n=l.n(i),t=l(9),d=l.n(t),r=(l(17),l(18),l(2)),b=l(4),o=l(5),u=l(1),s=l(6),c=l.n(s),p=l(3),f=function(a){var e=a.itemToString,l=a.onChange,i=a.onKeyDown,t=a.stateReducer,d=a.items,r=a.onStateChange,b=a.loading;return n.a.createElement(p.a,{onChange:l,stateReducer:t,itemToString:e,onStateChange:r,defaultHighlightedIndex:0},function(a){var l=a.getInputProps,t=a.getMenuProps,r=a.getItemProps,o=a.isOpen,u=a.selectedItem,s=a.highlightedIndex;return n.a.createElement("div",{className:c.a.searchContainer},n.a.createElement("div",null,n.a.createElement("input",Object.assign({className:c.a.searchInput},l({placeholder:"Start searching",onKeyDown:void 0!==i?function(e){return i(e,a)}:void 0})))),o?n.a.createElement("ul",Object.assign({className:c.a.optionList},t()),d.map(function(a,l){return n.a.createElement("li",Object.assign({key:a.id},r({item:a,index:l}),{style:{backgroundColor:s===l?"#ccc":"transparent",color:u===a?"#0f0f0f":"#000"}}),a.type,": ",e(a))}),!0===b&&n.a.createElement("li",null,"loading...")):null)})},m=l(10),h=["flag","rfmo","vessel"],C=["vessel"],S=function(a,e,l){var i=e&&e.map(function(a){return a.type})||[],n=e&&e.map(function(a){return a.label})||[],t={},d=a.replace(/:/gi," ").replace(/,/gi," ").split(" ").map(A).filter(function(a){return!(!a||""===a)&&(i.includes(a)?!!t[a]||(t[a]=!0,!1):!n.includes(a))});if(!(" "===a[l])){for(var r=0,b=0,o=l;o>0;o--)if(":"===a[o])r=o;else if(" "===a[o]){b=o+1;break}var u=a.slice(b,r);u&&d.push(u)}return d},g=function(a,e,l,i){if(!e)return a;var n=l&&l.map(function(a){return a.id})||[],t=S(e,l,i),d=n.length>0?a.filter(function(a){return!n.includes(a.id)}):a;return t.reduce(function(a,e){return Object(m.a)(a,e,{keys:["label","type"]})},d)},I=[].concat(Object(r.a)([{id:"ICCAT",label:"ICCAT"},{id:"IOTC",label:"IOTC"},{id:"WCPFC",label:"WCPFC"},{id:"IATTC",label:"IATTC"},{id:"AIDCP",label:"AIDCP"},{id:"CCSBT",label:"CCSBT"}].map(function(a){return Object(u.a)({},a,{type:"rfmo"})})),Object(r.a)([{id:"ABW",label:"Aruba"},{id:"AFG",label:"Afghanistan"},{id:"AGO",label:"Angola"},{id:"AIA",label:"Anguilla"},{id:"ALA",label:"\xc5land Islands"},{id:"ALB",label:"Albania"},{id:"AND",label:"Andorra"},{id:"ARE",label:"United Arab Emirates"},{id:"ARG",label:"Argentina"},{id:"ARM",label:"Armenia"},{id:"ASM",label:"American Samoa"},{id:"ATA",label:"Antarctica"},{id:"ATF",label:"French Southern and Antarctic Lands"},{id:"ATG",label:"Antigua and Barbuda"},{id:"AUS",label:"Australia"},{id:"AUT",label:"Austria"},{id:"AZE",label:"Azerbaijan"},{id:"BDI",label:"Burundi"},{id:"BEL",label:"Belgium"},{id:"BEN",label:"Benin"},{id:"BFA",label:"Burkina Faso"},{id:"BGD",label:"Bangladesh"},{id:"BGR",label:"Bulgaria"},{id:"BHR",label:"Bahrain"},{id:"BHS",label:"Bahamas"},{id:"BIH",label:"Bosnia and Herzegovina"},{id:"BLM",label:"Saint Barth\xe9lemy"},{id:"SHN",label:"Saint Helena, Ascension and Tristan da Cunha"},{id:"BLR",label:"Belarus"},{id:"BLZ",label:"Belize"},{id:"BMU",label:"Bermuda"},{id:"BOL",label:"Bolivia"},{id:"BES",label:"Caribbean Netherlands"},{id:"BRA",label:"Brazil"},{id:"BRB",label:"Barbados"},{id:"BRN",label:"Brunei"},{id:"BTN",label:"Bhutan"},{id:"BVT",label:"Bouvet Island"},{id:"BWA",label:"Botswana"},{id:"CAF",label:"Central African Republic"},{id:"CAN",label:"Canada"},{id:"CCK",label:"Cocos (Keeling) Islands"},{id:"CHE",label:"Switzerland"},{id:"CHL",label:"Chile"},{id:"CHN",label:"China"},{id:"CIV",label:"Ivory Coast"},{id:"CMR",label:"Cameroon"},{id:"COD",label:"DR Congo"},{id:"COG",label:"Republic of the Congo"},{id:"COK",label:"Cook Islands"},{id:"COL",label:"Colombia"},{id:"COM",label:"Comoros"},{id:"CPV",label:"Cape Verde"},{id:"CRI",label:"Costa Rica"},{id:"CUB",label:"Cuba"},{id:"CUW",label:"Cura\xe7ao"},{id:"CXR",label:"Christmas Island"},{id:"CYM",label:"Cayman Islands"},{id:"CYP",label:"Cyprus"},{id:"CZE",label:"Czechia"},{id:"DEU",label:"Germany"},{id:"DJI",label:"Djibouti"},{id:"DMA",label:"Dominica"},{id:"DNK",label:"Denmark"},{id:"DOM",label:"Dominican Republic"},{id:"DZA",label:"Algeria"},{id:"ECU",label:"Ecuador"},{id:"EGY",label:"Egypt"},{id:"ERI",label:"Eritrea"},{id:"ESH",label:"Western Sahara"},{id:"ESP",label:"Spain"},{id:"EST",label:"Estonia"},{id:"ETH",label:"Ethiopia"},{id:"FIN",label:"Finland"},{id:"FJI",label:"Fiji"},{id:"FLK",label:"Falkland Islands"},{id:"FRA",label:"France"},{id:"FRO",label:"Faroe Islands"},{id:"FSM",label:"Micronesia"},{id:"GAB",label:"Gabon"},{id:"GBR",label:"United Kingdom"},{id:"GEO",label:"Georgia"},{id:"GGY",label:"Guernsey"},{id:"GHA",label:"Ghana"},{id:"GIB",label:"Gibraltar"},{id:"GIN",label:"Guinea"},{id:"GLP",label:"Guadeloupe"},{id:"GMB",label:"Gambia"},{id:"GNB",label:"Guinea-Bissau"},{id:"GNQ",label:"Equatorial Guinea"},{id:"GRC",label:"Greece"},{id:"GRD",label:"Grenada"},{id:"GRL",label:"Greenland"},{id:"GTM",label:"Guatemala"},{id:"GUF",label:"French Guiana"},{id:"GUM",label:"Guam"},{id:"GUY",label:"Guyana"},{id:"HKG",label:"Hong Kong"},{id:"HMD",label:"Heard Island and McDonald Islands"},{id:"HND",label:"Honduras"},{id:"HRV",label:"Croatia"},{id:"HTI",label:"Haiti"},{id:"HUN",label:"Hungary"},{id:"IDN",label:"Indonesia"},{id:"IMN",label:"Isle of Man"},{id:"IND",label:"India"},{id:"IOT",label:"British Indian Ocean Territory"},{id:"IRL",label:"Ireland"},{id:"IRN",label:"Iran"},{id:"IRQ",label:"Iraq"},{id:"ISL",label:"Iceland"},{id:"ISR",label:"Israel"},{id:"ITA",label:"Italy"},{id:"JAM",label:"Jamaica"},{id:"JEY",label:"Jersey"},{id:"JOR",label:"Jordan"},{id:"JPN",label:"Japan"},{id:"KAZ",label:"Kazakhstan"},{id:"KEN",label:"Kenya"},{id:"KGZ",label:"Kyrgyzstan"},{id:"KHM",label:"Cambodia"},{id:"KIR",label:"Kiribati"},{id:"KNA",label:"Saint Kitts and Nevis"},{id:"KOR",label:"South Korea"},{id:"UNK",label:"Kosovo"},{id:"KWT",label:"Kuwait"},{id:"LAO",label:"Laos"},{id:"LBN",label:"Lebanon"},{id:"LBR",label:"Liberia"},{id:"LBY",label:"Libya"},{id:"LCA",label:"Saint Lucia"},{id:"LIE",label:"Liechtenstein"},{id:"LKA",label:"Sri Lanka"},{id:"LSO",label:"Lesotho"},{id:"LTU",label:"Lithuania"},{id:"LUX",label:"Luxembourg"},{id:"LVA",label:"Latvia"},{id:"MAC",label:"Macau"},{id:"MAF",label:"Saint Martin"},{id:"MAR",label:"Morocco"},{id:"MCO",label:"Monaco"},{id:"MDA",label:"Moldova"},{id:"MDG",label:"Madagascar"},{id:"MDV",label:"Maldives"},{id:"MEX",label:"Mexico"},{id:"MHL",label:"Marshall Islands"},{id:"MKD",label:"Macedonia"},{id:"MLI",label:"Mali"},{id:"MLT",label:"Malta"},{id:"MMR",label:"Myanmar"},{id:"MNE",label:"Montenegro"},{id:"MNG",label:"Mongolia"},{id:"MNP",label:"Northern Mariana Islands"},{id:"MOZ",label:"Mozambique"},{id:"MRT",label:"Mauritania"},{id:"MSR",label:"Montserrat"},{id:"MTQ",label:"Martinique"},{id:"MUS",label:"Mauritius"},{id:"MWI",label:"Malawi"},{id:"MYS",label:"Malaysia"},{id:"MYT",label:"Mayotte"},{id:"NAM",label:"Namibia"},{id:"NCL",label:"New Caledonia"},{id:"NER",label:"Niger"},{id:"NFK",label:"Norfolk Island"},{id:"NGA",label:"Nigeria"},{id:"NIC",label:"Nicaragua"},{id:"NIU",label:"Niue"},{id:"NLD",label:"Netherlands"},{id:"NOR",label:"Norway"},{id:"NPL",label:"Nepal"},{id:"NRU",label:"Nauru"},{id:"NZL",label:"New Zealand"},{id:"OMN",label:"Oman"},{id:"PAK",label:"Pakistan"},{id:"PAN",label:"Panama"},{id:"PCN",label:"Pitcairn Islands"},{id:"PER",label:"Peru"},{id:"PHL",label:"Philippines"},{id:"PLW",label:"Palau"},{id:"PNG",label:"Papua New Guinea"},{id:"POL",label:"Poland"},{id:"PRI",label:"Puerto Rico"},{id:"PRK",label:"North Korea"},{id:"PRT",label:"Portugal"},{id:"PRY",label:"Paraguay"},{id:"PSE",label:"Palestine"},{id:"PYF",label:"French Polynesia"},{id:"QAT",label:"Qatar"},{id:"REU",label:"R\xe9union"},{id:"ROU",label:"Romania"},{id:"RUS",label:"Russia"},{id:"RWA",label:"Rwanda"},{id:"SAU",label:"Saudi Arabia"},{id:"SDN",label:"Sudan"},{id:"SEN",label:"Senegal"},{id:"SGP",label:"Singapore"},{id:"SGS",label:"South Georgia"},{id:"SJM",label:"Svalbard and Jan Mayen"},{id:"SLB",label:"Solomon Islands"},{id:"SLE",label:"Sierra Leone"},{id:"SLV",label:"El Salvador"},{id:"SMR",label:"San Marino"},{id:"SOM",label:"Somalia"},{id:"SPM",label:"Saint Pierre and Miquelon"},{id:"SRB",label:"Serbia"},{id:"SSD",label:"South Sudan"},{id:"STP",label:"S\xe3o Tom\xe9 and Pr\xedncipe"},{id:"SUR",label:"Suriname"},{id:"SVK",label:"Slovakia"},{id:"SVN",label:"Slovenia"},{id:"SWE",label:"Sweden"},{id:"SWZ",label:"Eswatini"},{id:"SXM",label:"Sint Maarten"},{id:"SYC",label:"Seychelles"},{id:"SYR",label:"Syria"},{id:"TCA",label:"Turks and Caicos Islands"},{id:"TCD",label:"Chad"},{id:"TGO",label:"Togo"},{id:"THA",label:"Thailand"},{id:"TJK",label:"Tajikistan"},{id:"TKL",label:"Tokelau"},{id:"TKM",label:"Turkmenistan"},{id:"TLS",label:"Timor-Leste"},{id:"TON",label:"Tonga"},{id:"TTO",label:"Trinidad and Tobago"},{id:"TUN",label:"Tunisia"},{id:"TUR",label:"Turkey"},{id:"TUV",label:"Tuvalu"},{id:"TWN",label:"Taiwan"},{id:"TZA",label:"Tanzania"},{id:"UGA",label:"Uganda"},{id:"UKR",label:"Ukraine"},{id:"UMI",label:"United States Minor Outlying Islands"},{id:"URY",label:"Uruguay"},{id:"USA",label:"United States"},{id:"UZB",label:"Uzbekistan"},{id:"VAT",label:"Vatican City"},{id:"VCT",label:"Saint Vincent and the Grenadines"},{id:"VEN",label:"Venezuela"},{id:"VGB",label:"British Virgin Islands"},{id:"VIR",label:"United States Virgin Islands"},{id:"VNM",label:"Vietnam"},{id:"VUT",label:"Vanuatu"},{id:"WLF",label:"Wallis and Futuna"},{id:"WSM",label:"Samoa"},{id:"YEM",label:"Yemen"},{id:"ZAF",label:"South Africa"},{id:"ZMB",label:"Zambia"},{id:"ZWE",label:"Zimbabwe"}].map(function(a){return Object(u.a)({},a,{type:"flag"})}))),M=new RegExp("\xa0","g"),A=function(a){return a.replace(M," ")},T=function(){var a=0,e=function(a,e){var l={loading:!1,staticData:a,selectedItem:[],cursorPosition:0,search:e||"",results:a},n=Object(i.useReducer)(function(a,e){switch(e.type){case"inputChange":return Object(u.a)({},a,e.payload);case"startSearch":var l=a.staticData,i=a.search,n=a.selectedItem,t=a.cursorPosition;return Object(u.a)({},a,{results:g(l,i,n,t),loading:e.payload});case"setLoading":return Object(u.a)({},a,{loading:e.payload});case"endSearch":return Object(u.a)({},a,{results:[].concat(Object(r.a)(a.results),Object(r.a)(e.payload)),loading:!1});default:return a}},l),t=Object(b.a)(n,2),d=t[0],o=t[1],s=d.search,c=d.selectedItem,p=d.cursorPosition;return Object(i.useEffect)(function(){var a=S(s,c,p),e=a.filter(function(a){return h.includes(a)}),l=0===e.length||e.some(function(a){return C.includes(a)}),i=c.map(function(a){return a.id}),n=c.map(function(a){return a.label}),t=a.filter(function(a){return!n.includes(a)&&!h.includes(a)}).join(","),d=l&&""!==t;if(o({type:"startSearch",payload:d}),d){var r=new AbortController,b="https://vessels-dot-world-fishing-827.appspot.com/datasets/indonesia/vessels?query=".concat(t,"&offset=0");return fetch(b,{signal:r.signal}).then(function(a){return a.status>=200&&a.status<300?Promise.resolve(a):Promise.reject(new Error(a.statusText))}).then(function(a){return a.json()}).then(function(a){var e=a.entries.filter(function(a){return a.name}).map(function(a){return{id:a.vesselId,label:a.name,type:"vessel"}}).filter(function(a){return!i.includes(a.id)});o({type:"endSearch",payload:e})}).catch(function(a){"AbortError"!==a.name&&console.error("Oops!",a),o({type:"endSearch",payload:[]})}),function(){return r.abort()}}},[s,c]),[d,o]}(I,""),l=Object(b.a)(e,2),t=l[0],d=l[1],s=t.results,c=t.loading,m=Object(i.useCallback)(function(e,l){if(e.hasOwnProperty("inputValue")){var i=l.inputValue,n=l.selectedItem;i&&d({type:"inputChange",payload:{search:i||"",selectedItem:n,cursorPosition:a}})}},[]),M=function(a,e){var l=a.selectedItem||[],i=l.find(function(a){return a.id===e.selectedItem.id})?l:[].concat(Object(r.a)(l),[e.selectedItem]),n=function(a){return Object.values(a).reduce(function(a,e){return"".concat(""!==a?"".concat(a," "):"").concat(e.type,":").concat(e.values.map(function(a){return a.label.replace(/\s/gi,"\xa0")}).join(","))},"")}(i.reduce(function(a,e){var l=e.type,i=e.id,n=e.label;return a[l]?(a[l].values.push({id:i,label:n}),a):Object(u.a)({},a,Object(o.a)({},l,{type:l,values:[{id:i,label:n}]}))},{}));return Object(u.a)({},e,{selectedItem:i,inputValue:n})},T=function(a,e){var l=a?function(a){return a.split(" ").filter(function(a){return a}).map(function(a){var e=a.split(":"),l=Object(b.a)(e,2),i=l[0],n=l[1];return{type:i,labels:n?n.split(",").map(A).filter(function(a){return a}):[]}})}(a):null;return null!==l?e.filter(function(a){return void 0!==l.find(function(e){return e.type===a.type&&void 0!==e.labels&&e.labels.includes(a.label)})}):[]},y=Object(i.useCallback)(function(e,l){switch(l.type){case p.a.stateChangeTypes.keyDownEnter:case p.a.stateChangeTypes.clickItem:return M(e,l);case p.a.stateChangeTypes.changeInput:return function(e,l){if(a=0,l.inputValue&&e.inputValue)for(var i=Math.max(e.inputValue.length,l.inputValue.length),n=0;n<i;n++)void 0===l.inputValue[n]?a-=1:e.inputValue[n]===l.inputValue[n]&&(a+=1);var t=l.inputValue||"",d=T(t,e.selectedItem||[]);if(t){for(var r=a+1,b=0,o=a;o>0;o--)if(":"===t[o]||","===t[o]){b=o+1;break}var s=A(t.slice(b,r)),c=d.find(function(a){return a.label===s});c&&!C.includes(c.type)&&(d=d.filter(function(a){return a.id!==c.id}))}return Object(u.a)({},l,{selectedItem:d,isOpen:""!==t})}(e,l);default:return Object(u.a)({},l,{inputValue:l.inputValue||e.inputValue||""})}},[]),N=Object(i.useCallback)(function(a,e){var l=e.highlightedIndex,i=e.inputValue,n=e.setState,t=""!==i&&" "!==i,d=" "===a.key,r=","===a.key,b=1===s.length;if(t&&(d||r)&&b&&(a.nativeEvent.preventDownshiftDefault=!0,null!==l&&l>=0)){var o=s[l];o&&n({type:p.a.stateChangeTypes.clickItem,selectedItem:o,inputValue:i})}},[s]),B=Object(i.useCallback)(function(a){console.log("SELECTED ITEMS CALLBACK"),console.table(a)},[]),R=Object(i.useCallback)(function(a){return a?a.label:""},[]);return n.a.createElement(f,{items:s,loading:c,onChange:B,onKeyDown:N,itemToString:R,stateReducer:y,onStateChange:m})},y=function(){return n.a.createElement("div",{className:"app"},n.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(a){a.unregister()})},6:function(a,e,l){a.exports={searchContainer:"search_searchContainer__MIOBX",searchInput:"search_searchInput__3QW9t",optionList:"search_optionList__2xo8Z"}}},[[11,1,2]]]);
//# sourceMappingURL=main.a09e46ab.chunk.js.map